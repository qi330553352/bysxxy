webpackJsonp([0],{"/7AR":function(e,t){},"/T+6":function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"siteMsgList",components:{bHeader:s.a,bFooter:o.a},data:function(){var e=this,t=this;return{userTypes:[],registerUserTypes:[{id:"1",name:"C端用户"},{id:"2",name:"B端用户"}],dateTime:["",""],unlinkBoolean:!1,pageInfo:{total:0,currPage:1,pageSize:10},userId:"",query:{status:"null",searchType:"accountNum",keyword:"",userType:"null",startTime:"",endTime:""},list:[],checkboxModel:[],isCheckedAll:!1,form:{id:"",accountNum:"",nickName:"",password:"",repassword:"",userName:"",mobileno:"",userType:"",registerUserType:"1",gender:"M",schoolInfoName:"",email:"",schoolInfoId:"",region:"",classTag:""},rules:{accountNum:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:function(e,a,o){var s=new RegExp(/^[a-zA-Z0-9\u4E00-\u9FA5]+$/);if(""===a)o(new Error("请输入用户名"));else if(""!==a){var i=s.test(a);i?i&&(t.form.id?o():t.form.id||t.axios.get("/proxy/report-business/booking/v2/api/userManagement/checkUser?accountNum="+a).then(function(e){e&&void 0!==e.data&&("200"===e.data.code?0!==e.data.data?o(new Error("该用户名已存在，请更换用户名!")):o():"200"!==e.data.code&&o(new Error("网路错误:"+e.data.code)))}).catch(function(e){o(new Error("服务错误，请重试"))})):o(new Error("用户名必须由中文，英文字母，数字或其组合组成!"))}else o()},trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(e,t,a){var o=t.length;"-1"==t.indexOf(" ")?0==o?a(new Error("密码不能为空")):o<8?a(new Error("密码为8-16位")):/^[0-9]+$/.test(t)?a(new Error("密码不能为纯数字，建议使用字母、数字和符号两种及以上组合")):/^[a-zA-Z]+$/.test(t)?a(new Error("密码不能为纯字母，建议使用字母、数字和符号两种及以上组合")):/((?=.*[a-z])(?=.*\d)|(?=[a-z])(?=.*[.,$+-<>?`_=;:\(\)\[\]{}"'|\/#@!~%^&*])|(?=.*[.,$+-<>?`_=;:\(\)\[\]{}"'|\/#@!~%^&*])(?=.*[a-z])|(?=.*\d)(?=.*[.,$+-<>?`_=;:\(\)\[\]{}"'|\/#@!~%^&*]))[a-z\d.,$+-<>?`_=;:\(\)\[\]{}"'|\/#@!~%^&*]{8,16}/i.test(t)?a():a(new Error("密码格式不对，请重新输入")):a(new Error("密码中不能包含空格"))},trigger:"blur"}],repassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,a,o){""===a?o(new Error("请再次输入密码")):a!==e.form.password?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}],userName:[{required:!0,message:"请输入姓名",trigger:"blur"}],gender:[{required:!0,message:"请输入姓名",trigger:"blur"}],mobileno:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,a,o){a.length;/^[1][34578][0-9]{9}$/.test(a)?t.form.id?t.form.id&&o():t.axios.get("/proxy/report-business/booking/v2/api/userManagement/checkUser?phoneNumber="+a).then(function(e){e&&void 0!==e.data&&("200"===e.data.code?0!==e.data.data?o(new Error("该手机号码已存在，请更换手机号码!")):o():"200"!==e.data.code&&o(new Error("网路错误:"+e.data.code)))}).catch(function(e){o(new Error("服务错误，请重试"))}):o(new Error("格式错误，请输入正确的手机号码"))},trigger:"blur"}],email:[{validator:function(e,t,a){if(t){var o=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(t);o?o&&a():a(new Error("格式错误，请输入正确的邮箱"))}else a()},trigger:"blur"}],registerUserType:[{required:!0,message:"请选择一个用户类型",trigger:"blur"}],userType:[{required:!0,message:"请选择一个用户组",trigger:"blur"}],schoolInfoName:[{required:!0,validator:function(e,a,o){a&&t.form.schoolInfoId?o():o(new Error("请输入内容搜索并选择"))},trigger:"change"}]},formLength:{accountNum:50,userName:10,password:16,repassword:16,nickName:10,mobileno:11,email:50,classTag:8},formLabelWidth:"120px",dialogFormVisible:!1,dialogFormTitle:"",dialogRejectVisible:!1,dialogApproveVisible:!1,rejectData:{},rejectReason:"",dialogAccountVisible:!1,accountData:{},userTypeMap:{},dialogImportUserVisible:!1,importUser:{actionUrl:"",templateUrl:"/proxy/report-business/booking/open/users/download_template",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel",fileList:[],limit:1,status:"",msg:"",failedNum:"",successNum:"",filePath:"",headers:{Authorization:sessionStorage.getItem("token")},org:"",schoolInfoId:""},rolesDialogVisible:!1,roles:{allList:[],list:[]},userRoleData:{},isExportOrg:!1,exportOrgMsg:""}},created:function(){this.userId=this.getLoginId(),this.getUserGroup(),this.getInfo()},computed:{isEdit:function(){return!!this.form.id}},watch:{checkboxModel:{handler:function(e,t){this.checkboxModel.length===this.list.length?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{selectLeftRole:function(e){this.roles.allList[e].isActive=!this.roles.allList[e].isActive},selectRightRole:function(e){this.roles.list[e].isActive=!this.roles.list[e].isActive},shiftToRight:function(t){var a=this.roles.allList,o=this.roles.list;"ALL"===t?a.forEach(function(t){var a=e.extend(!0,{},t);o.push(a)}):"ALL"!==t&&a.forEach(function(t){if(t.isActive){var a=e.extend(!0,{},t);o.push(a)}});var s=_(o).uniq("id");this.roles.list=s},shiftToLeft:function(t){var a=this.roles.list,o=[];"ALL"===t?o=[]:"ALL"!==t&&a.forEach(function(t){if(!t.isActive){var a=e.extend(!0,{},t);o.push(a)}}),this.roles.list=o},shiftAllToLeft:function(){},roleSetting:function(e){var t=this;this.roles.allList=[],this.roles.list=[],this.userRoleData={},this.userRoleData.userId=e.id,t.axios.get("/proxy/report-business/booking/v2/api/userManagement/getAllRole").then(function(e){if(e&&e.data&&e.data.data.length>0){var a=e.data.data;a.forEach(function(e){e.isActive=!1}),t.roles.allList=a}}).catch(function(e){console.log(e)});var a=e.id;t.axios.get("/proxy/report-business/booking/v2/api/userManagement/getUserRole/"+a).then(function(e){if(e&&e.data&&e.data.data){var a=e.data.data.listRole;a.forEach(function(e){e.isActive=!1}),t.roles.list=a,t.userRoleData=e.data.data}}).catch(function(e){console.log(e)}),this.rolesDialogVisible=!0},saveAssociateRoles:function(){var e=this,t={listRole:[],userId:""};this.roles.list.forEach(function(e){t.listRole.push({id:e.id,roleName:e.roleName,roleDescription:e.roleDescription,createTime:e.createTime})}),t.userId=this.userRoleData.userId,this.userRoleData.id&&(t.id=this.userRoleData.id),e.axios.post("/proxy/report-business/booking/v2/api/userManagement/saveUserRole",t).then(function(t){t&&t.data&&"200"===t.data.code&&(e.rolesDialogVisible=!1,e.$message({type:"success",message:"保存账号角色成功!"}),e.getInfo())}).catch(function(e){console.log(e)})},accountFormExit:function(e){void 0!==this.$refs.accountForm&&this.$refs.accountForm.resetFields(),this.dialogFormVisible=!1},getLoginId:function(){var e=sessionStorage.getItem("userId");return e||""},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleUploadSuccess:function(e,t,a){this.importUser.status=!0,e&&e.data&&200==e.code&&(this.importUser.code=e.code,this.importUser.msg=e.msg,this.importUser.failedNum=e.data.failedNum,this.importUser.successNum=e.data.successNum,this.importUser.filePath=e.data.filePath?"/proxy/report-business/booking/open/users/download?filePath="+e.data.filePath:""),e&&500==e.code&&(this.importUser.code=e.code,this.importUser.msg=e.msg?e.msg:"")},handleUploadError:function(e,t,a){e&&e.data&&500==e.code&&(this.importUser.status=!0,this.importUser.msg=e.msg,this.importUser.code=e.code)},querySearchAsyncImportUser:function(t,a){var o=this;if(!t||!e.trim(t))return a([{value:"请输入搜索内容",orgId:-1}]),!1;clearTimeout(o.timeout),o.timeout=setTimeout(function(){o.axios.get("/proxy/report-business/booking/v2/api/userManagement/queryLocationBySchoolName?schoolName="+encodeURIComponent(t)).then(function(t){if(t&&t.data&&t.data.data.length>0){var o=t.data.data,s=[];e.each(o,function(e,t){var o=t.orgName?t.orgName:"";s.push({value:o,orgId:t.orgId,region:t.region}),a(s)})}else a([{value:"没找到相关数据",orgId:-1}])}).catch(function(e){a([{value:"没找到相关数据",orgId:-1}]),console.log(e)})},300)},handleSelectImportUser:function(e){this.importUser.schoolInfoId=e.orgId,this.importUser.actionUrl="/proxy/report-business/booking/v2/api/userManagement/users/upload/"+this.userId+"/"+this.importUser.schoolInfoId},beforeExcelUpload:function(e){return!(!this.importUser.org||!this.importUser.schoolInfoId)||(this.$alert("请搜索并选择单位！","提示",{confirmButtonText:"确定",type:"warning"}),!1)},batchInportUser:function(){this.importUser.fileList=[],this.importUser.status=!1,this.importUser.code="",this.importUser.msg="",this.importUser.failedNum="",this.importUser.successNum="",this.importUser.path="",this.importUser.actionUrl="/proxy/report-business/booking/v2/api/userManagement/users/upload/"+this.userId+"/"+this.importUser.schoolInfoId,this.dialogImportUserVisible=!0,this.isExportOrg=!1,this.exportOrgMsg=""},confirmUpload:function(){this.dialogImportUserVisible=!1,this.importUser.status&&window.location.reload()},getUserGroup:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/userManagement/userGroup/list").then(function(t){if(t&&t.data&&t.data.datas.length>0){var a=[];t.data.datas.forEach(function(t){if(void 0!==t.userGroupType&&void 0!==t.userGroupName&&(e.userTypeMap[t.userType]=t.userGroupName),void 0!==t.userType&&t.userGroupName&&t.id){var o={id:t.userType,name:t.userGroupName,userGroupId:t.id};a.push(o)}}),e.userTypes=a}}).catch(function(e){})},querySearchAsync:function(t,a){var o=this;if(!t||!e.trim(t))return a([{value:"请输入搜索内容",orgId:-1}]),!1;clearTimeout(o.timeout),o.timeout=setTimeout(function(){o.axios.get("/proxy/report-business/booking/v2/api/userManagement/queryLocationBySchoolName?schoolName="+encodeURIComponent(t)).then(function(t){if(t&&t.data&&t.data.data.length>0){var o=t.data.data,s=[];e.each(o,function(e,t){var o=t.orgName?t.orgName:"";s.push({value:o,orgId:t.orgId,region:t.region}),a(s)})}else a([{value:"没找到相关数据",orgId:-1}])}).catch(function(e){a([{value:"没找到相关数据",orgId:-1}]),console.log(e)})},300)},handleSelect:function(e){this.form.schoolInfoId=e.orgId,this.form.region=e.region},saveAccountHandle:function(){var e=this;e.$refs.accountForm.validate(function(t){if(!t)return!1;e.saveAccount()})},saveAccount:function(){var t=this,a=e.extend(!0,{},t.form),o=t.getLoginId(),s="";a.creator=o||"";var i=a.userType,r=t.userTypes,n=!!t.form.id;r.forEach(function(e){e.id==i&&(s=e.userGroupId)}),a.userGroupId=s,delete a.repassword,""==a.id&&delete a.id,t.axios.post("/proxy/report-business/booking/v2/api/userManagement/users/saveOrUpdateUser",a).then(function(e){e&&e.data&&"200"==e.data.code&&t.$message({type:"success",message:n?"编辑账户成功!":"新建账户成功!"}),setTimeout(function(){window.location.reload()},3e3)}).catch(function(e){console.log(e)})},viewAccount:function(e){var t=this,a=e.id;t.axios.get("/proxy/report-business/booking/v2/api/userManagement/queryByUserId/"+a).then(function(e){if(e&&e.data&&"200"==e.data.code){if(t.accountData=e.data.data,void 0!==t.accountData.userType){var a=t.accountData.userType;t.accountData.userTypeName=t.userTypeMap[a]}t.dialogAccountVisible=!0}}).catch(function(e){console.log(e)})},editAccount:function(e){var t=this,a=e.id;t.axios.get("/proxy/report-business/booking/v2/api/userManagement/queryByUserId/"+a).then(function(e){if(e&&e.data&&"200"==e.data.code){if(t.dialogFormTitle="编辑账户",e.data.data)var a=e.data.data;var o={accountNum:"",nickName:"",password:"",repassword:"",userName:"",mobileno:"",registerUserType:"",userType:"",gender:"",schoolInfoName:"",email:"",schoolInfoId:"",region:"",classTag:""};t.dialogFormVisible=!0,o.id=a.id,o.accountNum=a.accountNum,o.nickName=a.nickName,o.userName=a.userName,o.password=a.password,o.repassword=a.password,o.mobileno=a.mobileno,o.userType=a.userType,o.registerUserType=a.registerUserType,o.gender=a.gender,o.schoolInfoName=a.schoolInfoName,o.email=a.email,o.schoolInfoId=a.schoolInfoId,o.region=a.region,o.classTag=a.classTag,t.form=o}}).catch(function(e){console.log(e)})},approveAccount:function(e){this.dialogApproveVisible=!0,this.rejectData=e},passAccount:function(){var e=this,t=e.rejectData.id,a=e.getLoginId();e.dialogApproveVisible=!1,e.axios.put("/proxy/report-business/booking/v2/api/userManagement/users/updateUser/"+t+"/"+a+"/1/null").then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"审核通过!"}),setTimeout(function(){window.location.reload()},3e3)}).catch(function(e){console.log(e)})},reject:function(){this.dialogApproveVisible=!1,this.dialogRejectVisible=!0},confirmReject:function(){var e=this,t=e.rejectData.id,a=e.getLoginId(),o=e.rejectReason?e.rejectReason:"null";e.dialogRejectVisible=!1,e.axios.put("/proxy/report-business/booking/v2/api/userManagement/users/updateUser/"+t+"/"+a+"/3/"+o).then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"拒绝审核成功!"}),setTimeout(function(){window.location.reload()},3e3)}).catch(function(e){console.log(e)})},disableAccount:function(e){var t=this,a=e.id,o=t.getLoginId();if(!a||!o)return console.log("参数错误!"),!1;t.$confirm("是否停用账户"+e.accountNum,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){t.axios.put("/proxy/report-business/booking/v2/api/userManagement/users/updateUser/"+a+"/"+o+"/2/null").then(function(a){a&&a.data&&"200"==a.data.code&&t.$message({type:"success",message:"停用账户"+e.accountNum+"成功!"}),setTimeout(function(){window.location.reload()},3e3)}).catch(function(e){console.log(e)})}).catch(function(){})},deleteAccount:function(e){var t=this,a=e.id,o=[];if(!a)return!1;o.push(a),t.$confirm("是否删除账户"+e.accountNum,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){t.axios.post("/proxy/report-business/booking/v2/api/userManagement/deleteUserInfoByIds",o).then(function(e){e&&e.data&&"200"==e.data.code&&t.$message({type:"success",message:"删除成功!"}),setTimeout(function(){window.location.reload()},3e3)}).catch(function(e){console.log(e)})}).catch(function(){})},checkedAll:function(){var e=this;this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){e.checkboxModel.push(t.id)}))},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getInfo()},batchDelete:function(){var t=this,a=t.checkboxModel;if(0==a.length)return t.$confirm("请至少选中一个你要删除的账户！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){}).catch(function(){}),!1;var o=t.list,s=!1;if(e.each(a,function(t,a){e.each(o,function(e,t){if(t.id==a&&2!==t.status)return s=!0,!1})}),s)return t.$confirm("未停用的账户无法删除，请重新确认！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){}).catch(function(){}),!1;t.$confirm("此操作将永久删除选中的账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){t.axios.post("/proxy/report-business/booking/v2/api/userManagement/deleteUserInfoByIds",a).then(function(e){e&&e.data&&"200"==e.data.code&&t.$message({type:"success",message:"删除成功!"}),setTimeout(function(){window.location.reload()},3e3)}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},createAccount:function(){this.dialogFormTitle="新建账户",this.dialogFormVisible=!0,this.form={id:"",accountNum:"",nickName:"",password:"",repassword:"",userName:"",mobileno:"",userType:"",registerUserType:"1",gender:"M",schoolInfoName:"",email:"",schoolInfoId:"",region:"",classTag:""}},searchInfo:function(){this.getInfo()},getTime:function(e){return""!=e&&e?moment(e).format("YYYY-MM-DD HH:mm:ss"):""},getInfo:function(){var e=this,t={infoMap:{},pagesize:10,startpage:1,status:"null",userType:"null"};t.pagesize=e.pageInfo.pageSize,t.startpage=e.pageInfo.currPage,t.status=e.query.status,t.userType=e.query.userType;var a=e.query.searchType;a&&e.query.keyword?t.infoMap[a]=e.query.keyword:t.infoMap={},e.dateTime&&""!=e.dateTime[0]&&(t.startTime=e.dateTime[0]),e.dateTime&&""!=e.dateTime[1]&&(t.endTime=e.dateTime[1]),e.axios.post("/proxy/report-business/booking/v2/api/userManagement/users/search",t).then(function(t){if(t&&t.data&&t.data.datas){var a=t.data.datas,o={0:"待审批",1:"使用中",2:"停用",3:"不通过"};a.forEach(function(t){void 0!==t.status&&void 0!==o[t.status]?t.statusTxt=o[t.status]:t.statusTxt="--",t.formatRegistTime=e.getTime(t.registTime)}),e.list=a,e.pageInfo=t.data.pageInfo}}).catch(function(e){console.log(e)})},exportUsers:function(){var e=this,t={infoMap:{},pagesize:10,startpage:1,status:"null",userType:"null"};t.pagesize=e.pageInfo.pageSize,t.startpage=e.pageInfo.currPage,t.status=e.query.status,t.userType=e.query.userType;var a=e.query.searchType;a&&e.query.keyword?t.infoMap[a]=e.query.keyword:t.infoMap={},e.dateTime&&""!=e.dateTime[0]&&(t.startTime=e.dateTime[0]),e.dateTime&&""!=e.dateTime[1]&&(t.endTime=e.dateTime[1]);var o=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.axios.post("/proxy/report-business/booking/v2/api/userManagement/exportUserInfo",t).then(function(t){o.close(),t&&t.data&&"200"==t.data.code&&t.data.data.filePath&&(window.location.href="/proxy/report-business/booking/open/users/download?filePath="+encodeURIComponent(t.data.data.filePath)),t&&t.data&&"500"==t.data.code&&t.data.msg&&e.$message.error(t.data.msg)}).catch(function(t){o.close(),t.msg&&e.$message.error(t.msg),console.log(t)})},exportOrg:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/userManagement/exportOrgsRelevanceUser/display?token="+sessionStorage.getItem("token")).then(function(t){t.data&&200==t.data.code?e.isExportOrg=!0:(e.isExportOrg=!1,e.exportOrgMsg=t.data.msg)}).catch(function(e){console.log(e)})}}}}).call(t,a("0iPh"))},"0SHn":function(e,t){},"0Ysw":function(e,t,a){e.exports=a.p+"static/img/unopened.7ff1fca.png"},"0iPh":function(e,t){e.exports=jQuery},"136l":function(e,t){},"26bA":function(e,t){},"2ve7":function(e,t){},"3FkA":function(e,t){},"3k9V":function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"openApiList",components:{bHeader:s.a,bFooter:o.a},data:function(){return{pageInfo:{total:0,currPage:1,pageSize:10},query:{name:""},list:[],checkboxModel:[],isCheckedAll:!1,form:{id:"",interfaceName:"",interfaceStatus:0,interfaceURL:"",requestMethod:""},rules:{interfaceName:[{required:!0,message:"接口名称不能为空",trigger:"blur"}],interfaceURL:[{required:!0,message:"URL不能为空",trigger:"blur"}],requestMethod:[{required:!0,message:"请求方法不能为空",trigger:"blur"}],interfaceStatus:[{required:!0,message:"接口状态不能为空",trigger:"blur"}]},formLength:{interfaceName:50,interfaceURL:50},options:[{value:"POST",label:"POST"},{value:"GET",label:"GET"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],dialogFormVisible:!1,dialogFormTitle:"新建接口",formLabelWidth:"100px",detailData:{},dialogDetailVisible:!1,userId:"",validUrl:!1}},created:function(){this.getInfo()},mounted:function(){this.userId=sessionStorage.getItem("userId")},watch:{checkboxModel:{handler:function(e,t){var a=[];this.list.forEach(function(e){2!==e.deletable&&a.push(e)}),this.checkboxModel.length===a.length&&this.checkboxModel.length>0?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{batchDelete:function(){var e=this,t=e.checkboxModel;if(0==t.length)return e.$confirm("请至少选中一个你要删除的接口！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){}).catch(function(){}),!1;e.$confirm("此操作将永久删除选中的接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/application/invokeManager",{data:t}).then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"删除成功!"}),t&&t.data&&"500"==t.data.code&&t.data.msg&&e.$message.error(t.data.msg),e.pageInfo.currPage=1,e.getInfo()}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},serviceFormExit:function(){void 0!==this.$refs.serviceForm&&this.$refs.serviceForm.resetFields(),this.dialogFormVisible=!1},createService:function(){this.dialogFormTitle="新建接口",this.dialogFormVisible=!0,this.form={id:"",interfaceName:"",interfaceStatus:0,interfaceURL:"",requestMethod:""},this.validUrl=!1},editService:function(e){var t=this,a=e.id;t.validUrl=!1,t.axios.get("/proxy/report-business/booking/v2/api/application/invokeManager/"+a).then(function(e){if(e&&e.data&&"200"==e.data.code){var a=e.data.data,o={id:a.id,interfaceName:a.interfaceName,interfaceStatus:a.interfaceStatus,interfaceURL:a.interfaceURL,requestMethod:a.requestMethod};t.dialogFormTitle="编辑接口",t.dialogFormVisible=!0,t.form=o}}).catch(function(e){console.log(e)})},viewService:function(e){var t=e.id;this.$router.push({path:"apiview",query:{id:t}})},changeInterfaceStatus:function(e,t){var a=this,o=1==t?"开放":"关闭";a.$confirm("此操作将"+o+"该接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){a.axios.put("/proxy/report-business/booking/v2/api/application/invokeManager/status/"+a.userId+"/"+e+"/"+t).then(function(e){e&&e.data&&"200"==e.data.code&&a.$message({type:"success",message:o+"接口成功!"}),a.pageInfo.currPage=1,a.getInfo()}).catch(function(e){console.log(e)})}).catch(function(){a.$message({type:"info",message:"已取消操作"})})},saveHandle:function(){var e=this;e.$refs.serviceForm.validate(function(t){if(!t)return!1;e.saveService()})},saveService:function(){var t=this,a=e.extend(!0,{},t.form);""===a.id&&delete a.id;var o=!!a.id;t.validUrl||(o?t.axios.put("/proxy/report-business/booking/v2/api/application/invokeManager/"+this.userId,a).then(function(e){e&&e.data&&"200"==e.data.code?(t.dialogFormVisible=!1,t.$message({type:"success",message:o?"编辑接口成功!":"新建接口成功!"}),t.getInfo()):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)}):t.axios.post("/proxy/report-business/booking/v2/api/application/invokeManager/"+this.userId,a).then(function(e){e&&e.data&&"200"==e.data.code&&(t.dialogFormVisible=!1,t.$message({type:"success",message:o?"编辑接口成功!":"新建接口成功!"}),t.getInfo())}).catch(function(e){console.log(e)}))},checkedAll:function(){var e=this;this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){2!==t.deletable&&e.checkboxModel.push(t.id)}))},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageInfo.currPage=e,this.getInfo()},searchInfo:function(){this.getInfo()},getInfo:function(){var t,a=this,o="";t=e.extend(!0,{},a.query),""==e.trim(a.query.name)||(o="?"+e.param(t)),a.axios.get("/proxy/report-business/booking/v2/api/application/invokeManager/"+a.pageInfo.currPage+"/"+a.pageInfo.pageSize+o).then(function(e){if(e&&e.data&&e.data.datas){var t=e.data.datas;a.list=t,a.pageInfo=e.data.pageInfo,a.checkboxModel=[]}}).catch(function(e){console.log(e)})},checkUrl:function(){var e=this;e.axios.post("/proxy/report-business/booking/v2/api/application/invokeManager/checkURL?interfaceURL="+e.form.interfaceURL).then(function(t){e.validUrl=!(!t.data||t.data.data)}).catch(function(e){console.log(e)})}}}}).call(t,a("0iPh"))},"4Ukx":function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"policy",data:function(){return{tableData:[],currentPage:1,total:0,isCheckedAll:!1,checkboxModel:[],search:"",previewDialog:!1,userId:"",actionUrl:"/zuul/proxy/report-business/booking/v2/api/policyManagement/policy/"+sessionStorage.getItem("userId"),previewList:{},filelist:[]}},computed:{header:function(){return{Authorization:sessionStorage.getItem("token")}}},mounted:function(){this.userId=sessionStorage.getItem("userId"),this.getNodeData()},methods:{getNodeData:function(e,t,a){var o=this,s=void 0==e?1:e,i=void 0==t?10:t,r=void 0==a?"":o.search;o.axios.get("/proxy/report-business/booking/v2/api/policyManagement/policy/"+s+"/"+i+"?keyworld="+r).then(function(e){200==e.data.code&&(o.tableData=e.data.datas,o.currentPage=e.data.pageInfo.currentPage,o.total=e.data.pageInfo.total)}).catch(function(e){console.log(e)})},checkedAll:function(){var e=this;e.isCheckedAll?(e.checkboxModel=[],e.tableData.forEach(function(t){e.checkboxModel.push(t.id)})):e.checkboxModel=[]},fnPreviewNotice:function(e){e.cask;this.previewDialog=!0,this.previewList=e,this.previewList.picUrl=e.url+"?token="+sessionStorage.getItem("token")},closeDialog:function(){this.previewDialog=!1},delNotice:function(){var e=this;0!=e.checkboxModel.length?e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.post("/proxy/report-business/booking/v2/api/policyManagement/policy/deletePolicys",e.checkboxModel).then(function(t){200==t.data.code?(e.$message.success(t.data.msg),e.getNodeData(),e.isCheckedAll=!1,e.checkboxModel=[]):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除"),e.isCheckedAll=!1,e.checkboxModel=[]}):e.$message.error("没有可以删除的数据")},fnSearch:function(e,t,a){var o=this.search;this.getNodeData(t,10,o)},setTop:function(e){var t=this,a=e.id,o=e.status?0:1;t.axios.put("/proxy/report-business/booking/v2/api/policyManagement/policy/"+a+"/"+o+"/",t.checkboxModel).then(function(e){200==e.data.code?(t.$message.success(e.data.msg),t.getNodeData()):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var t=this.search;this.getNodeData(e,10,t)},submitUpload:function(){e("#policy-upload .el-upload-list").children().length<1?this.$message.error("请选择上传文件!"):this.$refs.upload.submit()},beforeUpload:function(e){var t="image/jpg"===e.type,a="image/jpeg"===e.type,o=(e.type,e.type,e.type,e.size/1024/1024<3);return t||a||this.$message.error("上传文件只能是 jpg、jpeg格式!"),o||this.$message.error("上传文件大小不能超过 3MB!"),(t||a)&&o},handleSuccess:function(e){this.getNodeData(),location.reload()},handlerError:function(e){this.$message.error(e.data.msg)}},components:{bFooter:o.a,bHeader:s.a},watch:{checkboxModel:{handler:function(e,t){this.isCheckedAll=this.checkboxModel.length===this.tableData.length},deep:!0}}}}).call(t,a("0iPh"))},"5WOQ":function(e,t){},"5oz+":function(e,t){},"63Ub":function(e,t){},"6BYZ":function(e,t){},"8Rn6":function(e,t){},"9jnP":function(e,t){},"9k1R":function(e,t){},AQq2:function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"applicationList",components:{bHeader:s.a,bFooter:o.a},data:function(){return{pageInfo:{total:0,currPage:1,pageSize:10},query:{name:""},list:[],checkboxModel:[],isCheckedAll:!1,form:{id:"",applicationName:"",callbackAddress:"",describes:"",effectiveType:1,email:"",hasuse:"1",imgs:[{fileName:"",path:"",size:"",url:""}]},rules:{applicationName:[{required:!0,message:"服务名称不能为空",trigger:"blur"}],effectiveType:[{required:!0,message:"有效期不能为空",trigger:"blur"}],callbackAddress:[{required:!0,message:"回调地址不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"}],hasuse:[{required:!0,message:"是否启用必选一个",trigger:"blur"}]},formLength:{applicationName:50,callbackAddress:50,describes:200,email:50},options:[{value:1,label:"三个月"},{value:2,label:"半年"},{value:3,label:"一年"},{value:4,label:"两年"},{value:5,label:"三年"}],userId:"",actionUrl:"",dialogFormVisible:!1,dialogFormTitle:"新建应用",formLabelWidth:"100px",detailData:{thirdPartApplication:{},images:[]},dialogDetailVisible:!1,validEmail:!1}},computed:{header:function(){return{Authorization:sessionStorage.getItem("token")}}},created:function(){this.getInfo()},mounted:function(){this.userId=sessionStorage.getItem("userId"),this.actionUrl="/proxy/report-business/booking/v2/api/application/application/upload/"+this.userId},watch:{checkboxModel:{handler:function(e,t){var a=[];this.list.forEach(function(e){2!==e.newsStatus&&a.push(e)}),this.checkboxModel.length===a.length&&this.checkboxModel.length>0?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{serviceFormExit:function(){void 0!==this.$refs.serviceForm&&this.$refs.serviceForm.resetFields(),this.dialogFormVisible=!1},createService:function(){this.dialogFormTitle="新建应用",this.dialogFormVisible=!0,this.form={id:"",applicationName:"",callbackAddress:"",describes:"",effectiveType:1,email:"",hasuse:1,imgs:[{fileName:"",path:"",size:"",url:""}]},this.validEmail=!1},editService:function(e){var t=this,a=e.id;t.axios.get("/proxy/report-business/booking/v2/api/application/application/"+a).then(function(e){if(e&&e.data&&"200"==e.data.code){var a=e.data.data.thirdPartApplication,o=e.data.data.images,s={id:a.id,applicationName:a.applicationName,callbackAddress:a.callbackAddress,describes:a.describes,effectiveType:a.effectiveType,email:a.email,hasuse:a.hasuse,imgs:o};t.dialogFormTitle="编辑应用",t.dialogFormVisible=!0,t.form=s}}).catch(function(e){console.log(e)})},viewService:function(e){var t=this,a=e.id;t.axios.get("/proxy/report-business/booking/v2/api/application/application/"+a).then(function(e){if(e&&e.data&&"200"==e.data.code){var a=e.data.data;t.detailData=a,t.dialogDetailVisible=!0}}).catch(function(e){console.log(e)})},batchDelete:function(){var e=this,t=e.checkboxModel;if(0==t.length)return e.$confirm("请至少选中一个你要删除的应用！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){}).catch(function(){}),!1;e.$confirm("此操作将永久删除选中的服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/application/application",{data:t}).then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"删除成功!"}),e.pageInfo.currPage=1,e.getInfo()}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleAvatarSuccess:function(e,t){if(e&&e.data){var a=e.data;this.form.imgs=[{fileName:a.fileName,path:a.path,size:a.size,url:a.url}]}},handlerError:function(e){500!=e.code||this.$message.error(e.msg)},handleRemove:function(e,t){this.form.imgs=t},handleExceed:function(e,t){this.$message.error("只能上传1张图片！")},saveHandle:function(){var e=this;e.$refs.serviceForm.validate(function(t){if(!t)return!1;e.saveService()})},saveService:function(){var t=this,a=e.extend(!0,{},t.form);""===a.id&&delete a.id;var o=!!a.id;a.id?t.axios.put("/proxy/report-business/booking/v2/api/application/application/"+this.userId,a).then(function(e){e&&e.data&&"200"==e.data.code&&(t.dialogFormVisible=!1,t.$message({type:"success",message:o?"编辑应用成功!":"新建应用成功!"}),t.getInfo())}).catch(function(e){console.log(e)}):t.axios.post("/proxy/report-business/booking/v2/api/application/application/"+this.userId,a).then(function(e){e&&e.data&&"200"==e.data.code&&(t.dialogFormVisible=!1,t.$message({type:"success",message:o?"编辑应用成功!":"新建应用成功!"}),t.getInfo())}).catch(function(e){console.log(e)})},checkedAll:function(){var e=this;this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){2!==t.newsStatus&&e.checkboxModel.push(t.id)}))},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageInfo.currPage=e,this.getInfo()},searchInfo:function(){this.getInfo()},getInfo:function(){var t,a=this,o="";t=e.extend(!0,{},a.query),o=""==e.trim(a.query.name)?"":"?"+e.param(t),a.axios.get("/proxy/report-business/booking/v2/api/application/application/"+a.pageInfo.currPage+"/"+a.pageInfo.pageSize+o).then(function(e){if(e&&e.data&&e.data.datas){var t=e.data.datas;a.list=t,a.pageInfo=e.data.pageInfo,a.checkboxModel=[]}}).catch(function(e){console.log(e)})},checkEmail:function(){var e=this;e.axios.post("/proxy/report-business/booking/v2/api/application/application/checkEmail?email="+e.form.email).then(function(t){e.validEmail=!(!t.data||t.data.data)}).catch(function(e){console.log(e)})}}}}).call(t,a("0iPh"))},BVMP:function(e,t){},C0Fv:function(e,t){},"Cc/l":function(e,t){},Cuuc:function(e,t){},Dnd7:function(e,t){},Eczf:function(e,t){},Emca:function(e,t){},FSij:function(e,t,a){"use strict";(function(e){var o=a("mvHQ"),s=a.n(o),i=a("XUl8"),r=a("FVP3");t.a={name:"educationManagement",data:function(){var e=this;return{orgDialog:!1,userDialog:!1,orgParentDialog:!1,editOrgDialog:!1,isEditeDialog:!1,selectOrgParentVal:{},form:{orgParent:"",orgCategory:"",orgname:"",orgAddress:"",postCode:"",orgOrder:"",provinceInfoId:"",cityInifoId:"",areasInfoId:"",schoolType:""},rules:{orgParent:[{required:!0,message:"请选择机构层级",trigger:"blur"}],orgCategory:[{required:!0,message:"请选择机构类型",trigger:"blur"}],orgname:[{required:!0,message:"请输入机构名称",trigger:"blur"},{max:50,message:"不能超过50个字符",trigger:"blur"}],provinceInfoId:[{required:!0,message:"请选择机构地址",trigger:"blur"}],orgAddress:[{max:50,message:"不能超过50个字符",trigger:"blur"}],postCode:[{validator:function(e,t,a){t&&!/^[0-9]+$/.test(t)?a(new Error("请输入正整数")):a()},trigger:"blur"}],orgOrder:[{validator:function(e,t,a){t&&!/^[1-9]\d*$/.test(t)?a(new Error("请输入非零正整数")):a()},trigger:"blur"}],schoolType:[{required:!0,message:"请选择学校类型",trigger:"blur"}]},orgCategoryList:[{id:0,name:"教育局"},{id:1,name:"学校"},{id:2,name:"教育厅"}],schoolList:[{id:1,name:"成人中等专业学校"},{id:2,name:"初级中学"},{id:3,name:"高级中学"},{id:4,name:"工读学校"},{id:5,name:"九年一贯制学校"},{id:6,name:"其他中职机构"},{id:7,name:"十二年一贯制学校"},{id:8,name:"调整后中等职业学校"},{id:9,name:"完全中学"},{id:10,name:"小学"},{id:11,name:"小学教学点"},{id:12,name:"幼儿园"},{id:13,name:"职业高中学校"},{id:14,name:"中等技术学院"},{id:15,name:"中等师范学院"}],citySelect:{provinces:[],cities:[],areas:[],selectedProvince:"",selectedCity:"",selectedArea:""},educationList:[],getCheckedNodes:{},tableData:[],userForm:{searchName:""},useRules:{searchName:[{validator:function(t,a,o){a&&-1!==e.userOrgId?o():o(new Error("请选择关联用户"))},trigger:"blur"}]},userOrgId:"",userId:"",confirmOrgItem:{},nodes:{},dataList:[],editExitSchoolType:!1,detailSort:"",isShowOrgList:!1,searchOrgList:"",orgListCheckbox:[],orgList:[],currentPage:1,total:0,checkedOrgItem:{}}},mounted:function(){var t=this;t.userId=sessionStorage.getItem("userId"),t.getProvince(),e("body").mouseup(function(a){var o=e("#orgsList");o.is(a.target)||0!==o.has(a.target).length?t.isShowOrgList=!0:t.isShowOrgList=!1})},methods:{loadNodeTree:function(e,t){var a=this,o=e.key?e.key:void 0;a.axios.get("/proxy/report-business/booking/v2/api/organizationManagement/getOrgs/"+o).then(function(o){if(o.data&&200==o.data.code){e.data;var s=o.data.data;s.forEach(function(e){e.label=e.name}),setTimeout(function(){a.orgParentDialog||3!==e.level?t(s):t([])},500)}else a.$message.error(o.data.msg)}).catch(function(e){console.log(e)})},renderContent:function(e,t){var a=this,o=t.node,s=t.data;t.store;return 2===s.status?e("span",{class:"custom-tree-node"},[e("span",[o.label]),e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"该机构为C端用户添加",placement:"right-start"}},[e("span",{class:"custom-tree-icon"})])]):2===s.status&&3===o.level?e("span",{class:"custom-tree-node"},[e("span",[o.label]),e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"该机构为C端用户添加",placement:"right-start"}},[e("span",{class:"custom-tree-icon"})]),e("span",{class:"el-icon-d-arrow-right",on:{click:function(){return a.orgListPage(o,s)}}})]):2!==s.status&&3===o.level?e("span",{class:"custom-tree-node"},[e("span",[o.label]),e("span",{class:"el-icon-d-arrow-right",on:{click:function(){return a.orgListPage(o,s)}}})]):2!==s.status&&3!==s.type?e("span",{class:"custom-tree-node"},[e("span",[o.label])]):void 0},addOrg:function(){this.orgDialog=!0,this.isEditeDialog=!1},closeAdd:function(e){this.orgDialog=!1,this.$refs.form.resetFields(),this.editExitSchoolType=!1},submitAdd:function(e){var t=this,a={};a.id=t.selectOrgParentVal.id,a.type=t.selectOrgParentVal.type,this.orgCategoryList.forEach(function(t){e.orgCategory==t.name&&(e.orgCategory=t.id)});var o={parentOrg:a,type:e.orgCategory,name:e.orgname,cityId:e.areasInfoId,address:e.orgAddress,postCode:e.postCode,sort:e.orgOrder,creator:t.userId,schoolType:1!==e.orgCategory?null:e.schoolType},s={parentOrg:a,id:t.userOrgId,type:e.orgCategory,name:e.orgname,cityId:e.areasInfoId,address:e.orgAddress,postCode:e.postCode,sort:e.orgOrder,updator:t.userId,schoolType:1!==e.orgCategory?null:e.schoolType},i=t.isEditeDialog?s:o;t.$refs.form.validate(function(e){e&&t.axios.post("/proxy/report-business/booking/v2/api/organizationManagement/saveOrUpdateOrg",i).then(function(e){e.data&&200==e.data.code?(t.$message.success(e.data.msg),t.isEditeDialog&&t.detailSort==i.sort?(t.getDetail(t.getCheckedNodes.id),t.orgDialog=!1,t.editExitSchoolType=!1):location.reload()):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})})},getProvince:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/regionService/getAll").then(function(t){t&&t.data&&t.data.data&&(e.citySelect.provinces=t.data.data,e.form.provinceInfoId||(e.form.provinceInfoId=t.data.data[0].id))}).catch(function(e){console.log(e)})},getCities:function(t){var a=this;a.axios.get("/proxy/report-business/booking/v2/api/regionService/getCityByName/"+t+"/null").then(function(t){if(t&&t.data&&t.data.data){a.citySelect.cities=t.data.data;var o=t.data.data,s=!1;a.form.cityInifoId?(e.each(o,function(e,t){if(t.id==a.form.cityInifoId)return s=!0,!1}),s||(a.form.cityInifoId=t.data.data[0].id)):a.form.cityInifoId=t.data.data[0].id}}).catch(function(e){console.log(e)})},getArea:function(t){var a=this;a.axios.get("/proxy/report-business/booking/v2/api/regionService/getArea/"+t+"/null").then(function(t){if(t&&t.data&&t.data.data){a.citySelect.areas=t.data.data;var o=t.data.data,s=!1;a.form.areasInfoId?(e.each(o,function(e,t){if(t.id==a.form.areasInfoId)return s=!0,!1}),s||(a.form.areasInfoId=t.data.data[0].id)):a.form.areasInfoId=t.data.data[0].id}}).catch(function(e){console.log(e)})},changeCheckbox:function(e,t){this.$refs.tree.setCheckedNodes([e]);var a=this.$refs.tree.getCheckedKeys();this.getCheckedNodes=e,a&&a.length>0?this.getDetail(this.getCheckedNodes.id):this.tableData=[]},removeOrg:function(){var e=this,t=e.getCheckedNodes;"{}"!=s()(t)?e.$confirm("此操作将永久删除"+t.name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/organizationManagement/deleteOrg/"+t.id).then(function(t){t.data&&200==t.data.code?(e.$message.success(t.data.msg),location.reload()):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除")}):e.$message.success("请先选择机构！")},editOrg:function(){var e=this;"{}"!=s()(e.getCheckedNodes)?(e.orgDialog=!0,e.isEditeDialog=!0,e.userOrgId=e.getCheckedNodes.id,e.axios.get("/proxy/report-business/booking/v2/api/organizationManagement/getOrgDetail/"+e.userOrgId).then(function(t){if(t.data&&200==t.data.code){var a=t.data.data,o=a.areaVO;e.orgCategoryList.forEach(function(t){t.id===Number(a.type)&&(e.form.orgCategory=t.id)}),a.schoolType&&(e.editExitSchoolType=!0,e.schoolList.forEach(function(t){t.id===a.schoolType&&(e.form.schoolType=t.id)})),e.form.orgname=a.name,e.form.orgAddress=a.address,e.form.provinceInfoId=o.province.id,e.form.cityInifoId=o.city.id,e.form.areasInfoId=o.area.id,e.form.postCode=a.postCode,e.form.orgOrder=a.sort,e.selectOrgParentVal=a.parentOrg}else e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})):e.$message.success("请先选择机构！")},querySearchAsync:function(t,a){var o=this;if(!t||!e.trim(t))return a([{value:"请输入搜索内容",id:-1}]),!1;clearTimeout(o.timeout),o.timeout=setTimeout(function(){o.axios.get("/proxy/report-business/booking/v2/api/organizationManagement/getByUserName/"+encodeURIComponent(t)).then(function(e){if(e&&e.data&&e.data.data.length>0){var t=[];e.data.data.forEach(function(e){e.value=e.userName?e.userName:"",t.push({id:e.id,value:e.userName,userType:e.userType,nickName:e.nickName}),a(t)})}else a([{value:"没找到相关数据",id:-1}])}).catch(function(e){a([{value:"没找到相关数据",id:-1}]),console.log(e)})},300)},handleSelect:function(e){this.userOrgId=e.id},closeUser:function(e){this.userDialog=!1,this.$refs.userForm.resetFields(),this.editExitSchoolType=!1},submitUser:function(e){var t=this;t.$refs.userForm.validate(function(e){e&&t.axios.put("/proxy/report-business/booking/v2/api/organizationManagement/relateUser/"+t.getCheckedNodes.id+"/"+t.userOrgId).then(function(e){e.data&&200==e.data.code?(t.userDialog=!1,t.$message.success("关联成功"),t.getDetail(t.getCheckedNodes.id)):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})})},getDetail:function(e){var t=this;t.axios.get("/proxy/report-business/booking/v2/api/organizationManagement/getOrgDetail/"+e).then(function(e){if(e&&200==e.data.code&&e.data.data){var a=e.data.data,o=a.areaVO.province?a.areaVO.province.name:"",s=a.areaVO.city?a.areaVO.city.name:"",i=a.areaVO.area?a.areaVO.area.name:"",r=a.address?a.address:"";t.confirmOrgItem=a,t.tableData=[{name:"机构名称",value:a.name},{name:"机构地址",value:o+s+i+r},{name:"机构邮编",value:a.postCode?a.postCode:"--"},{name:"同级排序",value:a.sort?a.sort:"--"},{name:"关联用户",value:a.relationUser?"已关联："+a.relationUser.userName:"未关联"},{name:"加入用户",value:a.relationUserCount?a.relationUserCount+"人":"0人"},{name:"机构添加人",value:a.creatorDetial?a.creatorDetial.userName+" (书香ID："+a.creatorDetial.id+" | "+(a.creatorDetial.registerUserTypeZh?a.creatorDetial.registerUserTypeZh:"--)"):"--"}],t.getCheckedNodes.label=a.name,t.getCheckedNodes.status=a.status,t.detailSort=a.sort}}).catch(function(e){console.log(e)})},selectOrgParent:function(){this.orgParentDialog=!0},addOrgParent:function(e,t){this.$refs.parentDialogTree.setCheckedNodes([e]),t&&(this.form.orgParent=e.name,this.selectOrgParentVal=e)},cancelUser:function(e){var t=this;t.$confirm("是否确定取消关联   "+t.userForm.searchName,"取消关联",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.put("/proxy/report-business/booking/v2/api/organizationManagement/concelRelation/"+t.confirmOrgItem.id).then(function(e){e.data&&200==e.data.code?(t.userDialog=!1,t.$message.success("取消关联成功"),t.getDetail(t.getCheckedNodes.id)):t.$message.error("取消关联失败")}).catch(function(e){console.log(e)})}).catch(function(){t.$message.info("已取消")})},confirmOrg:function(){var e=this;e.$confirm("是否确认"+e.confirmOrgItem.name+"该机构有效?","机构确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.put("/proxy/report-business/booking/v2/api/organizationManagement/confirm/"+e.confirmOrgItem.id).then(function(t){t.data&&200==t.data.code?(e.$message.success("确认成功"),e.userDialog=!1,e.getDetail(e.getCheckedNodes.id)):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消")})},sureOrgParent:function(){1!=this.selectOrgParentVal.type&&3!=this.selectOrgParentVal.type?this.orgParentDialog=!1:this.$message.error("此机构层级不能创建机构，请重新选择！")},closeOrgParent:function(){this.selectOrgParentVal={},this.form.orgParent="",this.orgParentDialog=!1,this.$refs.parentDialogTree.setCheckedNodes([])},orgListPage:function(e,t,a,o,s){var i=this,r=a||1,n=o||22,l=s||"";i.$refs.tree.setCheckedNodes([t]),i.getCheckedNodes=t,i.getDetail(t.id),i.isShowOrgList=!0,i.axios.get("/proxy/report-business/booking/v2/api/organizationManagement/getOrgsPage/"+t.id+"?page="+r+"&pageSize="+n+"&name="+l).then(function(e){e.data&&200==e.data.code?(i.orgList=e.data.datas,i.total=e.data.pageInfo.total,i.currentPage=e.data.pageInfo.currentPage,i.orgList.forEach(function(e){i.checkedOrgItem.id==e.id?i.$set(e,"checked",!0):i.$set(e,"checked",!1)})):i.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},checkOrglist:function(e){this.$refs.tree.setCheckedNodes([e.parentOrg]),e.checked?(this.checkedOrgItem=e,this.getCheckedNodes=e,this.getDetail(e.id),this.orgList.forEach(function(t){e.id!==t.id&&(t.checked=!1)})):(this.checkedOrgItem={},this.getCheckedNodes=e.parentOrg,this.getDetail(e.parentOrg.id))},searchOrg:function(){this.orgListPage("",this.getCheckedNodes,"","",this.searchOrgList)},handleCurrentChange:function(e){this.orgListPage("",this.getCheckedNodes,e,"",this.searchOrgList)}},filters:{userRoleFilter:function(e){var t="";switch(e){case 0:t="不分组";break;case 1:t="教育局";break;case 2:t="学校";break;case 3:t="老师";break;case 4:t="家长";break;case 5:t="学生"}return t}},components:{bFooter:i.a,bHeader:r.a},watch:{"form.provinceInfoId":{handler:function(e,t){e&&this.getCities(e)},deep:!0},"form.cityInifoId":{handler:function(e,t){e&&this.getArea(e)},deep:!0},"form.areasInfoId":{handler:function(e,t){},deep:!0},"form.orgCategory":function(e,t){this.editExitSchoolType||1!==e||(this.form.schoolType="")}}}}).call(t,a("0iPh"))},FVP3:function(e,t,a){"use strict";var o=a("mvHQ"),s=a.n(o),i={name:"b-header",data:function(){return{}},computed:{rolNotice:function(){return this.$store.state.rolNotice?this.$store.state.rolNotice:{}},accountNo:function(){return this.$store.state.accountNo?this.$store.state.accountNo:sessionStorage.getItem("accountNo")}},created:function(){this.getRolNotice()},methods:{loginOut:function(){var e=this;e.axios.post("/proxy/uc/signOut").then(function(t){t&&t.data&&"200"==t.data.code?(e.$store.commit("logout"),setTimeout(function(){e.$router.push({path:"/login"})},500)):t&&"500"==t.data.code&&t.data.msg&&e.$message({showClose:!0,message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})},getRolNotice:function(){var e=this;if("{}"!=s()(e.rolNotice))return!1;e.axios.get("/proxy/report-business/booking/open/rolNotice").then(function(t){e.$store.commit("getRolNotice",t.data.datas[0])}).catch(function(e){console.log(e)})}}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("header",{attrs:{id:"header"}},[o("div",{staticClass:"hd"},[o("div",{staticClass:"logo"},[o("router-link",{attrs:{to:"/"}},[o("img",{attrs:{src:a("sBHA")}})])],1),e._v(" "),o("div",{staticClass:"right_header"},[o("div",{staticClass:"notice fl"},[o("span",{staticClass:"notice_img"}),e._v(" "),o("p",{staticClass:"notice_txt"},[o("marquee",{attrs:{loop:"2",height:"100"}},[e._v(e._s(e.rolNotice.title))])],1)])]),e._v(" "),o("div",{staticClass:"fr"},[o("a",{staticClass:"msg fl",attrs:{href:"javacript:void(0);"}}),e._v(" "),o("div",{staticClass:"line fl"}),e._v(" "),o("div",{staticClass:"user_group fl"},[e._m(0),e._v(" "),o("div",{staticClass:"user_btn fl pos_rl"},[o("span",[e._v(e._s(e.accountNo))]),e._v(" "),o("samp"),e._v(" "),o("ul",{staticClass:"user_manager"},[o("li",{staticClass:"no_border",on:{click:e.loginOut}},[e._v("退出")])])])])]),e._v(" "),o("div",{staticClass:"clearfix"}),e._v(" "),o("div",{staticClass:"place"})])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"user_img fl"},[t("img",{attrs:{src:a("g3hZ"),alt:"用户头像"}})])}]};var n=a("VU/8")(i,r,!1,function(e){a("gT0A")},null,null);t.a=n.exports},GK17:function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"apiList",components:{bHeader:s.a,bFooter:o.a},data:function(){return{query:{keyword:"",searchType:"message"},pageInfo:{total:0,currPage:1,pageSize:10},list:[],isCheckedAll:!1,checkboxModel:[],formTitle:"新建服务",dialogVisible:!1,form:{message:"",code:"",description:"",id:""},visible:!1,formLength:{message:30,code:50,description:100},formLabelWidth:"100px",rules:{message:[{required:!0,message:"服务名不能为空",trigger:"blur"}],code:[{required:!0,message:"映射名不能为空",trigger:"blur"}]},serviceDetail:{},detailDialogVisible:!1}},created:function(){this.getInfo()},computed:{},watch:{checkboxModel:{handler:function(e,t){this.checkboxModel.length===this.list.length?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getInfo()},checkedAll:function(){var e=this;this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){e.checkboxModel.push(t.id)})),console.log(e.checkboxModel)},newService:function(){this.form={message:"",code:"",description:"",id:""},this.formTitle="新建服务",this.dialogVisible=!0},editService:function(e){this.form.id=e.id,this.form.message=e.message,this.form.code=e.code,this.form.description=e.description,this.formTitle="编辑服务",this.dialogVisible=!0},roleFormExit:function(){void 0!==this.$refs.roleForm&&this.$refs.roleForm.resetFields(),this.dialogVisible=!1},saveServiceHandle:function(){var e=this;e.$refs.roleForm.validate(function(t){if(!t)return!1;e.saveService()})},apiDetail:function(e){this.serviceDetail=e,this.detailDialogVisible=!0},saveService:function(){var t=this,a=e.extend(!0,{},t.form),o=!!t.form.id;""==a.id&&delete a.id,t.axios.post("/proxy/report-business/booking/v2/api/service/saveOpreraion",a).then(function(e){if(e&&e.data&&"200"==e.data.code&&(t.dialogVisible=!1,t.$message({type:"success",message:o?"编辑服务成功!":"新建服务成功!"}),t.getInfo()),e&&e.data&&"500"==e.data.code){t.dialogVisible=!1;var a="exists serviceName"==e.data.msg?"服务名已存在！":e.data.msg;t.$message.error(a),t.getInfo()}}).catch(function(e){console.log(e)})},batchDelete:function(){var e=this,t=e.checkboxModel;if(0==t.length)return e.$confirm("请至少选中一个你要删除的服务！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){}).catch(function(){}),!1;e.$confirm("此操作将永久删除选中的服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){e.axios.post("/proxy/report-business/booking/v2/api/service/deleteOperation",t).then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"删除成功!"}),setTimeout(function(){window.location.reload()},1e3)}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},searchInfo:function(){this.getInfo()},getInfo:function(){var e=this,t={infoMap:{},pagesize:10,startpage:1};t.pagesize=e.pageInfo.pageSize,t.startpage=e.pageInfo.currPage;var a=e.query.searchType;a&&e.query.keyword?t.infoMap[a]=e.query.keyword:t.infoMap={},e.axios.post("/proxy/report-business//booking/v2/api/service/queryOperationList/"+t.startpage+"/"+t.pagesize,t.infoMap).then(function(t){if(t&&t.data&&t.data.datas){var a=t.data.datas;e.list=a,e.pageInfo=t.data.pageInfo}}).catch(function(e){console.log(e)})}}}}).call(t,a("0iPh"))},H3RX:function(e,t){},HWvq:function(e,t){},HXyh:function(e,t){},HfEL:function(e,t){},IAyE:function(e,t){},IDDl:function(e,t){},K8xS:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};a.d(o,"LOGIN",function(){return Ps}),a.d(o,"LOGOUT",function(){return Ms}),a.d(o,"TITLE",function(){return Es}),a.d(o,"USERIFNO",function(){return Fs});var s={};a.d(s,"formatDate",function(){return Vs}),a.d(s,"formatDate1",function(){return Os});var i=a("fZjL"),r=a.n(i),n=a("lRwf"),l=a.n(n),c=(a("0iPh"),a("rdLu")),d=a.n(c),u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var p=a("VU/8")({name:"App"},u,!1,function(e){a("Cuuc")},null,null).exports,m=(a("q8V5"),a("/ocq")),v=a("bOdI"),f=a.n(v),h=a("XUl8"),g=a("FVP3"),b={name:"nodeList",components:{bFooter:h.a,bHeader:g.a},mounted:function(){this.getNodeData()},activated:function(){console.log("shit")},watch:{checkboxModel:{handler:function(e,t){var a=[];this.tableData.forEach(function(e,t){e.status||a.push(e)}),this.isCheckedAll=this.checkboxModel.length===a.length},deep:!0},$route:function(){console.log("shit")}},methods:f()({handleClick:function(e){console.log(e)},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},getNodeData:function(e,t,a){var o=this,s=void 0==e?1:e,i=void 0==t?10:t,r=void 0==a?"":o.search;o.axios.get("/proxy/report-business/booking/v2/api/nodeManagement/nodeTempList/"+s+"/"+i+"?keyworld="+r).then(function(e){e&&e.data&&e.data.datas&&(o.tableData=_.sortBy(_.map(e.data.datas,function(e){return"0"==e.status?e.statusname="设计中":"1"==e.status?e.statusname="发布":"-1"==e.status&&(e.statusname="废弃"),e.updateTime=e.updateTime.substr(0,e.updateTime.indexOf("T")),e}),"updateTime").reverse(),o.otableData=o.tableData,o.currentPage=e.data.pageInfo.currentPage,o.total=e.data.pageInfo.total)}).catch(function(e){console.log(e)})},checkAll:function(){var e=this;e.isCheckedAll?(e.checkboxModel=[],e.tableData.forEach(function(t,a){t.status||e.checkboxModel.push(t.nodeId)})):e.checkboxModel=[]},editNode:function(e){this.$store.nodeId=e.nodeId,this.$store.nodereadonly=!1,this.$router.push({name:"nodeEdit"})},viewNode:function(e){this.$store.nodeId=e.nodeId,this.$store.nodereadonly=!0,this.$router.push({name:"nodeEdit"})},searchs:function(){if(""==this.search)this.tableData=this.otableData;else{var e=this.search;this.tableData=_.filter(this.otableData,function(t){return t.nodeName.indexOf(e)>=0})}},delNode:function(){var e=this;if(0==e.checkboxModel.length)return e.$confirm("请至少选择一个你要删除的节点!","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){}).catch(function(){}),!1;e.axios.delete("/proxy/report-business/booking/v2/api/nodeManagement/deleteIds",{data:e.checkboxModel,headers:{"Content-type":"application/json"}}).then(function(t){if(200==t.data.code&&500!=t.data.bizCode){if(t.data.msg){var a="SUCCESS"===t.data.msg?"删除成功!":t.data.msg;e.$message.success(a)}e.getNodeData()}else e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})},fnSearch:function(e,t,a,o){this.getNodeData(t,10,this.search)}},"handleCurrentChange",function(e){this.getNodeData(e,10,this.search)}),data:function(){return{tableData:[],checkboxModel:[],isCheckedAll:!1,search:"",total:0,currentPage:1}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/activityList"}}},[e._v("活动管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/actplList"}}},[e._v("活动模板管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("节点设计")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("div",{staticClass:"left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{change:[function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s},e.checkAll]}}),e._v(" "),a("span",{staticClass:"label-span"},[e._v("全选")])]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.delNode()}}},[e._v("删除")]),e._v(" "),a("router-link",{attrs:{to:"/nodeEdit"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("添加节点")])],1)],1),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{placeholder:"请输入节点名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.fnSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fnSearch},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"table-wrap"},[a("table",{staticClass:"container-talbe"},[e._m(0),e._v(" "),a("tbody",e._l(e.tableData,function(t){return a("tr",{key:t.id},[a("td",{attrs:{width:"3%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{value:t.nodeId,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.nodeId)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.nodeId,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]),e._v(" "),a("td",{attrs:{width:"5%"}},[e._v(e._s(t.statusname))]),e._v(" "),a("td",[e._v(e._s(t.nodeName))]),e._v(" "),a("td",[e._v(e._s(t.updateTime))]),e._v(" "),a("td",[e._v(e._s(t.updator))]),e._v(" "),a("td",[a("i",{staticClass:"el-icon-edit set-icon",on:{click:function(a){e.editNode(t)}}}),e._v(" "),a("i",{staticClass:"el-icon-view set-icon",on:{click:function(a){e.viewNode(t)}}})])])}))]),e._v(" "),e.tableData.length>0?a("el-pagination",{staticClass:"new-pagination",attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{width:"10%",colspan:"2"}},[e._v("状态")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("节点名称")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("最后修改时间")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("修改人")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("操作")])])])}]};var y=a("VU/8")(b,k,!1,function(e){a("iLXG")},null,null).exports,x=a("woOf"),C=a.n(x),w={name:"nodeList",components:{bFooter:h.a,bHeader:g.a},mounted:function(){this.form.readOnly=this.$store.nodereadonly,this.$store.nodereadonly=!1,this.getqData(),this.$store.nodeId&&(this.isNew=!1,this.getNodeData(),this.$store.nodeId=!1),document.getElementsByTagName("body")[0].style.backgroundColor="#fff"},beforeRouteLeave:function(e,t,a){document.getElementsByTagName("body")[0].style.backgroundColor="#edf2f6",a()},methods:{setQues:function(e){var t=_.findWhere(this.form.operaTypes,{type:e}),a=_.findWhere(this.qlist,{value:e});a.type&&(t.url=a.url,t.questionsInstanceId=a.value,t.questionsInstanceName=a.label)},getqData:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/questionsAnswer/questionsList/1/100").then(function(t){var a=[];t&&t.data&&t.data.datas&&(a=t.data.datas),_.each(a,function(t){e.qlist.unshift({label:t.name,type:"jump",value:t.id,url:t.questionURL})})}).catch(function(e){console.log(e)})},getNodeData:function(){var e=this,t=[{name:"教育局",key:"1"},{name:"学校",key:"2"},{name:"老师",key:"3"},{name:"家长",key:"4"},{name:"学生",key:"5"}];this.axios.get("/proxy/report-business/booking/v2/api/nodeManagement/nodeTemplate/"+this.$store.nodeId).then(function(a){var o=a.data.data;_.each(o.operaTypes,function(e){e.noticeGroups=e.noticeGroup?_.compact(_.map(e.noticeGroup.split(","),function(e){return _.findWhere(t,{key:e}).name})):[],e.operaGroups=e.operaGroup?_.compact(_.map(e.operaGroup.split(","),function(e){return _.findWhere(t,{key:e}).name})):[],"jump"==e.type&&(e.type=e.questionsInstanceId)}),C()(e.form,o)}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this,t=!0;_.each(this.form.operaTypes,function(e){e.type&&e.operaName&&e.url||(t=!1)}),t?this.$refs.form.validate(function(t){t?e.submits():e.$message.error("请检查数据")}):e.$message.error("请正确维护操作！")},submits:function(){var e=this,t=[{name:"教育局",key:"1"},{name:"学校",key:"2"},{name:"老师",key:"3"},{name:"家长",key:"4"},{name:"学生",key:"5"}];this.form.status="0",_.each(this.form.operaTypes,function(e){e.noticeGroup=_.compact(_.map(e.noticeGroups,function(e){return _.findWhere(t,{name:e}).key})).join(","),e.operaGroup=_.compact(_.map(e.operaGroups,function(e){return _.findWhere(t,{name:e}).key})).join(","),e.questionsInstanceId&&(e.type="jump")}),this.isNew?this.axios.post("/proxy/report-business/booking/v2/api/nodeManagement/nodeTemplate/"+sessionStorage.getItem("userId"),this.form).then(function(t){e.$router.push({name:"nodeList"})}).catch(function(e){console.log(e)}):this.axios.put("/proxy/report-business/booking/v2/api/nodeManagement/nodeTemplate/"+sessionStorage.getItem("userId"),this.form).then(function(t){500==t.data.code&&e.$message.error(t.data.msg),e.$router.push({name:"nodeList"})}).catch(function(e){console.log(e)})},removeOp:function(e){this.form.operaTypes.length>1?this.form.operaTypes.splice(_.findIndex(this.form.operaTypes,e),1):this.$message.error("至少留一个")},addOp:function(e){this.form.operaTypes.length<=4&&this.form.operaTypes.push({noticeGroups:[],operaGroups:[],url:"",operationAction:"",operationtype:""})}},data:function(){return{isNew:!0,options:[{label:"是",value:1},{label:"否",value:0}],form:{operaTypes:[{noticeGroups:[],operaGroups:[],url:"",operationAction:"",operationtype:""}]},qlist:[{label:"POST",value:"post"},{label:"PUT",value:"put"},{label:"GET",value:"get"}],rules:{nodeName:[{required:!0,message:"请输入节点名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],nodeDesc:[{required:!0,message:"请输入节点描述",trigger:"blur"},{min:3,max:200,message:"长度在 3 到 200 个字符",trigger:"blur"}],op:{operaGroups:[{required:!0,message:"请选择操作用户组",trigger:"change"}]},day:[{required:!0,message:"请输入节点时间跨度"},{type:"number",message:"必须是数字"}],operaTypes:[{type:"array",required:!0,message:"请输入操作动作",trigger:"change"}],noticeChannel:[{required:!0,message:"请选择通知渠道",trigger:"change"}]}}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"w main_container"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点名称",prop:"nodeName"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过50个汉字!",placement:"right"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.nodeName,callback:function(t){e.$set(e.form,"nodeName",t)},expression:"form.nodeName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"节点说明",prop:"nodeDesc"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过200个汉字!",placement:"right"}},[a("el-input",{attrs:{type:"textarea",disabled:e.form.readOnly},model:{value:e.form.nodeDesc,callback:function(t){e.$set(e.form,"nodeDesc",t)},expression:"form.nodeDesc"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间跨度(天)",prop:"day"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.day,callback:function(t){e.$set(e.form,"day",e._n(t))},expression:"form.day"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作动作",prop:"operaTypes"}},[e._l(e.form.operaTypes,function(t){return a("el-form-item",{key:t.id},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"操作动作",disabled:e.form.readOnly},model:{value:t.operaName,callback:function(a){e.$set(t,"operaName",a)},expression:"op.operaName"}})],1),a("el-col",{attrs:{span:5}},[a("el-select",{attrs:{placeholder:"提交类型",disabled:e.form.readOnly},on:{change:e.setQues},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"op.type"}},e._l(e.qlist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"URL",disabled:e.form.readOnly},model:{value:t.url,callback:function(a){e.$set(t,"url",a)},expression:"op.url"}})],1),a("el-col",{attrs:{span:5}},[a("el-select",{attrs:{placeholder:"一次性操作",disabled:e.form.readOnly},model:{value:t.bttype,callback:function(a){e.$set(t,"bttype",a)},expression:"op.bttype"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{disabled:e.form.readOnly},on:{click:function(a){a.preventDefault(),e.removeOp(t)}}},[e._v("删除")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"通知用户组"}},[a("el-checkbox-group",{attrs:{disabled:e.form.readOnly},model:{value:t.noticeGroups,callback:function(a){e.$set(t,"noticeGroups",a)},expression:"op.noticeGroups"}},[a("el-checkbox",{key:"1",attrs:{label:"教育局",name:"ngroup"}}),e._v(" "),a("el-checkbox",{key:"2",attrs:{label:"学校",name:"ngroup"}}),e._v(" "),a("el-checkbox",{key:"3",attrs:{label:"老师",name:"ngroup"}}),e._v(" "),a("el-checkbox",{key:"4",attrs:{label:"家长",name:"ngroup"}}),e._v(" "),a("el-checkbox",{key:"5",attrs:{label:"学生",name:"ngroup"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"操作用户组"}},[a("el-checkbox-group",{attrs:{disabled:e.form.readOnly},model:{value:t.operaGroups,callback:function(a){e.$set(t,"operaGroups",a)},expression:"op.operaGroups"}},[a("el-checkbox",{key:"1",attrs:{label:"教育局",name:"ogroup"}}),e._v(" "),a("el-checkbox",{key:"2",attrs:{label:"学校",name:"ogroup"}}),e._v(" "),a("el-checkbox",{key:"3",attrs:{label:"老师",name:"ogroup"}}),e._v(" "),a("el-checkbox",{key:"4",attrs:{label:"家长",name:"ogroup"}}),e._v(" "),a("el-checkbox",{key:"5",attrs:{label:"学生",name:"ogroup"}})],1)],1)],1)}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过五个步骤，最少一个!",placement:"right"}},[a("el-button",{attrs:{disabled:e.form.readOnly},on:{click:function(t){t.preventDefault(),e.addOp()}}},[e._v("新增")])],1)],2),e._v(" "),a("el-form-item",{attrs:{label:"通知渠道",prop:"noticeChannel"}},[a("el-radio-group",{attrs:{disabled:e.form.readOnly},model:{value:e.form.noticeChannel,callback:function(t){e.$set(e.form,"noticeChannel",t)},expression:"form.noticeChannel"}},[a("el-radio",{attrs:{label:"0"}},[e._v("站内")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("邮件")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("微信")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("短信")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.form.readOnly},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)])},staticRenderFns:[]};var q=a("VU/8")(w,I,!1,function(e){a("p2A3")},"data-v-4a101c9f",null).exports,N={name:"actplEdit",mounted:function(){this.getNodeData(),document.getElementsByTagName("body")[0].style.backgroundColor="#fff"},beforeRouteLeave:function(e,t,a){document.getElementsByTagName("body")[0].style.backgroundColor="#edf2f6",a()},methods:{onSubmit:function(){var e=this;""!=this.form.eventNodeRelations[0].nodeInfoId?this.$refs.form.validate(function(t){t?e.submits():e.$message.error("请检查数据")}):e.$message.error("至少选择一个节点！")},submits:function(){var e=this,t="",a=_.clone(this.form);a.userId=sessionStorage.getItem("userId"),a.status="0";for(var o=1;o<=5;o++)a["checked"+o]&&(t+=o+",",delete a["checked"+o]);t.length>0&&(a.startupItem=t),this.isNew?this.axios.post("/proxy/report-business/booking/v2/api/eventManagement/eventTemp/"+sessionStorage.getItem("userId"),a).then(function(t){e.$router.push({name:"actplList"})}).catch(function(e){console.log(e)}):this.axios.put("/proxy/report-business/booking/v2/api/eventManagement/eventTemplate/"+sessionStorage.getItem("userId"),a).then(function(t){e.$router.push({name:"actplList"})}).catch(function(e){console.log(e)})},removeOp:function(e){this.form.eventNodeRelations.length>1&&(this.form.eventNodeRelations=_.without(this.form.eventNodeRelations,e))},addOp:function(e){this.form.eventNodeRelations.length<5&&this.form.eventNodeRelations.push({value:"hahaha"})},getNodeData:function(){this.$store.eventId&&(this.isNew=!1);var e=this;e.axios.get("/proxy/report-business/booking/v2/api/nodeManagement/nodeTempList/1/100").then(function(t){t&&t.data&&t.data.datas&&(e.nodes=t.data.datas)}).catch(function(e){console.log(e)}),this.$store.eventId&&this.axios.get("/proxy/report-business/booking/v2/api/eventManagement/findEventById/"+this.$store.eventId).then(function(t){if(t&&t.data&&t.data.data){var a=t.data.data;a.startupItem&&a.startupItem.length>0&&_.each(a.startupItem.split(","),function(e){a["checked"+e]=!0}),e.form=a}}).catch(function(e){console.log(e)}),this.$store.eventId=!1}},data:function(){return{nodes:[],isNew:!0,form:{eventTempId:"",explain:"",formId:"",checked1:!0,checked2:!0,checked5:!0,id:0,name:"",eventNodeRelations:[{nodeInfoId:""}],region:"",startupItem:"",status:"",userId:""},rules:{eventName:[{required:!0,message:"请输入模板名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],eventDesc:[{required:!0,message:"请输入模板描述",trigger:"blur"},{min:3,max:200,message:"长度在 3 到 200 个字符",trigger:"blur"}],eventNodeRelations:[{required:!0,message:"请选择操作"}]}}}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"w main_container"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"活动模板名称",prop:"eventName"}},[a("el-col",{attrs:{span:8}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过50个汉字!",placement:"right"}},[a("el-input",{model:{value:e.form.eventName,callback:function(t){e.$set(e.form,"eventName",t)},expression:"form.eventName"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"活动模板说明",prop:"eventDesc"}},[a("el-col",{attrs:{span:8}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过200个汉字!",placement:"right"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.eventDesc,callback:function(t){e.$set(e.form,"eventDesc",t)},expression:"form.eventDesc"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"启动数据项"}},[a("el-form-item",[a("el-checkbox",{attrs:{label:"地区选择",name:"ogroup",disabled:""},model:{value:e.form.checked1,callback:function(t){e.$set(e.form,"checked1",t)},expression:"form.checked1"}}),e._v(" "),a("label",[e._v("样例")]),e._v(" "),a("el-select",{attrs:{value:"广东省"}})],1),e._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{label:"起始时间",name:"ogroup",disabled:""},model:{value:e.form.checked2,callback:function(t){e.$set(e.form,"checked2",t)},expression:"form.checked2"}}),e._v(" "),a("el-select",{attrs:{value:"2018年4月18日"}})],1),e._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{label:"结束时间",name:"ogroup"},model:{value:e.form.checked3,callback:function(t){e.$set(e.form,"checked3",t)},expression:"form.checked3"}}),e._v(" "),a("el-select",{attrs:{value:"2018年4月28日"}})],1),e._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{label:"启动参数",name:"ogroup"},model:{value:e.form.checked4,callback:function(t){e.$set(e.form,"checked4",t)},expression:"form.checked4"}}),e._v(" "),a("label",[e._v("123456")])],1),e._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{label:"输入用户",name:"ogroup",disabled:""},model:{value:e.form.checked5,callback:function(t){e.$set(e.form,"checked5",t)},expression:"form.checked5"}}),e._v(" "),a("label",[e._v("弹出用户选择框")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"选择节点",prop:"eventNodeRelations"}},[a("el-form-item",[e._l(e.form.eventNodeRelations,function(t){return a("el-form-item",{key:t.id},[a("el-select",{attrs:{placeholder:"操作动作"},model:{value:t.nodeInfoId,callback:function(a){e.$set(t,"nodeInfoId",a)},expression:"op.nodeInfoId"}},e._l(e.nodes,function(e){return a("el-option",{key:e.id,attrs:{label:e.nodeName,value:e.nodeId}})})),e._v(" "),a("el-button",{on:{click:function(a){a.preventDefault(),e.removeOp(t)}}},[e._v("删除")])],1)}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过五个节点，最少一个!",placement:"right"}},[a("el-button",{on:{click:function(t){t.preventDefault(),e.addOp()}}},[e._v("新增节点")])],1)],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"置顶"}},[a("el-select",{attrs:{placeholder:"是否置顶"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)])},staticRenderFns:[]};var S=a("VU/8")(N,T,!1,function(e){a("uZRe")},"data-v-451dd124",null).exports,$={name:"actplList",components:{bFooter:h.a,bHeader:g.a},mounted:function(){this.getNodeData()},watch:{checkboxModel:{handler:function(e,t){var a=[];this.tableData.forEach(function(e,t){e.status||a.push(e)}),this.isCheckedAll=this.checkboxModel.length===a.length},deep:!0}},methods:{getNodeData:function(e,t,a){var o=this;e=e||1,t=t||10,a=a?o.search:"";o.axios.get("/proxy/report-business/booking/v2/api/eventManagement/eventTemp/list/"+e+"/"+t+"?keyworld="+a).then(function(e){e&&e.data&&e.data.datas&&(o.tableData=_.compact(_.map(e.data.datas,function(e){return"0"==e.status?e.statusname="设计中":"1"==e.status?e.statusname="发布":"-1"==e.status&&(e.statusname="废弃"),e.updateTime&&(e.updateTime=e.updateTime.substr(0,e.updateTime.indexOf("T"))),e}))),e&&e.data&&e.data.pageInfo&&(o.pageInfo=e.data.pageInfo,o.currentPage=o.pageInfo.currentPage,o.total=o.pageInfo.total)}).catch(function(e){console.log(e)})},fnSearch:function(e,t,a,o){this.getNodeData(this.currentPage,10,this.search)},handleCurrentChange:function(e){this.getNodeData(e,10,this.search)},checkAll:function(){var e=this;e.isCheckedAll?(e.checkboxModel=[],e.tableData.forEach(function(t,a){t.status||e.checkboxModel.push(t.eventId)})):e.checkboxModel=[]},editActpl:function(e){this.$store.eventId=e.eventId,this.$router.push({name:"actplEdit"})},delActpl:function(){var e=this;if(0==e.checkboxModel.length)return e.$confirm("请至少选择一个你要删除的模板！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){}).catch(function(){}),!1;e.axios.delete("/proxy/report-business/booking/v2/api/eventManagement/deletes",{data:e.checkboxModel,headers:{"Content-type":"application/json"}}).then(function(t){"200"==t.data.code?("SUCCESS"===t.data.data||"SUCCESS"===t.data.msg?e.$message.success("删除成功！"):"500"==t.data.bizCode&&t.data.msg?e.$message.error("删除失败，"+t.data.msg):t.data.msg&&"SUCCESS"!==t.data.msg&&e.$message.error(t.data.msg),e.getNodeData()):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}},data:function(){return{tableData:[],checkboxModel:[],isCheckedAll:!1,search:"",currentPage:1,total:0}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/activityList"}}},[e._v("活动管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("活动模板管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("div",{staticClass:"left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{change:[function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s},e.checkAll]}}),e._v(" "),a("span",{staticClass:"label-span"},[e._v("全选")])]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.delActpl()}}},[e._v("删除")]),e._v(" "),a("router-link",{attrs:{to:"/actplEdit"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("添加模板")])],1),e._v(" "),a("router-link",{attrs:{to:"/nodeList"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("节点设计管理")])],1),e._v(" "),a("el-button",{attrs:{size:"small",type:"info",disabled:""}},[e._v("上报文件模板管理")])],1),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{placeholder:"请输入模板名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.fnSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fnSearch},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"table-wrap"},[a("table",{staticClass:"container-talbe"},[e._m(0),e._v(" "),a("tbody",e._l(e.tableData,function(t){return a("tr",{key:t.id},[a("td",{attrs:{width:"3%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{value:t.eventId,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.eventId)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.eventId,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]),e._v(" "),a("td",{attrs:{width:"5%"}},[e._v(e._s(t.statusname))]),e._v(" "),a("td",[e._v(e._s(t.eventName))]),e._v(" "),a("td",[e._v(e._s(t.updateTime))]),e._v(" "),a("td",[e._v(e._s(t.updateName))]),e._v(" "),a("td",[a("i",{staticClass:"el-icon-edit set-icon",on:{click:function(a){e.editActpl(t)}}})])])}))]),e._v(" "),e.tableData&&0==e.tableData.length?a("div",{staticClass:"no-data"},[e._v("暂无数据")]):e._e(),e._v(" "),e.tableData&&e.tableData.length>0?a("el-pagination",{staticClass:"new-pagination",staticStyle:{"text-align":"right"},attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{width:"10%",colspan:"2"}},[e._v("状态")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("模板名称")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("最后修改时间")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("修改人")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("操作")])])])}]};var A=a("VU/8")($,D,!1,function(e){a("bngP")},null,null).exports,L=a("mvHQ"),P=a.n(L),M={name:"activeList",components:{bFooter:h.a,bHeader:g.a},mounted:function(){this.getNodeData(),this.$store.eventTemplateId&&(this.form.eventTemplateId=this.$store.eventTemplateId,this.createNewActive(),this.$store.eventTemplateId=!1)},watch:{checkboxModel:{handler:function(e,t){var a=[];this.eventlist.forEach(function(e,t){e.status||a.push(e)}),this.isCheckedAll=this.checkboxModel.length===a.length},deep:!0}},methods:{showNewActive:function(){this.form={},this.selectTplVisible=!0},createNewActive:function(){var e=this;this.selectTplVisible=!1,this.ugrpResultstr="",this.areaStr="",this.areadata="",this.ugrpResults=[],this.schooltypes=[],this.axios.get("/proxy/report-business/booking/v2/api/eventManagement/findEventById/"+this.form.eventTemplateId).then(function(t){if(t&&t.data&&t.data.data){var a=e.form.eventTemplateId;e.form={},e.form.eventTemplateId=a,e.tpldata=t.data.data,e.startupItems=e.tpldata.startupItem,e.newActiveVisible=!0}}).catch(function(e){console.log(e)})},changeArea:function(){var e=this;this.selectAreaVisible=!0,0==this.areadata.length&&this.axios.get("/proxy/report-business/booking/v2/api/regionService/getcities/5a9f3a8167105319c4aa51f9").then(function(t){t&&t.data&&t.data.data&&(e.areadata=t.data.data)}).catch(function(e){console.log(e)})},addAreas:function(){var e=this.$refs.tree.getCheckedNodes(),t=this;_.each(e,function a(o){if(o.childlist&&_.findWhere(t.areadata,{id:o.id}).childlist.length==o.childlist.length?_.each(o.childlist,function(e){e.del=!0,_.findWhere(t.areaResults,{id:e.it})&&(t.areaResults=_.without(t.areaResults,_.findWhere(t.areaResults,{id:e.it})))}):o.childlist&&_.findWhere(e,{id:o.id})&&(_.findWhere(e,{id:o.id}).del=!0),o.childlist)for(var s=0;s<o.childlist.length;s++)o.childlist[s]&&a(o.childlist[s])}),this.areaResults=this.areaResults.concat(_.compact(_.map(e,function(e){if(!e.del&&!_.findWhere(t.areaResults,e))return e}))),t.form.areaStr=t.areaStr=_.pluck(t.areaResults,"name").join(",")},addAllAreas:function(){this.areaResults=this.$refs.tree.data,this.form.areaStr=this.areaStr=_.pluck(this.areaResults,"name").join(",")},removeAllAres:function(){this.areaResults=[],this.form.areaStr=this.areaStr=""},setAselect:function(e){_.findWhere(this.areaResults,e).selected?_.findWhere(this.areaResults,e).selected=!1:_.findWhere(this.areaResults,e).selected=!0,this.$forceUpdate()},removeAres:function(){this.areaResults=_.reject(this.areaResults,function(e){return e.selected}),this.form.areaStr=this.areaStr=_.pluck(this.areaResults,"name").join(",")},selectArea:function(){this.selectAreaVisible=!0},addUgrp:function(){this.userCheckList=this.$refs.userTree.getCheckedNodes(),this.ugrpResults=this.userCheckList,this.form.ugrpResultstr=this.ugrpResultstr=_.map(this.ugrpResults,function(e){return e.userGroupName}).join(",")},addAllUgrp:function(){this.ugrpResults=this.ugrpDatas,this.form.ugrpResultstr=this.ugrpResultstr=_.map(this.ugrpResults,function(e){return e.userGroupName}).join(",")},setUselect:function(e){_.findWhere(this.ugrpDatas,e).selected?_.findWhere(this.ugrpDatas,e).selected=!1:_.findWhere(this.ugrpDatas,e).selected=!0,this.$forceUpdate()},setURselect:function(e){_.findWhere(this.ugrpResults,e).selected?_.findWhere(this.ugrpResults,e).selected=!1:_.findWhere(this.ugrpResults,e).selected=!0,this.$forceUpdate()},removeUgrp:function(){this.ugrpResults=_.reject(this.ugrpResults,function(e){return e.selected}),this.form.ugrpResultstr=this.ugrpResultstr=_.map(this.ugrpResults,function(e){return e.userGroupName}).join(",")},removeAllUgrp:function(){this.ugrpResults=[],this.form.ugrpResultstr=""},getNodeData:function(e,t,a){var o=this;e=e||1,t=t||10,a=a?o.search:"";o.axios.get("/proxy/report-business/booking/v2/api/eventRunManagement/eventInstanceList/"+e+"/"+t+"?eventName="+a).then(function(e){var t;e&&e.data&&e.data.datas&&(t=e.data.datas,_.each(t,function(e){0==e.status||4==e.status||2==e.status?e.editClass="el-icon-edit":e.editClass="el-icon-view",0==e.status||4==e.status||2==e.status?e.opClass="el-icon-d-arrow-right":1==e.status?e.opClass="el-icon-circle-close-outline":e.opClass="el-icon-minus",e.endTimeStr=e.endTime}),o.eventlist=t,o.currentPage=e.data.pageInfo.currentPage,o.total=e.data.pageInfo.total)}).catch(function(e){console.log(e)}),o.axios.get("/proxy/report-business/booking/v2/api/eventManagement/eventTemp/list/1/100").then(function(e){e&&e.data&&e.data.datas&&(o.templist=e.data.datas)}).catch(function(e){console.log(e)}),o.axios.get("/proxy/report-business/booking/v2/api/userManagement/userGroup/list").then(function(e){e&&e.data&&e.data.datas&&(o.ugrpDatas=e.data.datas)}).catch(function(e){console.log(e)})},fnSearch:function(e,t,a,o){this.getNodeData(this.currentPage,10,this.search)},handleCurrentChange:function(e){this.getNodeData(e,10,this.search)},saveActive:function(){var e=this;if(0!=this.areaResults.length)if(0!=this.ugrpResults.length)if(0!=this.schooltypes.length){var t=_.pluck(this.ugrpResults,"userType").join(",").split(","),a=[],o=!0,s=[],i=[{name:"教育局",key:"1"},{name:"学校",key:"2"},{name:"老师",key:"3"},{name:"家长",key:"4"},{name:"学生",key:"5"}];_.each(this.tpldata.eventNodeRelations,function(e){e.noticeGroup&&(a=a.concat(e.noticeGroup.split(","))),e.operaGroup&&(a=a.concat(e.operaGroup.split(",")))}),(a=_.uniq(a)).forEach(function(e){t.includes(e)||(o=!1,s.push(_.findWhere(i,{key:e}).name))}),o?this.$refs.form.validate(function(t){t?e.submits():e.$message.error("请检查数据")}):this.$message.error("用户组缺少："+s.join(",")+"，请重新选择！")}else e.$message.error("请选择学校类别！");else e.$message.error("请选择用户组！");else e.$message.error("请选择地区！")},submits:function(){var e=this;this.newActiveVisible=!1,this.form.region=_.pluck(this.areaResults,"id").join(","),this.form.regioninfos=P()(_.map(this.areaResults,function(e){return _.pick(e,"name","id")})),this.form.userGroups=_.pluck(this.ugrpResults,"id").join(","),this.form.usergroupinfos=P()(_.map(this.ugrpResults,function(e){return _.pick(e,"userGroupName","id")})),this.form.eventNodeRelations=_.map(this.tpldata.eventNodeRelations,function(e){return delete e.id,e}),this.form.schoolType=_.compact(_.map(this.schooltypes,function(t){return _.findWhere(e.schoolTyperef,{label:t}).key})).join(","),this.form.schooltypes=this.schooltypes.join(","),this.form.instanceId?this.axios.put("/proxy/report-business/booking/v2/api/eventRunManagement/eventInstance/"+sessionStorage.getItem("userId")+"/"+this.form.instanceId,this.form).then(function(e){}).catch(function(e){console.log(e)}):this.axios.post("/proxy/report-business/booking/v2/api/eventRunManagement/eventInstance/"+sessionStorage.getItem("userId"),this.form).then(function(t){e.getNodeData()}).catch(function(e){console.log(e)})},dateChanged:function(){var e,t=new Date(this.form.startTime);_.each(this.tpldata.eventNodeRelations,function(a){e=new Date(t.getTime()+24*a.day*60*6e4),a.startTime=t,a.endTime=e,a.startTimeStr=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"  至  "+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=e}),this.form.endTime=e,this.form.endTimeStr=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),this.$forceUpdate()},checkAll:function(){var e=this;e.isCheckedAll?(e.checkboxModel=[],e.eventlist.forEach(function(t,a){t.status||e.checkboxModel.push(t.instanceId)})):e.checkboxModel=[]},editActive:function(e){var t,a=this;a.axios.get("/proxy/report-business/booking/v2/api/eventRunManagement/eventInstance/"+e.instanceId).then(function(e){e&&e.data&&e.data.data&&((t=e.data.data).readOnly=!0,a.form=t,a.tpldata=t,a.startupItems=a.tpldata.startupItem,a.areaResults=JSON.parse(t.regioninfos),t.schooltypes&&(a.schooltypes=t.schooltypes.split(",")),a.areaStr=_.pluck(a.areaResults,"name").join(","),t.usergroupinfos&&(a.ugrpResults=JSON.parse(t.usergroupinfos),a.ugrpResultstr=_.map(a.ugrpResults,function(e){return e.userGroupName}).join(",")),a.dateChanged(),a.newActiveVisible=!0)}).catch(function(e){console.log(e)})},opActive:function(e){var t=this;this.axios.get("/proxy/report-business/booking/v2/api/eventRunManagement/refreshEventDetailById/"+e.instanceId).then(function(e){t.$message.success("前端查看刷新结果")}).catch(function(e){console.log(e)})},delAct:function(){var e=this;e.axios.delete("/proxy/report-business/booking/v2/api/eventRunManagement/eventInstance/deletes",{data:e.checkboxModel,headers:{"Content-type":"application/json"}}).then(function(t){"200"==t.data.code?(e.getNodeData(),e.$message.success(t.data.msg)):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}},data:function(){return{tableData:[],startupItems:"1",tpldata:{},areaStr:"",currentPage:1,total:0,form:{},eventlist:[],templist:[],selectTplVisible:!1,newActiveVisible:!1,selectAreaVisible:!1,selectUserVisible:!1,areaResults:[],areadata:[],ugrpDatas:[],ugrpResults:[],schoolTyperef:[{label:"中专",key:"1"},{label:"初中",key:"2"},{label:"高中",key:"3"},{label:"工读",key:"4"},{label:"九年一贯",key:"5"},{label:"其他中职",key:"6"},{label:"十二年一贯",key:"7"},{label:"调整中职",key:"8"},{label:"完全中学",key:"9"},{label:"小学",key:"10"},{label:"小教点",key:"11"},{label:"幼儿园",key:"12"},{label:"职高",key:"13"},{label:"中技",key:"14"},{label:"中师",key:"15"}],ugrpResultstr:"..",defaultProps:{children:"childlist",label:"name"},userDefaultProps:{children:"children",label:"userGroupName"},checkboxModel:[],isCheckedAll:!1,search:"",schooltypes:[],rules:{eventName:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],eventDesc:[{required:!0,message:"请输入活动描述",trigger:"blur"},{min:3,max:200,message:"长度在 3 到 200 个字符",trigger:"blur"}],areaStr:[{required:!0,message:"请选择地区"}],ugrpResultstr:[{required:!0,message:"请选择用户组"}],startTime:[{required:!0,message:"请选择启动时间"}]},userCheckList:[]}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/activityList"}}},[e._v("活动管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("活动运行管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("div",{staticClass:"left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{change:[function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s},e.checkAll]}}),e._v(" "),a("span",{staticClass:"label-span"},[e._v("全选")])]),e._v(" "),a("span",{staticStyle:{display:"none"},on:{click:function(t){e.delAct()}}},[e._v("_")]),e._v(" "),a("el-button",{attrs:{size:"small"}},[e._v("停止")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.showNewActive}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{placeholder:"请输入活动名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.fnSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fnSearch},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"table-wrap"},[a("table",{staticClass:"container-talbe"},[e._m(0),e._v(" "),e.eventlist&&e.eventlist.length>0?a("tbody",e._l(e.eventlist,function(t){return a("tr",{key:t.id},[a("td",{attrs:{width:"3%"}},[t.status?[a("input",{staticClass:"container-checkbox",attrs:{type:"checkbox",disabled:""},domProps:{value:t.instanceId}})]:[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{value:t.instanceId,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.instanceId)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.instanceId,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]],2),e._v(" "),a("td",{attrs:{width:"5%"}},[e._v(e._s(t.statusname))]),e._v(" "),a("td",[e._v(e._s(t.eventName))]),e._v(" "),a("td",[e._v(e._s(t.nodeName))]),e._v(" "),a("td",[e._v(e._s(t.startTime))]),e._v(" "),a("td",[e._v(e._s(t.endTime))]),e._v(" "),a("td",[e._v(e._s(t.updateName))]),e._v(" "),a("td",[a("i",{class:[t.editClass],on:{click:function(a){e.editActive(t)}}}),e._v(" "),a("i",{class:[t.opClass],on:{click:function(a){e.opActive(t)}}})])])})):e._e()]),e._v(" "),e.eventlist&&0==e.eventlist.length?a("div",{staticClass:"no-data"},[e._v("暂无数据")]):e._e(),e._v(" "),e.eventlist&&e.eventlist.length>0?a("el-pagination",{staticClass:"new-pagination",staticStyle:{"text-align":"right"},attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{attrs:{title:"新建活动",visible:e.selectTplVisible},on:{"update:visible":function(t){e.selectTplVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"模板选择"}},[a("el-select",{attrs:{placeholder:"请选择模板"},model:{value:e.form.eventTemplateId,callback:function(t){e.$set(e.form,"eventTemplateId",t)},expression:"form.eventTemplateId"}},e._l(e.templist,function(e){return a("el-option",{key:e.eventId,attrs:{label:e.eventName,value:e.eventId}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.selectTplVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.createNewActive()}}},[e._v("新 建")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新建活动",visible:e.newActiveVisible},on:{"update:visible":function(t){e.newActiveVisible=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"活动名称",prop:"eventName"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过50个汉字!",placement:"right"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.eventName,callback:function(t){e.$set(e.form,"eventName",t)},expression:"form.eventName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"活动说明",prop:"eventDesc"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过200个汉字!",placement:"right"}},[a("el-input",{attrs:{type:"textarea",disabled:e.form.readOnly,autosize:{minRows:2,maxRows:3}},model:{value:e.form.eventDesc,callback:function(t){e.$set(e.form,"eventDesc",t)},expression:"form.eventDesc"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"启动数据项"}}),e._v(" "),e.startupItems.indexOf("1")>=0?a("el-form-item",{attrs:{label:"所选地区",prop:"areaStr"}},[a("label",[e._v(e._s(e.areaStr))]),e._v(" "),a("el-button",{staticClass:"fbtn",attrs:{size:"small",disabled:e.form.readOnly},on:{click:function(t){e.changeArea()}}},[e._v("更改")])],1):e._e(),e._v(" "),e.startupItems.indexOf("2")>=0?a("el-form-item",{attrs:{prop:"startTime",label:"起始时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",disabled:e.form.readOnly},on:{change:function(t){e.dateChanged()}},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1):e._e(),e._v(" "),e.startupItems.indexOf("4")>=0?a("el-form-item",[a("label",[e._v("启动参数")]),e._v(" "),a("el-input",{attrs:{label:"启动参数",disabled:e.form.readOnly},model:{value:e.form.checked4,callback:function(t){e.$set(e.form,"checked4",t)},expression:"form.checked4"}})],1):e._e(),e._v(" "),e.startupItems.indexOf("5")>=0?a("el-form-item",{attrs:{prop:"ugrpResultstr",label:"选择用户"}},[a("label",[e._v("已选择 ："+e._s(e.ugrpResultstr))]),e._v(" "),a("el-button",{staticClass:"fbtn",attrs:{size:"small",disabled:e.form.readOnly},on:{click:function(t){e.selectUserVisible=!0}}},[e._v("更改")])],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"节点"}},[e._l(e.tpldata.eventNodeRelations,function(t){return a("el-form-item",{key:t.id},[a("label",{staticClass:"w15"},[e._v(e._s(t.eventName))]),e._v(" "),a("el-input",{staticClass:"w40",on:{change:function(t){e.dateChanged()}},model:{value:t.day,callback:function(a){e.$set(t,"day",a)},expression:"op.day"}}),e._v(" "),a("label",[e._v(e._s(t.startTimeStr))])],1)}),e._v(" "),e.startupItems.indexOf("3")>=0?a("el-form-item",[a("label",[e._v("结束时间")]),e._v(" "),a("label",[e._v(e._s(e.form.endTimeStr))])]):e._e()],2),e._v(" "),a("el-form-item",{attrs:{label:"学校类别"}},[a("el-checkbox-group",{staticClass:"active-school-type",attrs:{disabled:e.form.readOnly},model:{value:e.schooltypes,callback:function(t){e.schooltypes=t},expression:"schooltypes"}},[a("el-checkbox",{key:"12",staticStyle:{"margin-left":"5px"},attrs:{label:"幼儿园",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"11",attrs:{label:"小教点",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"10",attrs:{label:"小学",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"2",attrs:{label:"初中",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"5",attrs:{label:"九年一贯",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"15",attrs:{label:"中师",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"14",attrs:{label:"中技",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"3",attrs:{label:"高中",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"1",attrs:{label:"中专",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"13",attrs:{label:"职高",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"8",attrs:{label:"调整中职",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"6",attrs:{label:"其他中职",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"9",attrs:{label:"完全中学",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"7",attrs:{label:"十二年一贯",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"4",attrs:{label:"工读",name:"xgroup"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",disabled:e.form.readOnly},on:{click:function(t){e.saveActive()}}},[e._v("发 布")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"地区选择",visible:e.selectAreaVisible},on:{"update:visible":function(t){e.selectAreaVisible=t}}},[a("div",[a("el-row",[a("el-col",{attrs:{span:10}},[a("div",{staticClass:"left-content"},[a("el-tree",{ref:"tree",attrs:{data:e.areadata,props:e.defaultProps,"show-checkbox":""}})],1)]),e._v(" "),a("el-col",{staticClass:"middle-content",attrs:{span:6}},[a("div",{staticClass:"btn_group",staticStyle:{"padding-top":"15px"}},[a("ul",[a("li",[a("span",{on:{click:function(t){e.addAllAreas()}}},[e._v("全部右移 "),a("i",{staticClass:"el-icon-d-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.addAreas()}}},[e._v("右移 "),a("i",{staticClass:"el-icon-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.removeAres()}}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v(" 撤销")])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.removeAllAres()}}},[a("i",{staticClass:"el-icon-d-arrow-left"}),e._v(" 全部撤销")])])])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"right-content"},[a("ul",{staticClass:"el-scrollbar__view el-select-dropdown__list",staticStyle:{position:"relative"}},e._l(e.areaResults,function(t){return a("li",{key:t.id,staticClass:"el-select-dropdown__item",class:{selected:t.selected},on:{click:function(a){a.preventDefault(),e.setAselect(t)}}},[a("span",[e._v(e._s(t.name))])])}))])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.selectAreaVisible=!1}}},[e._v("确 认")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"用户组选择",visible:e.selectUserVisible},on:{"update:visible":function(t){e.selectUserVisible=t}}},[a("div",[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"user-left-content"},[a("el-tree",{ref:"userTree",attrs:{data:e.ugrpDatas,props:e.userDefaultProps,"show-checkbox":""}})],1)]),e._v(" "),a("el-col",{staticClass:"middle-content",attrs:{span:6}},[a("div",{staticClass:"btn_group",staticStyle:{"padding-top":"15px"}},[a("ul",[a("li",[a("span",{on:{click:function(t){e.addAllUgrp()}}},[e._v("全部右移 "),a("i",{staticClass:"el-icon-d-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.addUgrp()}}},[e._v("右移 "),a("i",{staticClass:"el-icon-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.removeUgrp()}}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v(" 撤销")])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.removeAllUgrp()}}},[a("i",{staticClass:"el-icon-d-arrow-left"}),e._v(" 全部撤销")])])])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"user-right-content"},[a("ul",e._l(e.ugrpResults,function(t){return a("li",{key:t.id,staticClass:"tree-check-view",class:{selected:t.selected},on:{click:function(a){a.preventDefault(),e.setURselect(t)}}},[a("span",[e._v(e._s(t.userGroupName))])])}))])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.selectUserVisible=!1}}},[e._v("确 认")])],1)])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{width:"10%",colspan:"2"}},[e._v("状态")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("活动名称")]),e._v(" "),a("th",{attrs:{width:"10%"}},[e._v("运行节点")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("开始时间")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("结束时间")]),e._v(" "),a("th",{attrs:{width:"10%"}},[e._v("修改人")]),e._v(" "),a("th",{attrs:{width:"10%"}},[e._v("操作")])])])}]};var F=a("VU/8")(M,E,!1,function(e){a("iVC9")},null,null).exports,U={name:"noticeList",data:function(){return{tableData:[],currentPage:1,total:0,isCheckedAll:!1,checkboxModel:[],search:"",noticeDialog:!1,previewDialog:!1,previewList:{},form:{sourceFlag:"",titleMessage:""},rules:{titleMessage:[{required:!0,message:"请输入内容",trigger:"blur"},{max:200,message:"不能超过200个字符",trigger:"blur"}],sourceFlag:[{required:!0,message:"请选择展示渠道",trigger:"blur"}]},sourceList:[{id:1,name:"移动端 "},{id:2,name:"PC端 "}],previewTitle:"",isAddPreview:!1,userId:"",pageInfo:{}}},mounted:function(){this.getNodeData(),this.userId=sessionStorage.getItem("userId")},methods:{getNodeData:function(e,t,a){var o=this,s=void 0==e?1:e,i=void 0==t?10:t,r=void 0==a?"":o.search;r=window.filterSearchName(r),o.axios.get("/proxy/report-business/booking/v2/api/rolNoticeManagement/notices/"+s+"/"+i+"?title="+r).then(function(e){200==e.data.code?(o.tableData=e.data.datas,o.currentPage=e.data.pageInfo.currPage,o.total=e.data.pageInfo.total,o.pageInfo=e.data.pageInfo):o.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},checkedAll:function(){var e=this;e.isCheckedAll?(e.checkboxModel=[],e.tableData.forEach(function(t,a){t.status||e.checkboxModel.push(t.id)})):e.checkboxModel=[]},addNotice:function(){this.noticeDialog=!0,this.form.titleMessage=""},fnPreviewNotice:function(e){e.cask;this.previewDialog=!0,this.previewList=e},fnAddNotice:function(){var e=this,t={creator:e.userId,sourceFlag:e.form.sourceFlag,title:e.form.titleMessage};e.$refs.form.validate(function(a){a&&e.axios.post("/proxy/report-business/booking/v2/api/rolNoticeManagement/notices",t).then(function(t){200==t.data.code?(e.$message.success(t.data.msg),e.noticeDialog=!1,e.getNodeData()):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})})},resetForm:function(){this.$refs.form.resetFields(),this.noticeDialog=!1},delNotice:function(){var e=this;0!=e.checkboxModel.length?e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/rolNoticeManagement/notices/",{data:e.checkboxModel,headers:{"Content-type":"application/json"}}).then(function(t){200==t.data.code?(e.$message.success(t.data.msg),e.getNodeData(),e.isCheckedAll=!1,e.checkboxModel=[]):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除"),e.isCheckedAll=!1,e.checkboxModel=[]}):e.$message.error("没有可以删除的数据")},fnSearch:function(e,t,a,o){this.getNodeData(t,10,this.search)},setTop:function(e){var t=this,a=e.id,o=e.sourceFlag;t.axios.put("/proxy/report-business/booking/v2/api/rolNoticeManagement/notices/"+a+"/"+o+"/top").then(function(e){200==e.data.code?(t.$message.success(e.data.msg),t.getNodeData(t.pageInfo.currPage)):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},unTop:function(e){var t=this,a=e.id;t.axios.put("/proxy/report-business/booking/v2/api/rolNoticeManagement/notices/"+a+"/undoTop").then(function(e){200==e.data.code?(t.$message.success(e.data.msg),t.getNodeData(t.pageInfo.currPage)):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.getNodeData(e,10,this.search)}},components:{bFooter:h.a,bHeader:g.a},watch:{checkboxModel:{handler:function(e,t){var a=[];this.tableData.forEach(function(e,t){e.status||a.push(e)}),this.isCheckedAll=this.checkboxModel.length===a.length},deep:!0}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/info"}}},[e._v("信息管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("滚动公告管理")])],1)],1),e._v(" "),a("div",{staticClass:"sx_tab ",staticStyle:{"margin-bottom":"10px"}},[a("router-link",{attrs:{to:"/noticeList"}},[a("div",{staticClass:"sx_tab_item active"},[e._v("\n                  申报系统\n              ")])]),e._v(" "),a("router-link",{attrs:{to:"/evaluationNotice"}},[a("div",{staticClass:"sx_tab_item"},[e._v("\n                  测评快报\n              ")])]),e._v(" "),a("router-link",{attrs:{to:"/evaluationCategory"}},[a("div",{staticClass:"sx_tab_item"},[e._v("\n                  测评快报分类\n              ")])])],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("div",{staticClass:"left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{change:[function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s},e.checkedAll]}}),e._v(" "),a("span",{staticClass:"label-span"},[e._v("全选")])]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.delNotice}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.addNotice}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{placeholder:"请输入标题"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.fnSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fnSearch},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("input",{staticClass:"container-checkbox",attrs:{type:"checkbox",disabled:""},domProps:{value:t.row.id}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.status?"置顶":"完成"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"eventShowTitle",label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",placement:"top",width:"100","popper-class":"tooltip-notice","hide-after":"50000"}},[a("div",{staticClass:"tooltip-content",staticStyle:{"word-wrap":"break-word"},attrs:{slot:"content"},domProps:{textContent:e._s(t.row.title)},slot:"content"}),e._v(" "),a("div",{domProps:{textContent:e._s(t.row.title)}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"完成时间",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceFlag",label:"平台",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(1==t.row.sourceFlag?"移动端":"PC端"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"updator",label:"编辑人",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.updator?t.row.updator:"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"预览",placement:"top"}},[a("i",{staticClass:"operator-icon el-icon-view",on:{click:function(a){e.fnPreviewNotice(t.row)}}})]),e._v(" "),1==t.row.status?a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"撤回",placement:"top"}},[a("i",{staticClass:"operator-icon cancel-top-icon",on:{click:function(a){e.unTop(t.row)}}})]):e._e(),e._v(" "),0==t.row.status?a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"置顶",placement:"top"}},[a("i",{staticClass:"operator-icon set-top-icon",on:{click:function(a){e.setTop(t.row)}}})]):e._e()]}}])})],1),e._v(" "),e.tableData&&e.tableData.length>0?a("el-pagination",{staticClass:"new-pagination",staticStyle:{"text-align":"right"},attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{attrs:{title:"新建编辑公告",visible:e.noticeDialog,center:""},on:{"update:visible":function(t){e.noticeDialog=t}}},[a("div",{staticClass:"addnotice-content clearfix"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"展示渠道",prop:"sourceFlag"}},[a("el-select",{attrs:{placeholder:"请选择展示渠道"},model:{value:e.form.sourceFlag,callback:function(t){e.$set(e.form,"sourceFlag",t)},expression:"form.sourceFlag"}},e._l(e.sourceList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"titleMessage"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.form.titleMessage,callback:function(t){e.$set(e.form,"titleMessage","string"==typeof t?t.trim():t)},expression:"form.titleMessage"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",plain:""},on:{click:function(t){e.resetForm(e.form)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.fnAddNotice}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"preview-dialog",attrs:{title:"预览公告",visible:e.previewDialog},on:{"update:visible":function(t){e.previewDialog=t}}},[a("ul",{staticClass:"preview-list"},[a("li",{staticClass:"preview-item ql-editor",domProps:{innerHTML:e._s(e.previewList.title)}}),e._v(" "),a("li",{staticClass:"preview-item"},[e._v("发布时间："+e._s(e._f("formatDate")(e.previewList.createTime)))]),e._v(" "),a("li",{staticClass:"preview-item"},[e._v("展示渠道："),1==e.previewList.sourceFlag?a("span",[e._v("移动端")]):e._e(),2==e.previewList.sourceFlag?a("span",[e._v("PC端")]):e._e()])])])],1)},staticRenderFns:[]};var V=a("VU/8")(U,R,!1,function(e){a("gwgT")},null,null).exports,O=a("G0J2"),z=[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!0,"large","huge"]}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],["link"]],B={name:"evaluationNotice",data:function(){return{userId:"",tableData:[],pageInfo:{currPage:1,total:0},isCheckedAll:!1,checkboxModel:[],search:"",noticeDialog:!1,dialogTitle:"add",isGoodsPhoto:!1,imageUrl:"",maskFlag:!1,isLock:!1,actionUrl:"/proxy/report-business/booking/v2/api/goodsManager/uploadGoodsImg/",fileInfo:{},readonly:!1,form:{title:"",bulletinCategoryId:"",source:"",reportTime:"",content:""},rules:{title:[{required:!0,message:"请输入快报名称",trigger:"blur"}],bulletinCategoryId:[{required:!0,message:"请选择快报分类",trigger:"blur"}],source:[{required:!0,message:"请输入快报来源",trigger:"blur"}],reportTime:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],content:[{required:!0,message:"请输入快报内容",trigger:"blur"},{max:5e3,message:"不能超过5000个字符",trigger:"blur"}]},categoryList:[],editorOption:{modules:{toolbar:{container:z}}}}},computed:{header:function(){return{Authorization:sessionStorage.getItem("token")}},editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){this.getNodeData(),this.getCategory(),this.userId=sessionStorage.getItem("userId")},methods:{getNodeData:function(e,t,a){var o=this,s=e||1,i=t||10,r=a||o.search;r=window.filterSearchName(r),o.axios.get("/proxy/report-business/booking/v2/api/rolNoticeManagement/bulletin/getList/"+s+"/"+i+"?title="+encodeURIComponent(escape(r))).then(function(e){200==e.data.code?(o.tableData=e.data.datas,o.pageInfo=e.data.pageInfo):o.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},getCategory:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/rolNoticeManagement/bulletinCategory/getAllBulletinCategory").then(function(t){200==t.data.code?e.categoryList=t.data.data:e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})},checkedAll:function(){var e=this;e.isCheckedAll?(e.checkboxModel=[],e.tableData.forEach(function(t,a){2!==t.status&&e.checkboxModel.push(t.id)})):e.checkboxModel=[]},addNotice:function(){this.noticeDialog=!0,this.dialogTitle="add",this.form.title="",this.form.bulletinCategoryId="",this.form.source="",this.form.reportTime="",this.form.content="",this.imageUrl="",this.fileInfo={},this.isGoodsPhoto=!1},edit:function(e,t){var a=this;a.noticeDialog=!0,a.dialogTitle="edit"==t?"edit":"check",a.readonly="edit"!=t,a.axios.get("/proxy/report-business/booking/v2/api/rolNoticeManagement/bulletin/getBulletinById/"+e.id).then(function(e){if(200==e.data.code){var t=e.data.data;a.form.title=t.title,a.form.bulletinCategoryId=t.bulletinCategoryId,a.form.source=t.source,a.form.reportTime=new Date(t.reportTime),a.form.content=t.content,a.form.id=t.id,a.imageUrl=t.picUrl,a.fileInfo=t.fileInfo}else a.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},submitForm:function(e){var t=this,a=t.form;a.fileInfo=t.fileInfo,t.isGoodsPhoto=!1,"{}"!=P()(t.fileInfo)?/<img(?:.|\s)*?>/g.test(t.form.content)?t.$message.error("正文内容含有图片，请从上传图片处上传图片！"):("add"==t.dialogTitle&&delete a.id,t.isLock||t.$refs.form.validate(function(e){e&&(t.isLock=!0,t.axios.post("/proxy/report-business/booking/v2/api/rolNoticeManagement/bulletin/saveOrUpdate/"+t.userId,a).then(function(e){t.isLock=!1,200==e.data.code?("add"==t.dialogTitle?t.$message.success(e.data.msg):t.$message.success("编辑测评快报成功！"),t.noticeDialog=!1,t.getNodeData()):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)}))})):t.isGoodsPhoto=!0},cancelForm:function(e){if("add"==this.dialogTitle)return this.noticeDialog=!1,void this.$refs.form.resetFields();this.noticeDialog=!1},delNotice:function(){var e=this;0!=e.checkboxModel.length?e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/rolNoticeManagement/bulletin/delete/",{data:e.checkboxModel,headers:{"Content-type":"application/json"}}).then(function(t){200==t.data.code?(e.$message.success(t.data.msg),e.getNodeData(e.pageInfo.currPage),e.isCheckedAll=!1,e.checkboxModel=[]):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除"),e.isCheckedAll=!1,e.checkboxModel=[]}):e.$message.error("请先选择要删除的快报！")},fnSearch:function(e,t,a,o){this.getNodeData(t,10,this.search)},changeStatus:function(e,t){var a=this;a.axios.get("/proxy/report-business/booking/v2/api/rolNoticeManagement/bulletin/status/"+e.id+"/"+t).then(function(e){200==e.data.code?(a.$message.success(2==t?"发布成功！":"撤回成功！"),a.getNodeData(a.pageInfo.currPage)):a.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.getNodeData(e,10,this.search)},handleSuccess:function(e,t,a){this.imageUrl=URL.createObjectURL(t.raw),this.fileInfo=e.data},handleError:function(e){},beforeUpload:function(e){var t="image/jpg"==e.type,a="image/jpeg"==e.type,o=e.size/1024<300;return a||t||this.$message.error("上传图片只能是 jpg 、jpeg格式!"),o||this.$message.error("上传图片大小不能超过 300KB!"),(t||a)&&o},handleRemove:function(e,t){this.imageUrl="",this.fileInfo={}},MouseImageBox:function(){this.maskFlag=!0},outImageBox:function(){this.maskFlag=!1},onEditorReady:function(e){}},components:{bFooter:h.a,bHeader:g.a,quillEditor:O.quillEditor},watch:{checkboxModel:{handler:function(e,t){var a=[];this.tableData.forEach(function(e,t){2!==e.status&&a.push(e)}),this.isCheckedAll=this.checkboxModel.length===a.length},deep:!0}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/info"}}},[e._v("信息管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("滚动公告管理")])],1)],1),e._v(" "),a("div",{staticClass:"sx_tab ",staticStyle:{"margin-bottom":"10px"}},[a("router-link",{attrs:{to:"/noticeList"}},[a("div",{staticClass:"sx_tab_item"},[e._v("\n                  申报系统\n              ")])]),e._v(" "),a("router-link",{attrs:{to:"/evaluationNotice"}},[a("div",{staticClass:"sx_tab_item active"},[e._v("\n                  测评快报\n              ")])]),e._v(" "),a("router-link",{attrs:{to:"/evaluationCategory"}},[a("div",{staticClass:"sx_tab_item"},[e._v("\n                  测评快报分类\n              ")])])],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("div",{staticClass:"left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{change:[function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s},e.checkedAll]}}),e._v(" "),a("span",{staticClass:"label-span"},[e._v("全选")])]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.delNotice}},[e._v("删除快报")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.addNotice}},[e._v("新建快报")])],1),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{placeholder:"请输入标题"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.fnSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fnSearch},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.status?a("input",{staticClass:"container-checkbox",attrs:{type:"checkbox",disabled:""},domProps:{value:t.row.id}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{domProps:{textContent:e._s(t.row.title)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"source",label:"报道来源",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reportTime",label:"报道时间",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatDate1")(t.row.reportTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bulletinCategoryName",label:"快报分类",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("div",[e._v("编辑中")]):e._e(),e._v(" "),2==t.row.status?a("div",[e._v("已发布")]):e._e(),e._v(" "),3==t.row.status?a("div",[e._v("已撤回")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status||3==t.row.status?a("i",{staticClass:"operator-icon",staticStyle:{"font-style":"normal"},on:{click:function(a){e.changeStatus(t.row,2)}}},[e._v("发布")]):e._e(),e._v(" "),2==t.row.status?a("i",{staticClass:"operator-icon",staticStyle:{"font-style":"normal"},on:{click:function(a){e.changeStatus(t.row,3)}}},[e._v("撤回")]):e._e(),e._v(" "),1==t.row.status?a("i",{staticClass:"operator-icon",staticStyle:{"font-style":"normal"},on:{click:function(a){e.edit(t.row,"edit")}}},[e._v("编辑")]):e._e(),e._v(" "),2==t.row.status||3==t.row.status?a("i",{staticClass:"operator-icon",staticStyle:{"font-style":"normal"},on:{click:function(a){e.edit(t.row,"check")}}},[e._v("查看")]):e._e()]}}])})],1),e._v(" "),e.tableData&&e.tableData.length>0?a("el-pagination",{staticClass:"new-pagination",staticStyle:{"text-align":"right"},attrs:{"current-page":e.pageInfo.currPage,layout:"total, prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{attrs:{title:"add"==e.dialogTitle?"新建测评快报":"edit"==e.dialogTitle?"编辑测评快报":"查看测评快报",visible:e.noticeDialog,width:"50%","lock-scroll":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.noticeDialog=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"快报名称","label-width":"100px",prop:"title"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"快报名称",maxlength:"50",disabled:e.readonly},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title","string"==typeof t?t.trim():t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"快报分类","label-width":"100px",prop:"bulletinCategoryId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"快报分类",disabled:e.readonly},model:{value:e.form.bulletinCategoryId,callback:function(t){e.$set(e.form,"bulletinCategoryId",t)},expression:"form.bulletinCategoryId"}},e._l(e.categoryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.type,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"快报来源","label-width":"100px",prop:"source"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"快报来源",maxlength:"50",disabled:e.readonly},model:{value:e.form.source,callback:function(t){e.$set(e.form,"source","string"==typeof t?t.trim():t)},expression:"form.source"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"报道时间","label-width":"100px",prop:"reportTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",editable:!1,clearable:!1,disabled:e.readonly},model:{value:e.form.reportTime,callback:function(t){e.$set(e.form,"reportTime",t)},expression:"form.reportTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传图片","label-width":"100px",required:""}},["check"!==e.dialogTitle?a("el-col",{attrs:{span:11}},[e.imageUrl?e._e():a("el-upload",{staticClass:"upload-box",attrs:{action:e.actionUrl,headers:e.header,"on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeUpload,"list-type":"picture-card","show-file-list":!1}},[a("i",{staticClass:"el-icon-plus",staticStyle:{"vertical-align":"super"}})]),e._v(" "),e.imageUrl?a("div",{staticClass:"image-box",on:{mouseover:e.MouseImageBox,mouseout:e.outImageBox}},[a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}),e._v(" "),e.maskFlag?a("div",{staticClass:"image-box-mask"}):e._e(),e._v(" "),e.maskFlag?a("i",{staticClass:"el-icon-delete",on:{click:e.handleRemove}}):e._e()]):e._e(),e._v(" "),e.isGoodsPhoto?a("div",{staticStyle:{color:"#f56c6c"}},[e._v("请上传封面")]):e._e()],1):e._e(),e._v(" "),"check"==e.dialogTitle?a("el-col",{attrs:{span:11}},[a("div",{staticClass:"image-box"},[a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}})])]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"快报内容","label-width":"100px",prop:"content"}},[a("el-col",{attrs:{span:24}},["check"!==e.dialogTitle?a("quill-editor",{ref:"myQuillEditor",staticClass:"editer",attrs:{options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}}):e._e(),e._v(" "),"check"==e.dialogTitle?a("div",{staticClass:"editor-content",domProps:{innerHTML:e._s(e.form.content)}}):e._e()],1)],1)],1),e._v(" "),"check"!==e.dialogTitle?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelForm(e.form)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm(e.form)}}},[e._v("确 定")])],1):e._e()],1)],1)},staticRenderFns:[]};var H=a("VU/8")(B,j,!1,function(e){a("V4J/")},null,null).exports,G={name:"evaluationCategory",data:function(){return{userId:"",tableData:[],pageInfo:{currPage:1,total:0},search:"",noticeDialog:!1,isLock:!1,form:{type:""},rules:{type:[{required:!0,message:"请输入快报分类",trigger:"blur"}]}}},computed:{},mounted:function(){this.getNodeData(),this.userId=sessionStorage.getItem("userId")},methods:{getNodeData:function(e,t,a){var o=this,s=e||1,i=t||10,r=a||o.search;r=window.filterSearchName(r),o.axios.get("/proxy/report-business/booking/v2/api/rolNoticeManagement/bulletinCategory/getList/"+s+"/"+i+"?title="+encodeURIComponent(escape(r))).then(function(e){if(200==e.data.code){o.tableData=e.data.datas,o.pageInfo=e.data.pageInfo;var t=1+parseInt((o.pageInfo.currPage-1)*o.pageInfo.pageSize);_.each(o.tableData,function(e){e.order=t++})}else o.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},addNotice:function(){this.noticeDialog=!0,this.form.type=""},submitForm:function(e){var t=this,a=t.form;t.isLock||t.$refs.form.validate(function(e){e&&(t.isLock=!0,t.axios.post("/proxy/report-business/booking/v2/api/rolNoticeManagement/bulletinCategory/saveOrUpdate/"+t.userId,a).then(function(e){t.isLock=!1,200==e.data.code?(t.$message.success(e.data.msg),t.noticeDialog=!1,t.getNodeData()):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)}))})},cancelForm:function(e){this.$refs.form.resetFields(),this.noticeDialog=!1},delNotice:function(e){var t=this;t.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.delete("/proxy/report-business/booking/v2/api/rolNoticeManagement/bulletinCategory/delete/"+e.id,{headers:{"Content-type":"application/json"}}).then(function(e){200==e.data.code?(t.$message.success(e.data.msg),t.getNodeData(t.pageInfo.currPage)):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){t.$message.info("已取消删除")})},fnSearch:function(e,t,a,o){this.getNodeData(t,10,this.search)},handleCurrentChange:function(e){this.getNodeData(e,10,this.search)}},components:{bFooter:h.a,bHeader:g.a}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/info"}}},[e._v("信息管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("滚动公告管理")])],1)],1),e._v(" "),a("div",{staticClass:"sx_tab ",staticStyle:{"margin-bottom":"10px"}},[a("router-link",{attrs:{to:"/noticeList"}},[a("div",{staticClass:"sx_tab_item"},[e._v("\n                  申报系统\n              ")])]),e._v(" "),a("router-link",{attrs:{to:"/evaluationNotice"}},[a("div",{staticClass:"sx_tab_item"},[e._v("\n                  测评快报\n              ")])]),e._v(" "),a("router-link",{attrs:{to:"/evaluationCategory"}},[a("div",{staticClass:"sx_tab_item active"},[e._v("\n                  测评快报分类\n              ")])])],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{size:"small"},on:{click:e.addNotice}},[e._v("新建分类")])],1),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{placeholder:"请输入快报分类"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.fnSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fnSearch},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"order",label:"序号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"快报分类",width:"350"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bulletinNum",label:"数量",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"300","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.bulletinNum?a("i",{staticClass:"operator-icon",staticStyle:{"font-style":"normal"},on:{click:function(a){e.delNotice(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),e.tableData&&e.tableData.length>0?a("el-pagination",{staticClass:"new-pagination",staticStyle:{"text-align":"right"},attrs:{"current-page":e.pageInfo.currPage,layout:"total, prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{attrs:{title:"新建分类",visible:e.noticeDialog,width:"40%","lock-scroll":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.noticeDialog=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"快报分类","label-width":"100px",prop:"type"}},[a("el-input",{attrs:{placeholder:"快报名称",maxlength:"20"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type","string"==typeof t?t.trim():t)},expression:"form.type"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelForm(e.form)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm(e.form)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Q=a("VU/8")(G,W,!1,function(e){a("8Rn6")},null,null).exports,Y={name:"noticeIndex",data:function(){return{ax:[]}},mounted:function(){this.ax=_.pluck(JSON.parse(sessionStorage.getItem("ax")),"url")},methods:{axs:function(e){return!!sessionStorage.getItem("isad")||this.ax.includes(e)}},components:{bFooter:h.a,bHeader:g.a}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("bHeader")],1),e._v(" "),a("el-main",[a("div",{staticClass:"notice-index-box"},[a("div",{staticClass:"notice-index-item"},[a("div",{staticClass:"f18 item-title"},[e._v("活动管理")]),e._v(" "),a("dl",{staticClass:"item-content clearfix"},[a("dt",{staticClass:"item-icon-box left"}),e._v(" "),a("dd",{staticClass:"item-content-box left"},[a("p",{staticClass:"f36"},[e._v("23")]),e._v(" "),a("p",{staticClass:"mb20"},[e._v("当前正在运行的活动数")]),e._v(" "),a("p",{staticClass:"f36"},[e._v("23")]),e._v(" "),a("p",[e._v("当前正在运行的活动数")])])]),e._v(" "),a("p",{staticClass:"item-bottom"},[a("a",{staticClass:"el-icon-more item-more",attrs:{href:"javascript:;"}})])]),e._v(" "),a("div",{staticClass:"notice-index-item"}),e._v(" "),a("div",{staticClass:"notice-index-item"}),e._v(" "),a("div",{staticClass:"notice-index-item"})])])],1)},staticRenderFns:[]};var K=a("VU/8")(Y,J,!1,function(e){a("2ve7")},null,null).exports,X=[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!0,"large","huge"]}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],["link"]],Z={name:"addActivityInfo",data:function(){return{tableData:[],currentPage:1,total:0,isCheckedAll:!1,checkboxModel:[],search:"",addActivityDialog:!1,activityform:{eventShowTitle:"",sourceFlag:"",eventShowDatatime:"",eventShowLocation:"",eventShowDesc:""},actionUrl:"/zuul/proxy/report-business/booking/v2/api/infoManagement/eventShow/upload",rules:{eventShowTitle:[{required:!0,message:"请输入活动名称",trigger:"blur"},{max:50,message:"不能超过50个字符",trigger:"blur"}],sourceFlag:[{required:!0,message:"请选择展示渠道",trigger:"blur"}],eventShowDatatime:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],eventShowLocation:[{required:!0,message:"请输入地址",trigger:"blur"},{max:50,message:"不能超过50个字符",trigger:"blur"}],eventShowDesc:[{required:!0,message:"请输入内容",trigger:"blur"},{max:4e3,message:"不能超过4000个字符",trigger:"blur"}]},sourceList:[{id:1,name:"移动端 "},{id:2,name:"PC端 "}],pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},fileInfo:{},userId:"",previewDialog:!1,previewList:{},newsEditor:"",editorOption:{modules:{toolbar:{container:X}}}}},computed:{header:function(){return{Authorization:sessionStorage.getItem("token")}},editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){this.userId=sessionStorage.getItem("userId"),this.getNodeData()},methods:{getNodeData:function(e,t,a){var o=this,s=void 0==e?1:e,i=void 0==t?10:t,r=void 0==a?null:o.search;o.axios.get("/proxy/report-business/booking/v2/api/infoManagement/eventShow/getList/"+s+"/"+i+"?title="+r).then(function(e){200==e.data.code?(o.tableData=e.data.datas,o.currentPage=e.data.pageInfo.currPage,o.total=e.data.pageInfo.total):o.$message.error(e.datas.msg)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){var t=this.search;this.getNodeData(e,10,t)},checkedAll:function(e){var t=this;t.isCheckedAll?(t.checkboxModel=[],t.tableData.forEach(function(e,a){e.eventStatus||t.checkboxModel.push(e.id)})):t.checkboxModel=[]},delNotice:function(){var e=this;0!=e.checkboxModel.length?e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/infoManagement/eventShow/delete",{data:e.checkboxModel,headers:{"Content-type":"application/json"}}).then(function(t){200==t.data.code?(e.$message.success(t.data.msg),e.getNodeData(),e.isCheckedAll=!1,e.checkboxModel=[]):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除"),e.isCheckedAll=!1,e.checkboxModel=[]}):e.$message.error("没有可以删除的数据")},fnSearch:function(e,t){var a=this.search;this.getNodeData(t,10,a)},setTop:function(e){var t=this,a=t.userId,o=e.id,s=e.sourceFlag?e.sourceFlag:0,i=e.eventStatus?0:1;t.axios.put("/proxy/report-business/booking/v2/api/infoManagement/eventShow/update/"+a+"/"+i+"/"+o+"/"+s).then(function(e){200==e.data.code?(t.$message.success(e.data.msg),t.getNodeData()):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},fnAddActivity:function(){this.addActivityDialog=!0},onEditorReady:function(e){},submitForm:function(e){var t=this,a=!1,o=t.activityform;o.creator=t.userId,o.fileInfo=t.fileInfo,/<img(?:.|\s)*?>/g.test(t.activityform.eventShowDesc)?t.$message.error("正文内容含有图片，请从添加图片处上传图片！"):(this.sourceList.forEach(function(t){e.sourceFlag==t.name&&(e.sourceFlag=t.id)}),t.$refs.activityform.validate(function(e){if(!e)return!1;a||(a=!0,t.axios.post("/proxy/report-business/booking/v2/api/infoManagement/eventShow/insert",o).then(function(e){a=!1,200==e.data.code?(t.addActivityDialog=!1,t.$message.success(e.data.msg),location.reload()):t.$message.error(e.data.msg)}).catch(function(e){a=!1,console.log(e)}))}))},resetForm:function(e){this.$refs.activityform.resetFields(),this.addActivityDialog=!1},addPreview:function(){this.addActivityDialog=!1,this.previewActivityDialog=!0},beforeUpload:function(e){var t="image/jpg"==e.type,a="image/jpeg"==e.type,o=(e.type,e.type,e.type,e.size/1024<300);return a||t||this.$message.error("上传文件只能是 jpg 、jpeg格式!"),o||this.$message.error("上传文件大小不能超过 300KB!"),(t||a)&&o},handleSuccess:function(e,t,a){500!=e.code?this.fileInfo=e.data:this.$message.error(e.msg)},handlerError:function(e){500!=e.code||this.$message.error(e.msg)},fnPreviewNotice:function(e){e.cask;this.previewDialog=!0,this.previewList=e},closeDialog:function(e){this.$refs.activityform.resetFields()}},components:{bFooter:h.a,bHeader:g.a,quillEditor:O.quillEditor},watch:{checkboxModel:{handler:function(e,t){var a=[];this.tableData.forEach(function(e,t){e.eventStatus||a.push(e)}),this.isCheckedAll=this.checkboxModel.length==a.length},deep:!0}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30 "},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/info"}}},[e._v("信息管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("活动信息管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("div",{staticClass:"left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{change:[function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s},e.checkedAll]}}),e._v(" "),a("span",{staticClass:"label-span"},[e._v("全选")])]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.delNotice}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.fnAddActivity}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{placeholder:"请输入活动名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.fnSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fnSearch},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.eventStatus?a("input",{staticClass:"container-checkbox",attrs:{type:"checkbox",disabled:""},domProps:{value:t.row.id}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.eventStatus?"置顶":"完成"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"eventShowTitle",label:"活动名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceFlag",label:"平台",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(1==t.row.sourceFlag?"移动端":"PC端"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"300","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"编辑人",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.creator?t.row.creator:"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("i",{staticClass:"operator-icon el-icon-view",on:{click:function(a){e.fnPreviewNotice(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:1==t.row.eventStatus?"撤回":"置顶",placement:"top"}},[1==t.row.eventStatus?a("i",{staticClass:"operator-icon cancel-top-icon",on:{click:function(a){e.setTop(t.row)}}}):a("i",{staticClass:"operator-icon set-top-icon",on:{click:function(a){e.setTop(t.row)}}})])]}}])})],1),e._v(" "),e.tableData&&e.tableData.length>0?a("el-pagination",{staticClass:"new-pagination",staticStyle:{"text-align":"right"},attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{staticClass:"activity-dialog",attrs:{title:"新建编辑活动",visible:e.addActivityDialog,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.addActivityDialog=t},close:function(t){e.closeDialog(e.addActivityDialog)}}},[a("div",[a("el-form",{ref:"activityform",attrs:{model:e.activityform,rules:e.rules,"label-width":"80px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"名称",prop:"eventShowTitle"}},[a("el-input",{attrs:{placeholder:"请输入名称不超过50个汉字"},model:{value:e.activityform.eventShowTitle,callback:function(t){e.$set(e.activityform,"eventShowTitle","string"==typeof t?t.trim():t)},expression:"activityform.eventShowTitle"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"展示渠道",prop:"sourceFlag"}},[a("el-select",{attrs:{placeholder:"请选择展示渠道"},model:{value:e.activityform.sourceFlag,callback:function(t){e.$set(e.activityform,"sourceFlag",t)},expression:"activityform.sourceFlag"}},e._l(e.sourceList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"时间",prop:"eventShowDatatime"}},[a("el-col",{attrs:{span:24}},[a("el-date-picker",{staticStyle:{},attrs:{type:"date",span:24,placeholder:"选择日期",clearable:!1,"picker-options":e.pickerOptions},model:{value:e.activityform.eventShowDatatime,callback:function(t){e.$set(e.activityform,"eventShowDatatime","string"==typeof t?t.trim():t)},expression:"activityform.eventShowDatatime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"地点",prop:"eventShowLocation"}},[a("el-input",{attrs:{placeholder:"请输入地点"},model:{value:e.activityform.eventShowLocation,callback:function(t){e.$set(e.activityform,"eventShowLocation","string"==typeof t?t.trim():t)},expression:"activityform.eventShowLocation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内容",prop:"eventShowDesc"}},[a("quill-editor",{ref:"myQuillEditor",staticClass:"editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.activityform.eventShowDesc,callback:function(t){e.$set(e.activityform,"eventShowDesc",t)},expression:"activityform.eventShowDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"添加图片"}},[a("div",{staticClass:"upload-box"},[a("el-input",{attrs:{disabled:!0,placeholder:"限jpg格式，大小不超过300K"}}),e._v(" "),a("el-upload",{ref:"“upload”",staticClass:"ativity-upload",attrs:{id:"ativity-upload",action:e.actionUrl,headers:e.header,"on-success":e.handleSuccess,"on-error":e.handlerError,"before-upload":e.beforeUpload,limit:1}},[a("div",{staticClass:"upload-icon"},[e._v("浏览")])])],1)])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetForm(e.activityform)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitForm(e.activityform)}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"preview-dialog",attrs:{title:"查看活动信息",visible:e.previewDialog,center:""},on:{"update:visible":function(t){e.previewDialog=t}}},[a("ul",{staticClass:"preview-list"},[a("li",{staticClass:"preview-item"},[e._v(e._s(e.previewList.eventShowTitle))]),e._v(" "),a("li",{staticClass:"preview-item"},[e._v("展示渠道："),1==e.previewList.sourceFlag?a("span",[e._v("移动端")]):e._e(),2==e.previewList.sourceFlag?a("span",[e._v("PC端")]):e._e()]),e._v(" "),a("li",{staticClass:"preview-item"},[e._v("发布时间："+e._s(e._f("formatDate")(e.previewList.createTime)))]),e._v(" "),a("li",{staticClass:"preview-item activity-item-image"},[e.previewList.eventShowPicUrl?a("img",{staticClass:"item-pic",attrs:{src:e.previewList.eventShowPicUrl}}):e._e(),e._v(" "),a("div",{staticClass:"ql-editor",domProps:{innerHTML:e._s(e.previewList.eventShowDesc)}})])])])],1)},staticRenderFns:[]};var te=a("VU/8")(Z,ee,!1,function(e){a("0SHn")},null,null).exports,ae=f()({name:"sysAdmin",components:{bFooter:h.a,bHeader:g.a},data:function(){return{isEdit:!1,formId:""}},mounted:function(){this.getNodeData()},watch:{checkboxModel:{handler:function(e,t){var a=[];this.eventlist.forEach(function(e,t){e.status||a.push(e)}),this.isCheckedAll=this.checkboxModel.length===a.length},deep:!0}},methods:{showNewActive:function(){this.form={},this.selectTplVisible=!0},createNewActive:function(){var e=this;e.isEdit?e.form.id=e.formId:delete e.form.id,e.axios.post("/proxy/report-business/booking/v2/api/systemManagement/saveOrUpdate",e.form).then(function(t){t&&t.data&&200==t.data.code?(e.selectTplVisible=!1,e.isEdit=!1,e.getNodeData()):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})},getNodeData:function(e,t,a){var o=this;o.axios.get("/proxy/report-business/booking/v2/api/systemManagement/queryDataItemByCodeType").then(function(e){var t;e&&e.data&&(t=e.data.data,o.eventlist=t)}).catch(function(e){console.log(e)})},editActive:function(e){this.selectTplVisible=!0,this.isEdit=!0,this.form.codeType=e.codeType,this.form.code=e.code,this.form.value=e.value,this.formId=e.id},closeNewActive:function(){this.selectTplVisible=!1,this.isEdit=!1}}},"data",function(){return{form:{},eventlist:[],selectTplVisible:!1}}),oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/systemIndex"}}},[e._v("系统管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("系统变量管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{size:"small"}},[e._v("停止")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.showNewActive}},[e._v("新建")])],1)]),e._v(" "),a("div",{staticClass:"table-wrap"},[a("table",{staticClass:"container-talbe"},[e._m(0),e._v(" "),e.eventlist&&e.eventlist.length>0?a("tbody",e._l(e.eventlist,function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.code))]),e._v(" "),a("td",[e._v(e._s(t.value))]),e._v(" "),a("td",[e._v(e._s(t.codeType))]),e._v(" "),a("td",[a("i",{staticClass:"el-icon-edit-outline",on:{click:function(a){e.editActive(t)}}})])])})):e._e()]),e._v(" "),e.eventlist&&0==e.eventlist.length?a("div",{staticClass:"no-data"},[e._v("暂无数据")]):e._e()])])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{attrs:{title:e.isEdit?"编辑变量":"新建变量",visible:e.selectTplVisible},on:{"update:visible":function(t){e.selectTplVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.codeType,callback:function(t){e.$set(e.form,"codeType",t)},expression:"form.codeType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"值"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeNewActive}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.createNewActive()}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{attrs:{width:"20%"}},[this._v("名称")]),this._v(" "),t("th",{attrs:{width:"20%"}},[this._v("值")]),this._v(" "),t("th",{attrs:{width:"20%"}},[this._v("类型")]),this._v(" "),t("th",{attrs:{width:"10%"}},[this._v("操作")])])])}]};var se=a("VU/8")(ae,oe,!1,function(e){a("xEzh")},null,null).exports,ie=a("4Ukx"),re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/info"}}},[e._v("信息管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("政策文件管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container policy-wrapper"},[a("div",{staticClass:"container-head clearfix"},[a("div",[a("div",{staticClass:"left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{change:[function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s},e.checkedAll]}}),e._v(" "),a("span",{staticClass:"label-span"},[e._v("全选")])]),e._v(" "),a("el-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small"},on:{click:e.delNotice}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"ml5 left"},[a("el-upload",{ref:"upload",staticClass:"policy-upload",attrs:{id:"policy-upload",action:e.actionUrl,headers:e.header,"on-success":e.handleSuccess,"on-error":e.handlerError,"before-upload":e.beforeUpload,limit:1,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small"},slot:"trigger"},[e._v("浏览")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.submitUpload}},[e._v("上传")])],1)],1)]),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{placeholder:"请输入标题"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.fnSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fnSearch},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"fileName",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"完成时间",width:"300","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"编辑人",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.userName?t.row.userName:"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"预览",placement:"top"}},[a("i",{staticClass:"el-icon-view",on:{click:function(a){e.fnPreviewNotice(t.row)}}})])]}}])})],1),e._v(" "),e.tableData.length>0?a("el-pagination",{staticClass:"new-pagination",staticStyle:{"text-align":"right"},attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{staticClass:"preview-dialog",attrs:{title:"预览政策文件",visible:e.previewDialog,center:""},on:{"update:visible":function(t){e.previewDialog=t}}},[a("ul",{staticClass:"preview-list"},[a("li",{staticClass:"preview-item"},[e._v(e._s(e.previewList.fileName))]),e._v(" "),a("li",{staticClass:"preview-item"},[e._v("发布时间："+e._s(e._f("formatDate")(e.previewList.createTime)))]),e._v(" "),a("li",{staticClass:"preview-item item-image"},[a("img",{staticClass:"item-pic",attrs:{src:e.previewList.picUrl}})])])])],1)},staticRenderFns:[]};var ne=function(e){a("yfxw")},le=a("VU/8")(ie.a,re,!1,ne,null,null).exports,ce={name:"index",components:{bHeader:g.a,bFooter:h.a},data:function(){return{orgTotal:0,registerUserNum:0,approvingUserNum:0,orgCount:0,serviceCount:0,servicePermissionCount:0,infoData:0,ax:[],eventInstanceRunning:0,eventInstanceSumNum:0,commentRuleCount:0,ruleCount:0,booksTotal:0,approveBookList:0}},created:function(){this.getOrgTotal(),this.getActiveTotal()},mounted:function(){this.ax=_.pluck(JSON.parse(sessionStorage.getItem("ax")),"url")},methods:{axs:function(e){return!!sessionStorage.getItem("isad")||this.ax.includes(e)},getOrgTotal:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/systemManagement/showDataInfo").then(function(t){if(t&&"200"==t.status&&t.data&&t.data.data){var a=t.data.data;e.registerUserNum=a.registerUserNum,e.approvingUserNum=a.approvingUserNum,e.orgCount=a.orgCount,e.serviceCount=a.serviceCount,e.servicePermissionCount=a.servicePermissionCount,e.infoData=a.infoData,e.commentRuleCount=a.commentRuleCount,e.ruleCount=a.ruleCount,e.booksTotal=a.booksTotal,e.approveBookList=a.approveBookList}}).catch(function(e){console.log(e)}),e.axios.get("/proxy/report-business//booking/v2/api/ordermanager/getOrderCount").then(function(t){t&&"200"==t.status&&t.data&&t.data.data&&(e.ddzs=t.data.data.orderTotal,e.tbdds=t.data.data.sysOrderNum)}).catch(function(e){console.log(e)})},getActiveTotal:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/eventRunManagement/eventInstanceStatistics").then(function(t){if(t&&"200"==t.status&&t.data&&t.data.data){var a=t.data.data;e.eventInstanceRunning=a.eventInstanceRunning,e.eventInstanceSumNum=a.eventInstanceSumNum}}).catch(function(e){console.log(e)})}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"item_box"},[e.axs("hdgl")?a("div",{staticClass:"item col_orange"},[a("h1",[e._v("活动管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.eventInstanceRunning))]),e._v(" "),a("p",[e._v("当前正在运行的活动数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.eventInstanceSumNum))]),e._v(" "),a("p",[e._v("当前活动总数")])])])]),e._v(" "),a("router-link",{attrs:{to:"/activityList"}})],1):e._e(),e._v(" "),e.axs("tdjgl")?a("div",{staticClass:"item col_purple"},[a("h1",[e._v("填答卷管理")]),e._v(" "),e._m(0),e._v(" "),a("router-link",{attrs:{to:"/exam"}})],1):e._e(),e._v(" "),e.axs("jggl")?a("div",{staticClass:"item col_yellow"},[a("h1",[e._v("机构管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[e._m(1),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.orgCount))]),e._v(" "),a("p",[e._v("机构总数")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/orgIndex"}})],1):e._e(),e._v(" "),e.axs("yhgl")?a("div",{staticClass:"item col_green"},[a("h1",[e._v("用户管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.approvingUserNum))]),e._v(" "),a("p",[e._v("当前需审批的用户数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.registerUserNum))]),e._v(" "),a("p",[e._v("当前注册的用户总数")])])])]),e._v(" "),a("router-link",{attrs:{to:"/user"}})],1):e._e(),e._v(" "),e.axs("xxgl")?a("div",{staticClass:"item col_blue"},[a("h1",[e._v("信息管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[e._m(2),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.infoData))]),e._v(" "),a("p",[e._v("信息总数")])])])]),e._v(" "),a("router-link",{attrs:{to:"/info"}})],1):e._e(),e._v(" "),e.axs("sjtjgl")?a("div",{staticClass:"item col_pink"},[a("h1",[e._v("数据统计管理")]),e._v(" "),e._m(3),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/unopened"}})],1):e._e(),e._v(" "),e.axs("xtgl")?a("div",{staticClass:"item col_gray"},[a("h1",[e._v("系统管理")]),e._v(" "),e._m(4),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/systemIndex"}})],1):e._e(),e._v(" "),e.axs("fwgl")?a("div",{staticClass:"item col_lightgreen"},[a("h1",[e._v("服务管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.serviceCount))]),e._v(" "),a("p",[e._v("服务个数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.servicePermissionCount))]),e._v(" "),a("p",[e._v("可控制权限个数")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/apilist"}})],1):e._e(),e._v(" "),e.axs("spgl")?a("div",{staticClass:"item col_lightgreen"},[a("h1",[e._v("商品管理")]),e._v(" "),e._m(5),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/products"}})],1):e._e(),e._v(" "),e.axs("ddgl")?a("div",{staticClass:"item col_lightgreen"},[a("h1",[e._v("订单管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.ddzs))]),e._v(" "),a("p",[e._v("订单总数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.tbdds))]),e._v(" "),a("p",[e._v("同步订单数")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/orderList"}})],1):e._e(),e._v(" "),e.axs("tsgl")?a("div",{staticClass:"item col_lightgreen"},[a("h1",[e._v("图书管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.booksTotal))]),e._v(" "),a("p",[e._v("图书总数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.approveBookList))]),e._v(" "),a("p",[e._v("有效书单总数")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/bookPanel"}})],1):e._e(),e._v(" "),e.axs("cpgl")?a("div",{staticClass:"item col_lightgreen"},[a("h1",[e._v("测评管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.commentRuleCount))]),e._v(" "),a("p",[e._v("组卷规则数量")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.ruleCount))]),e._v(" "),a("p",[e._v("评价规则数量")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/evaluationPanel"}})],1):e._e(),e._v(" "),e.axs("stgl")?a("div",{staticClass:"item col_purple"},[a("h1",[e._v("试题管理")]),e._v(" "),e._m(6),e._v(" "),a("router-link",{attrs:{to:"/examPaperPanel"}})],1):e._e(),e._v(" "),e.axs("dsfyygl")?a("div",{staticClass:"item col_lightgreen"},[a("h1",[e._v("第三方应用管理")]),e._v(" "),e._m(7),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/thirdparty"}})],1):e._e()])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("3")]),e._v(" "),a("p",[e._v("当前正在启用的答卷数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("10")]),e._v(" "),a("p",[e._v("填答卷总数")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"list mgb20"},[t("span",[this._v("0")]),this._v(" "),t("p",[this._v("当前需审批的机构数")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"list mgb20"},[t("span",[this._v("0")]),this._v(" "),t("p",[this._v("当前需审批的信息数")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("3")]),e._v(" "),a("p",[e._v("当前需审批的数据数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("10")]),e._v(" "),a("p",[e._v("数据统计总数")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("19")]),e._v(" "),a("p",[e._v("当前需审批的系统信息数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("60")]),e._v(" "),a("p",[e._v("系统信息总数")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("已服务商品数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("00")]),e._v(" "),a("p",[e._v("总商品数")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("试题数量")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("标签数量")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("应用数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("00")]),e._v(" "),a("p",[e._v("接口被调用总数")])])])])}]};var ue=a("VU/8")(ce,de,!1,function(e){a("ziSv")},null,null).exports,pe=a("OP9t"),me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg login_page"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"item_box"},[e._m(0),e._v(" "),a("di",{staticClass:"container_r"},[a("el-form",{ref:"loginForm",staticClass:"demo-loginForm",attrs:{model:e.loginForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"accountNum"}},[a("el-input",{model:{value:e.loginForm.accountNum,callback:function(t){e.$set(e.loginForm,"accountNum","string"==typeof t?t.trim():t)},expression:"loginForm.accountNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password","string"==typeof t?t.trim():t)},expression:"loginForm.password"}})],1),e._v(" "),a("el-form-item",{staticClass:"catpcha",attrs:{label:"验证码",prop:"catpcha"}},[a("el-input",{staticClass:"catpcha_input",attrs:{type:"catpcha",maxlength:"5"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("loginForm")}},model:{value:e.loginForm.catpcha,callback:function(t){e.$set(e.loginForm,"catpcha","string"==typeof t?t.trim():t)},expression:"loginForm.catpcha"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"catpcha_item"},[a("img",{attrs:{src:e.catpchaUrl,alt:"",id:"catpchaImg"},on:{click:e.freshCatpcha}})])]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("loginForm")}}},[e._v("登录")])],1)],1)],1),e._v(" "),a("div",{staticClass:"clearfix"})],1)]),e._v(" "),a("b-footer")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container_l"},[t("img",{staticStyle:{width:"100%"},attrs:{src:a("qlQD"),alt:""}})])}]};var ve=function(e){a("HWvq")},fe=a("VU/8")(pe.a,me,!1,ve,null,null).exports,he={name:"info-panel",data:function(){return{stationNewsNumber:"",stationNewsSendingNumber:"",eventShowNumber:"",eventShowingNumber:"",currentNewsNumber:"",newsedNumber:"",ax:[]}},components:{bHeader:g.a,bFooter:h.a},created:function(){this.initData(),this.ax=_.pluck(JSON.parse(sessionStorage.getItem("ax")),"url")},methods:{axs:function(e){return!!sessionStorage.getItem("isad")||this.ax.includes(e)},initData:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/systemManagement/getTotalVO").then(function(t){if(t&&"200"==t.status&&t.data&&t.data.data){var a=t.data.data;e.stationNewsNumber=a.stationNewsNumber,e.stationNewsSendingNumber=a.stationNewsSendingNumber,e.eventShowNumber=a.eventShowNumber,e.eventShowingNumber=a.eventShowingNumber,e.currentNewsNumber=a.currentNewsNumber,e.newsedNumber=a.newsedNumber}}).catch(function(e){console.log(e)})}}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("信息管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"item_box"},[e.axs("xxgl.znxx")?a("div",{staticClass:"item"},[a("h1",[e._v("站内信息")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.stationNewsSendingNumber))]),e._v(" "),a("p",[e._v("待发送信息")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.stationNewsNumber))]),e._v(" "),a("p",[e._v("历史消息总数")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/info/sitemsg"}})],1):e._e(),e._v(" "),e.axs("xxgl.gdgg")?a("div",{staticClass:"item"},[a("h1",[e._v("滚动公告")]),e._v(" "),e._m(0),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/noticeList"}})],1):e._e(),e._v(" "),e.axs("xxgl.hdxx")?a("div",{staticClass:"item"},[a("h1",[e._v("活动信息")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_act"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.eventShowingNumber))]),e._v(" "),a("p",[e._v("展示中活动")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.eventShowNumber))]),e._v(" "),a("p",[e._v("历史活动总数")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/addActivityInfo"}})],1):e._e(),e._v(" "),e.axs("xxgl.zcwj")?a("div",{staticClass:"item"},[a("h1",[e._v("政策文件")]),e._v(" "),e._m(1),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/policy"}})],1):e._e(),e._v(" "),e.axs("xxgl.xwxx")?a("div",{staticClass:"item"},[a("h1",[e._v("新闻信息")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_news"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.currentNewsNumber))]),e._v(" "),a("p",[e._v("当天新闻")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.newsedNumber))]),e._v(" "),a("p",[e._v("30天内新闻")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/newsList"}})],1):e._e()])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mid"},[t("span",{staticClass:"mid_icon i_notice"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mid"},[t("span",{staticClass:"mid_icon i_file"}),this._v(" "),t("div",{staticClass:"mid_list fl"})])}]};var _e=a("VU/8")(he,ge,!1,function(e){a("uWRl")},null,null).exports,be=a("Q5gy"),ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/info"}},[e._v("信息管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("站内信息管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search"},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"check_all_item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"check_box_all",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{click:e.checkedAll,change:function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s}}}),a("span",[e._v("全选")])])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:e.batchDelete}},[e._v("删除")])],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:e.createMsg}},[e._v("新建")])],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticStyle:{width:"80%"},on:{change:e.searchInfo},model:{value:e.query.newsStatus,callback:function(t){e.$set(e.query,"newsStatus",t)},expression:"query.newsStatus"}},[a("el-option",{attrs:{label:"全部",value:"null"}}),e._v(" "),a("el-option",{attrs:{label:"编辑中",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"待发送",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"已发送",value:"2"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"请输入标题进行搜索"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.newsTitle,callback:function(t){e.$set(e.query,"newsTitle","string"==typeof t?t.trim():t)},expression:"query.newsTitle"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[2!==t.row.newsStatus?a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"sx_input_b",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}}):a("input",{staticClass:"sx_input_b",attrs:{type:"checkbox",disabled:""},domProps:{value:t.row.id}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statusTxt",label:"状态",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newsTitle",label:"标题",width:"400"}}),e._v(" "),a("el-table-column",{attrs:{label:"发送时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.sendTime)))])]}}])},[e._v("\n                        formatDateBeiJing\n                    ")]),e._v(" "),a("el-table-column",{attrs:{prop:"createUserId",label:"编撰人",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"!=t.row.newsStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.viewMsg(t.row)}}},[e._v("查看")]):e._e(),e._v(" "),"0"==t.row.newsStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.editMsg(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"0"==t.row.newsStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deployMsg(t.row)}}},[e._v("发布")]):e._e(),e._v(" "),"0"==t.row.newsStatus||"1"==t.row.newsStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteMsg(t.row)}}},[e._v("删除")]):e._e(),e._v(" "),"2"==t.row.newsStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.reclaimMsg(t.row)}}},[e._v("收回")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"30%","lock-scroll":!1},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[a("span",[e._v("确认删除这条站内消息？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmDeleteMsg}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.deployDialogVisible,width:"30%","lock-scroll":!1},on:{"update:visible":function(t){e.deployDialogVisible=t}}},[a("span",[e._v("确认发布这条站内消息？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deployDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmDeployMsg}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.reclaimDialogVisible,width:"30%","lock-scroll":!1},on:{"update:visible":function(t){e.reclaimDialogVisible=t}}},[a("span",[e._v("确认收回这条站内消息？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.reclaimDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmReclaimMsgMsg}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"新建编辑消息",visible:e.dialogFormVisible,"before-close":e.msgFormExit},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"msgForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"标题","label-width":e.formLabelWidth,prop:"newsTitle"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"标题，不超过50个汉字",maxlength:e.formLength.newsTitle},model:{value:e.form.newsTitle,callback:function(t){e.$set(e.form,"newsTitle","string"==typeof t?t.trim():t)},expression:"form.newsTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内容","label-width":e.formLabelWidth,prop:"newsContent"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容，不超过200个汉字",maxlength:e.formLength.newsContent},model:{value:e.form.newsContent,callback:function(t){e.$set(e.form,"newsContent","string"==typeof t?t.trim():t)},expression:"form.newsContent"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组","label-width":e.formLabelWidth,prop:"userType"}},[a("el-checkbox-group",{model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},[a("el-checkbox",{attrs:{label:"教育局"}}),e._v(" "),a("el-checkbox",{attrs:{label:"学校"}}),e._v(" "),a("el-checkbox",{attrs:{label:"老师"}}),e._v(" "),a("el-checkbox",{attrs:{label:"家长"}}),e._v(" "),a("el-checkbox",{attrs:{label:"学生"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"学校类别","label-width":e.formLabelWidth,prop:"schoolTypes"}},[a("el-checkbox-group",{staticClass:"site-msg-checkboxgroup",model:{value:e.form.schoolTypes,callback:function(t){e.$set(e.form,"schoolTypes",t)},expression:"form.schoolTypes"}},[a("el-checkbox",{key:"12",attrs:{label:"幼儿园",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"11",attrs:{label:"小教点",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"10",attrs:{label:"小学",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"2",attrs:{label:"初中",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"5",attrs:{label:"九年一贯",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"15",attrs:{label:"中师",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"14",attrs:{label:"中技",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"3",attrs:{label:"高中",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"1",attrs:{label:"中专",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"13",attrs:{label:"职高",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"8",attrs:{label:"调整中职",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"6",attrs:{label:"其他中职",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"9",attrs:{label:"完全中学",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"7",attrs:{label:"十二年一贯",name:"xgroup"}}),e._v(" "),a("el-checkbox",{key:"4",attrs:{label:"工读",name:"xgroup"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"city_select",attrs:{label:"发送区域","label-width":e.formLabelWidth,prop:"areasInfoId"}},[a("el-row",{attrs:{gutter:4}},[a("el-col",{attrs:{span:7}},[a("el-select",{model:{value:e.form.provinceInfoId,callback:function(t){e.$set(e.form,"provinceInfoId",t)},expression:"form.provinceInfoId"}},e._l(e.citySelect.provinces,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-select",{model:{value:e.form.cityInifoId,callback:function(t){e.$set(e.form,"cityInifoId",t)},expression:"form.cityInifoId"}},e._l(e.citySelect.cities,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-select",{model:{value:e.form.areasInfoId,callback:function(t){e.$set(e.form,"areasInfoId",t)},expression:"form.areasInfoId"}},e._l(e.citySelect.areas,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发送时间","label-width":e.formLabelWidth,prop:"sendTime"}},[a("el-col",{attrs:{span:16}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期"},model:{value:e.form.sendTime,callback:function(t){e.$set(e.form,"sendTime",t)},expression:"form.sendTime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"传递渠道","label-width":e.formLabelWidth,prop:"sendType"}},[a("el-checkbox-group",{model:{value:e.form.sendType,callback:function(t){e.$set(e.form,"sendType",t)},expression:"form.sendType"}},[a("el-checkbox",{attrs:{label:"站内"}}),e._v(" "),a("el-checkbox",{attrs:{label:"邮件"}}),e._v(" "),a("el-checkbox",{attrs:{label:"微信",disabled:""}}),e._v(" "),a("el-checkbox",{attrs:{label:"短信",disabled:""}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.msgFormExit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveMsgHandle}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"消息详情",visible:e.dialogDetailVisible,"lock-scroll":!1},on:{"update:visible":function(t){e.dialogDetailVisible=t}}},[a("div",{staticClass:"msg_detail"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"msg_label"},[e._v("标题")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:1}},[a("div",{staticClass:"msg_txt"},[e._v(e._s(e.detailData.newsTitle))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"msg_label"},[e._v("内容")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:1}},[a("div",{staticClass:"msg_txt"},[e._v(e._s(e.detailData.newsContent))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"msg_label"},[e._v("用户组")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:1}},[a("div",{staticClass:"msg_txt"},[e._v(e._s(e.detailData.userTypeNames))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"msg_label"},[e._v("学校类别")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:1}},[a("div",{staticClass:"msg_txt"},[e._v(e._s(e.detailData.schoolTypes?e.detailData.schoolTypes:"-----"))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"msg_label"},[e._v("发送区域")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:1}},[a("div",{staticClass:"msg_txt"},[e._v(e._s(e.detailData.provinceInfoName)+e._s(e.detailData.cityInifoName)+e._s(e.detailData.areasInfoName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"msg_label"},[e._v("发送时间")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:1}},[a("div",{staticClass:"msg_txt"},[e._v(e._s(e._f("formatDate")(e.detailData.sendTime)))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"msg_label"},[e._v("传递渠道")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:1}},[a("div",{staticClass:"msg_txt"},e._l(e.detailData.sendTypeNames,function(t,o){return a("span",{key:t.id},["0"!=o?a("em",[e._v(",")]):e._e(),e._v("\n                            "+e._s(t)+"\n                        ")])}))])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogDetailVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var ye=function(e){a("eFis")},xe=a("VU/8")(be.a,ke,!1,ye,null,null).exports,Ce={name:"userPanel",data:function(){return{ax:[]}},components:{bHeader:g.a,bFooter:h.a},created:function(){this.ax=_.pluck(JSON.parse(sessionStorage.getItem("ax")),"url")},methods:{axs:function(e){return!!sessionStorage.getItem("isad")||this.ax.includes(e)}}},we={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("用户管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"item_box"},[e.axs("yhgl.zhgl")?a("div",{staticClass:"item col_green"},[a("h1",[e._v("账号管理")]),e._v(" "),e._m(0),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/userlist"}})],1):e._e(),e._v(" "),e.axs("yhgl.jsgl")?a("div",{staticClass:"item col_green"},[a("h1",[e._v("角色管理")]),e._v(" "),e._m(1),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/rolelist"}})],1):e._e(),e._v(" "),e.axs("yhgl.yhzgl")?a("div",{staticClass:"item col_green"},[a("h1",[e._v("用户组管理")]),e._v(" "),e._m(2),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/usergrouplist"}})],1):e._e(),e._v(" "),e.axs("yhgl.qxgl")?a("div",{staticClass:"item col_green"},[a("h1",[e._v("权限管理")]),e._v(" "),e._m(3),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/authorityManagement"}})],1):e._e(),e._v(" "),e.axs("yhgl.yyyhgl")?a("div",{staticClass:"item col_green"},[a("h1",[e._v("运营用户管理")]),e._v(" "),e._m(4),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/weekList"}})],1):e._e()])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("账号总数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("最近一周注册数量")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("角色总数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("未分配用户角色")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("5")]),e._v(" "),a("p",[e._v("用户组总数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("空闲用户组")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("权限总数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("2")]),e._v(" "),a("p",[e._v("权限类型数")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("最近一周活跃用户")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("最近一周注册用户")])])])])}]};var Ie=a("VU/8")(Ce,we,!1,function(e){a("QLos")},null,null).exports,qe=a("/T+6"),Ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/user"}},[e._v("用户管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("账号管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search user_search"},[a("el-row",[a("el-col",{attrs:{span:1}},[a("div",{staticClass:"check_all_item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"check_box_all",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{click:e.checkedAll,change:function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s}}}),a("span",[e._v("全选")])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{on:{click:e.batchDelete}},[e._v("删除")]),e._v(" "),a("el-button",{on:{click:e.createAccount}},[e._v("新建账户")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},on:{click:e.batchInportUser}},[e._v("批量导入导出")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},on:{click:e.exportUsers}},[e._v("导出用户")])],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:2}},[a("el-select",{staticStyle:{width:"80%"},on:{change:e.searchInfo},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},[a("el-option",{attrs:{label:"全部",value:"null"}}),e._v(" "),a("el-option",{attrs:{label:"待审批",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"使用中",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"停用",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"不通过",value:"3"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticStyle:{width:"80%"},on:{change:e.searchInfo},model:{value:e.query.userType,callback:function(t){e.$set(e.query,"userType",t)},expression:"query.userType"}},[a("el-option",{attrs:{label:"全部",value:"null"}}),e._v(" "),e._l(e.userTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticStyle:{width:"80%"},model:{value:e.query.searchType,callback:function(t){e.$set(e.query,"searchType",t)},expression:"query.searchType"}},[a("el-option",{attrs:{label:"用户名",value:"accountNum"}}),e._v(" "),a("el-option",{attrs:{label:"所属机构",value:"schoolInName"}}),e._v(" "),a("el-option",{attrs:{label:"审批人",value:"examineUserId"}}),e._v(" "),a("el-option",{attrs:{label:"手机号码",value:"mobileno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:13}},[a("div",{staticClass:"seach_date_picker",staticStyle:{width:"470px",display:"inline-block"}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"开始时间"},model:{value:e.dateTime[0],callback:function(t){e.$set(e.dateTime,0,t)},expression:"dateTime[0]"}})],1),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("至")]),e._v(" "),a("div",{staticStyle:{display:"inline-block"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"结束时间"},model:{value:e.dateTime[1],callback:function(t){e.$set(e.dateTime,1,t)},expression:"dateTime[1]"}})],1)]),e._v(" "),a("div",{staticStyle:{display:"inline-block",width:"155px"}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword","string"==typeof t?t.trim():t)},expression:"query.keyword"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)])],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"账户ID",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusTxt",label:"状态",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountNum",label:"用户名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:"1"==t.row.registerUserType,expression:"scope.row.registerUserType =='1'"}]},[e._v("C端用户")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"2"==t.row.registerUserType,expression:"scope.row.registerUserType =='2'"}]},[e._v("B端用户")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"schoolInfoName",label:"所属机构",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"formatRegistTime",label:"注册时间",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"examineUserId",label:"审批人",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("span",{staticClass:"icon-sx-view",on:{click:function(a){e.viewAccount(t.row)}}})]),e._v(" "),"0"==t.row.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"审批",placement:"top"}},[a("span",{staticClass:"icon-sx-approve",on:{click:function(a){e.approveAccount(t.row)}}})]):e._e(),e._v(" "),"1"==t.row.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"停用",placement:"top"}},[a("span",{staticClass:"icon-sx-disable",on:{click:function(a){e.disableAccount(t.row)}}})]):e._e(),e._v(" "),"2"==t.row.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("span",{staticClass:"icon-sx-delete",on:{click:function(a){e.deleteAccount(t.row)}}})]):e._e(),e._v(" "),"0"==t.row.status||"1"==t.row.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("span",{staticClass:"icon-sx-edit",on:{click:function(a){e.editAccount(t.row)}}})]):e._e(),e._v(" "),"2"==t.row.registerUserType?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"关联角色",placement:"top"}},[a("span",{staticClass:"icon-role-setting",on:{click:function(a){e.roleSetting(t.row)}}})]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{staticClass:"new_account",attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible,"before-close":e.accountFormExit},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"accountForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"accountNum"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"",maxlength:e.formLength.accountNum,disabled:e.isEdit},model:{value:e.form.accountNum,callback:function(t){e.$set(e.form,"accountNum","string"==typeof t?t.trim():t)},expression:"form.accountNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称","label-width":e.formLabelWidth,prop:"nickName"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"",maxlength:e.formLength.nickName},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName","string"==typeof t?t.trim():t)},expression:"form.nickName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"",maxlength:e.formLength.password},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"==typeof t?t.trim():t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth,prop:"repassword"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"",maxlength:e.formLength.repassword},model:{value:e.form.repassword,callback:function(t){e.$set(e.form,"repassword","string"==typeof t?t.trim():t)},expression:"form.repassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth,prop:"userName"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"",maxlength:e.formLength.userName},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName","string"==typeof t?t.trim():t)},expression:"form.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth,prop:"gender"}},[a("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("el-radio",{attrs:{label:"M"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"F"}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"联系手机","label-width":e.formLabelWidth,prop:"mobileno"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"",maxlength:e.formLength.mobileno},model:{value:e.form.mobileno,callback:function(t){e.$set(e.form,"mobileno","string"==typeof t?t.trim():t)},expression:"form.mobileno"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电子邮箱","label-width":e.formLabelWidth,prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"",maxlength:e.formLength.email},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"==typeof t?t.trim():t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型","label-width":e.formLabelWidth,prop:"registerUserType"}},[a("el-select",{model:{value:e.form.registerUserType,callback:function(t){e.$set(e.form,"registerUserType",t)},expression:"form.registerUserType"}},e._l(e.registerUserTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组","label-width":e.formLabelWidth,prop:"userType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},e._l(e.userTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"dynamic_search",attrs:{label:"学校","label-width":e.formLabelWidth,prop:"schoolInfoName"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入内容","suffix-icon":"el-icon-search"},on:{select:e.handleSelect},model:{value:e.form.schoolInfoName,callback:function(t){e.$set(e.form,"schoolInfoName",t)},expression:"form.schoolInfoName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"班级","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"",maxlength:e.formLength.classTag},model:{value:e.form.classTag,callback:function(t){e.$set(e.form,"classTag",t)},expression:"form.classTag"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.accountFormExit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAccountHandle}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"审核提示",visible:e.dialogApproveVisible,width:"30%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogApproveVisible=t}}},[a("span",[e._v("是否审核该用户"+e._s(e.rejectData.accountNum))]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.reject}},[e._v("拒绝审核")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.passAccount}},[e._v("通过审核")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"拒绝审核",visible:e.dialogRejectVisible,"lock-scroll":!1},on:{"update:visible":function(t){e.dialogRejectVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"拒绝原因","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入拒绝原因"},model:{value:e.rejectReason,callback:function(t){e.rejectReason=t},expression:"rejectReason"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogRejectVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmReject}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"批量导入",visible:e.dialogImportUserVisible,"lock-scroll":!1},on:{"update:visible":function(t){e.dialogImportUserVisible=t}}},[a("div",{staticClass:"upload_container"},[a("div",{staticClass:"upload_template"},[a("a",{staticClass:"template_btn",attrs:{href:e.importUser.templateUrl,download:"批量导入模板"}},[a("span",[e._v("下载模板")]),a("span",{staticClass:"download_icon"})])]),e._v(" "),a("div",{staticClass:"upload_org"},[a("div",{staticClass:"upload_label"},[e._v("\n                    单位\n                ")]),e._v(" "),a("div",{staticClass:"upload_org_item"},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsyncImportUser,placeholder:"请输入内容"},on:{select:e.handleSelectImportUser},model:{value:e.importUser.org,callback:function(t){e.$set(e.importUser,"org",t)},expression:"importUser.org"}})],1)]),e._v(" "),a("div",{staticClass:"el_upload_part"},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.importUser.actionUrl,"before-upload":e.beforeExcelUpload,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleUploadSuccess,"on-error":e.handleUploadError,"file-list":e.importUser.fileList,limit:e.importUser.limit,accept:e.importUser.accept,headers:e.importUser.headers,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("导入用户")]),e._v(" "),a("a",{staticClass:"el-button",attrs:{href:"javascript:;"},on:{click:e.exportOrg}},[e._v("导出机构关联用户")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传excel文件")])],1),e._v(" "),e.isExportOrg?a("p",[e._v("正在导出，可能要一两分钟时间请耐心等待...随后请在"),a("router-link",{attrs:{to:"/systemFile"}},[a("span",{staticStyle:{color:"#f00"}},[e._v("文件管理")])]),e._v("进行下载!")],1):a("p",[e._v(e._s(e.exportOrgMsg))])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.importUser.status,expression:"importUser.status"}],staticClass:"upload_result"},["200"==e.importUser.code?a("p",{staticClass:"upload_msg"},[e._v(e._s(e.importUser.msg)+","+e._s(e.importUser.successNum)+"条成功，"+e._s(e.importUser.failedNum)+"条失败")]):e._e(),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:"200"==e.importUser.code&&""!=e.importUser.filePath,expression:"importUser.code == '200'&& importUser.filePath!=''"}]},[a("a",{staticClass:"template_btn",attrs:{href:e.importUser.filePath}},[e._v("下载用户导入失败记录")])]),e._v(" "),"500"==e.importUser.code?a("p",{staticClass:"upload_msg"},[e._v(e._s(e.importUser.msg))]):e._e()])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.confirmUpload}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmUpload}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"查看账户",visible:e.dialogAccountVisible,width:"30%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogAccountVisible=t}}},[a("div",{staticClass:"account_detail"},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("用户名")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.accountNum))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("昵称")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.nickName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("姓名")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.userName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("性别")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},["F"==e.accountData.gender?a("div",{},[e._v("女")]):e._e(),e._v(" "),"M"==e.accountData.gender?a("div",{},[e._v("男")]):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("联系手机")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.mobileno))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("电子邮箱")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.email?e.accountData.email:"----"))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("所属单位")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.schoolInfoName))])])],1),e._v(" "),e.accountData.classTag&&""!=e.accountData.classTag?a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("班级")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.classTag))])])],1):e._e(),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("用户类型")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},["1"===e.accountData.registerUserType?a("div",[e._v("C端用户")]):e._e(),"2"===e.accountData.registerUserType?a("div",[e._v("B端用户")]):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("用户角色")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.userTypeName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("状态")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[0===e.accountData.status||"0"===e.accountData.status?a("div",[e._v("待审批")]):e._e(),e._v(" "),1===e.accountData.status||"1"===e.accountData.status?a("div",[e._v("使用中")]):e._e(),e._v(" "),2===e.accountData.status||"2"===e.accountData.status?a("div",[e._v("停用")]):e._e(),e._v(" "),3===e.accountData.status||"3"===e.accountData.status?a("div",[e._v("不通过")]):e._e()])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAccountVisible=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"roles_dialog",attrs:{title:"关联角色",visible:e.rolesDialogVisible,"lock-scroll":!1},on:{"update:visible":function(t){e.rolesDialogVisible=t}}},[a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"dialog-left"},[a("ul",{staticClass:"role_list"},e._l(e.roles.allList,function(t,o){return a("li",{key:t.id,class:{active:t.isActive},on:{click:function(t){e.selectLeftRole(o)}}},[a("span",[e._v(e._s(t.roleName))])])}))]),e._v(" "),a("div",{staticClass:"dialog-middle"},[a("div",{staticClass:"btn_group"},[a("div"),e._v(" "),a("ul",[a("li",[a("span",{on:{click:function(t){e.shiftToRight("ALL")}}},[e._v("全部右移 "),a("i",{staticClass:"el-icon-d-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:e.shiftToRight}},[e._v("右移 "),a("i",{staticClass:"el-icon-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:e.shiftToLeft}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v(" 撤销")])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.shiftToLeft("ALL")}}},[a("i",{staticClass:"el-icon-d-arrow-left"}),e._v(" 全部撤销")])])]),e._v(" "),a("div")])]),e._v(" "),a("div",{staticClass:"dialog-right"},[a("ul",{staticClass:"role_list"},[0==e.roles.list.length?a("li",[e._v("暂无数据")]):e._e(),e._v(" "),e._l(e.roles.list,function(t,o){return a("li",{key:t.id,class:{active:t.isActive},on:{click:function(t){e.selectRightRole(o)}}},[a("span",[e._v(e._s(t.roleName))])])})],2)])]),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(t){e.rolesDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAssociateRoles}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Te=function(e){a("jE8L")},Se=a("VU/8")(qe.a,Ne,!1,Te,null,null).exports,$e={name:"siteMsgList",components:{bHeader:g.a,bFooter:h.a},data:function(){return{list:[],userTypes:[],registerUserTypes:[{id:"1",name:"C端用户"},{id:"2",name:"B端用户"}],dateTime:["",""],pageInfo:{currPage:1,pageSize:10,total:0},query:{searchType:"accountNum",keyword:"",userType:"null",registTimeBegin:"",registTimeEnd:"",lastLoginTimeBegin:"",lastLoginTimeEnd:""},dialogAccountVisible:!1,accountData:{}}},created:function(){this.getInfo()},computed:{},watch:{},methods:{viewAccount:function(e){var t=this,a=e.userId;t.axios.get("/proxy/report-business/booking/v2/api/userManagement/queryByUserId/"+a).then(function(e){e&&e.data&&"200"==e.data.code&&(t.accountData=e.data.data,t.dialogAccountVisible=!0)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getInfo()},searchInfo:function(){this.getInfo()},getTime:function(e){return""!=e&&e?moment(e).format("YYYY-MM-DD HH:mm:ss"):""},getInfo:function(){var e=this,t={infoMap:{},status:"null",userType:"null"};t.pagesize=e.pageInfo.pageSize,t.startpage=e.pageInfo.currPage;var a=e.query.searchType;a&&e.query.keyword?t.infoMap[a]=e.query.keyword:t.infoMap={},this.query.registTimeBegin&&(t.registTimeBegin=new Date(this.query.registTimeBegin.getTime())),this.query.registTimeEnd&&(t.registTimeEnd=new Date(this.query.registTimeEnd.getTime())),this.query.lastLoginTimeBegin&&(t.lastLoginTimeBegin=new Date(this.query.lastLoginTimeBegin.getTime())),this.query.lastLoginTimeEnd&&(t.lastLoginTimeEnd=new Date(this.query.lastLoginTimeEnd.getTime())),e.axios.post("/proxy/report-business/booking/v2/api/userManagement/queryWeekRegisterList/"+this.pageInfo.currPage+"/"+this.pageInfo.pageSize,t).then(function(t){if(t&&t.data&&t.data.datas){var a=t.data.datas,o={0:"待审批",1:"使用中",2:"停用",3:"不通过"};a.forEach(function(e){e.registTime&&e.registTime.length>0&&(e.registTime=moment(e.registTime).format("YYYY-MM-DD HH:mm:ss")),e.lastLoginTime&&e.lastLoginTime.length>0&&(e.lastLoginTime=moment(e.lastLoginTime).format("YYYY-MM-DD HH:mm:ss")),void 0!==e.status&&void 0!==o[e.status]?e.statusTxt=o[e.status]:e.statusTxt="--"}),e.list=a,e.pageInfo=t.data.pageInfo}}).catch(function(e){console.log(e)})}}},De={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/user"}},[e._v("用户管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("运营用户查询")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container weeklist"},[a("div",{staticClass:"page_search user_search"},[a("div",{staticClass:"seach_date_picker",staticStyle:{width:"500px",display:"inline-block"}},[e._v("注册时间：\n                            "),a("div",{staticStyle:{display:"inline-block"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"开始时间"},model:{value:e.query.registTimeBegin,callback:function(t){e.$set(e.query,"registTimeBegin",t)},expression:"query.registTimeBegin"}})],1),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("至")]),e._v(" "),a("div",{staticStyle:{display:"inline-block"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"结束时间"},model:{value:e.query.registTimeEnd,callback:function(t){e.$set(e.query,"registTimeEnd",t)},expression:"query.registTimeEnd"}})],1)]),e._v(" "),a("div",{staticClass:"seach_date_picker",staticStyle:{width:"520px",display:"inline-block"}},[e._v("最近登录时间：\n                            "),a("div",{staticStyle:{display:"inline-block"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"开始时间"},model:{value:e.query.lastLoginTimeBegin,callback:function(t){e.$set(e.query,"lastLoginTimeBegin",t)},expression:"query.lastLoginTimeBegin"}})],1),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("至")]),e._v(" "),a("div",{staticStyle:{display:"inline-block"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"结束时间"},model:{value:e.query.lastLoginTimeEnd,callback:function(t){e.$set(e.query,"lastLoginTimeEnd",t)},expression:"query.lastLoginTimeEnd"}})],1)]),e._v(" "),a("div",{staticStyle:{display:"inline-block",width:"26px",height:"30px","border-radius":"4px","background-color":"#fff"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])]),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{prop:"accountNum",label:"用户名",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobileno",label:"手机号码",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"schoolInfoName",label:"所属机构",width:"360"}}),e._v(" "),a("el-table-column",{attrs:{prop:"registTime",label:"注册时间",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastLoginTime",label:"最近登录时间",width:"218"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("span",{staticClass:"el-icon-view",on:{click:function(a){e.viewAccount(t.row)}}})])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:"查看用户",visible:e.dialogAccountVisible,width:"30%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogAccountVisible=t}}},[a("div",{staticClass:"account_detail"},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("用户名")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.accountNum))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("昵称")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.nickName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("姓名")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.userName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("性别")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},["F"==e.accountData.gender?a("div",{},[e._v("女")]):e._e(),e._v(" "),"M"==e.accountData.gender?a("div",{},[e._v("男")]):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("联系手机")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.mobileno))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("电子邮箱")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.email?e.accountData.email:"----"))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("所属单位")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.schoolInfoName))])])],1),e._v(" "),e.accountData.classTag&&""!=e.accountData.classTag?a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("班级")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.classTag))])])],1):e._e(),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("用户类型")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},["1"===e.accountData.registerUserType?a("div",[e._v("C端用户")]):e._e(),"2"===e.accountData.registerUserType?a("div",[e._v("B端用户")]):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("状态")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[0===e.accountData.status||"0"===e.accountData.status?a("div",[e._v("待审批")]):e._e(),e._v(" "),1===e.accountData.status||"1"===e.accountData.status?a("div",[e._v("使用中")]):e._e(),e._v(" "),2===e.accountData.status||"2"===e.accountData.status?a("div",[e._v("停用")]):e._e(),e._v(" "),3===e.accountData.status||"3"===e.accountData.status?a("div",[e._v("不通过")]):e._e()])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAccountVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Ae=a("VU/8")($e,De,!1,function(e){a("PBWd")},null,null).exports,Le=a("QEZS"),Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/user"}},[e._v("用户管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("角色管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search"},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"check_all_item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"check_box_all",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{click:e.checkedAll,change:function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s}}}),a("span",[e._v("全选")])])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:e.batchDelete}},[e._v("删除")])],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:e.newRole}},[e._v("新建角色")])],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"角色名"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword","string"==typeof t?t.trim():t)},expression:"query.keyword"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleDescription",label:"角色说明",width:"750"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.editRole(t.row)}}},[e._v("修改角色")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.associatePermissions(t.row)}}},[e._v("关联权限")])]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pageInfo.total>10,expression:"pageInfo.total>10"}],staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:e.formTitle,visible:e.dialogVisible,"lock-scroll":!1,"before-close":e.roleFormExit},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"roleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"角色名","label-width":e.formLabelWidth,prop:"roleName"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"",maxlength:e.formLength.roleName},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName","string"==typeof t?t.trim():t)},expression:"form.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色说明","label-width":e.formLabelWidth,prop:"roleDescription"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容","auto-complete":"off",maxlength:e.formLength.roleDescription},model:{value:e.form.roleDescription,callback:function(t){e.$set(e.form,"roleDescription","string"==typeof t?t.trim():t)},expression:"form.roleDescription"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.roleFormExit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleHandle}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"permission_dialog",attrs:{title:"关联权限",visible:e.permissionsDialogVisible,"lock-scroll":!1},on:{"update:visible":function(t){e.permissionsDialogVisible=t}}},[a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"dialog-left"},[a("ul",{staticClass:"permissions_list"},e._l(e.permissions.allList,function(t,o){return a("li",{class:{active:t.isActive},on:{click:function(t){e.selectLeftRole(o)}}},[a("span",[e._v(e._s(t.name))])])}))]),e._v(" "),a("div",{staticClass:"dialog-middle"},[a("div",{staticClass:"service"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){e.getPermissionsByService(e.permissions.value)}},model:{value:e.permissions.value,callback:function(t){e.$set(e.permissions,"value",t)},expression:"permissions.value"}},e._l(e.permissions.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.message,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"btn_group"},[a("div"),e._v(" "),a("ul",[a("li",[a("span",{on:{click:function(t){e.shiftToRight("ALL")}}},[e._v("全部右移 "),a("i",{staticClass:"el-icon-d-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:e.shiftToRight}},[e._v("右移 "),a("i",{staticClass:"el-icon-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:e.shiftToLeft}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v(" 撤销")])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.shiftToLeft("ALL")}}},[a("i",{staticClass:"el-icon-d-arrow-left"}),e._v(" 全部撤销")])])]),e._v(" "),a("div")])]),e._v(" "),a("div",{staticClass:"dialog-right"},[a("ul",{staticClass:"permissions_list"},e._l(e.permissions.list,function(t,o){return a("li",{class:{active:t.isActive},on:{click:function(t){e.selectRightRole(o)}}},[a("span",[e._v(e._s(t.name))])])}))])]),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(t){e.permissionsDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAssociatePermissions}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Me=function(e){a("wvYg")},Ee=a("VU/8")(Le.a,Pe,!1,Me,null,null).exports,Fe=a("XScV"),Ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/user"}},[e._v("用户管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("用户组管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search"},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"check_all_item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"check_box_all",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{click:e.checkedAll,change:function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s}}}),a("span",[e._v("全选")])])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:e.batchDelete}},[e._v("删除")])],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:e.newUserType}},[e._v("新建用户组")])],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userGroupName",label:"用户组",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"人数",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"userGroupDetailList",query:{id:t.row.id}}}},[e._v("\n                                "+e._s(t.row.countPepole)+"\n                            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"formatCreateTime",label:"添加时间",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"添加人",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.userGroupDetail(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.editUserGroup(t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{staticClass:"new_account",attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"lock-scroll":!1,"before-close":e.userGroupFormExit},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"userGroupForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户组名称","label-width":e.formLabelWidth,prop:"userGroupName"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"必须为汉字",maxlength:e.formLength.userGroupName},model:{value:e.form.userGroupName,callback:function(t){e.$set(e.form,"userGroupName","string"==typeof t?t.trim():t)},expression:"form.userGroupName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组类型","label-width":e.formLabelWidth}},[a("el-select",{model:{value:e.form.userGroupType,callback:function(t){e.$set(e.form,"userGroupType",t)},expression:"form.userGroupType"}},[a("el-option",{attrs:{label:"B端",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"C端",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"不超过200个字符",maxlength:e.formLength.comment},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.userGroupFormExit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveUserGroupHandle}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"用户组详情",visible:e.dialogUserGroupVisible,width:"36%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogUserGroupVisible=t}}},[a("div",{staticClass:"account_detail"},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("用户组名称")])]),e._v(" "),a("el-col",{attrs:{span:14,offset:2}},[a("div",{},[e._v(e._s(e.detail.userGroupName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("用户组类型")])]),e._v(" "),a("el-col",{attrs:{span:14,offset:2}},[a("div",{},[e._v(e._s(e.detail.userGroupType))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("备注")])]),e._v(" "),a("el-col",{attrs:{span:14,offset:2}},[a("div",{},[e._v(e._s(e.detail.comment?e.detail.comment:"----"))])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogUserGroupVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Re=function(e){a("SqGG")},Ve=a("VU/8")(Fe.a,Ue,!1,Re,null,null).exports,Oe={name:"userGroupDetailList",components:{bHeader:g.a,bFooter:h.a},data:function(){return{list:[],pageInfo:{total:0,currPage:1,pageSize:10},countPepoleInfo:{},info:{},id:this.$route.query.id,userTypeMap:{},dialogAccountVisible:!1,accountData:{}}},created:function(){this.getUserGroup(),this.getUserGroupById(),this.getInfo()},methods:{getLoginId:function(){var e=sessionStorage.getItem("userId");return e||""},getUserGroupById:function(){var e=this;e.axios.get("/proxy/report-business//booking/v2/api/userManagement/getUserGroupById/"+e.id).then(function(t){t&&t.data&&t.data.data&&(e.info=t.data.data)}).catch(function(e){})},getUserGroup:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/userManagement/userGroup/list").then(function(t){t&&t.data&&t.data.datas.length>0&&t.data.datas.forEach(function(t){void 0!==t.userGroupType&&void 0!==t.userGroupName&&(e.userTypeMap[t.userType]=t.userGroupName)})}).catch(function(e){})},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getInfo()},viewAccount:function(e){var t=this,a=e.id;t.axios.get("/proxy/report-business/booking/v2/api/userManagement/queryByUserId/"+a).then(function(e){if(e&&e.data&&"200"==e.data.code){if(t.accountData=e.data.data,void 0!==t.accountData.userType){var a=t.accountData.userType;t.accountData.userTypeName=t.userTypeMap[a]}t.dialogAccountVisible=!0}}).catch(function(e){console.log(e)})},getInfo:function(){var e=this,t=this.pageInfo.currPage,a=this.pageInfo.pageSize,o=this.id;e.axios.get("/proxy/report-business/booking/v2/api/userManagement/userGroup/getGroupUserList/"+o+"/"+t+"/"+a).then(function(t){t&&t.data&&(t.data.datas&&(e.list=t.data.datas),t.data.countPepoleInfo&&(e.countPepoleInfo=t.data.countPepoleInfo),t.data.pageInfo&&(e.pageInfo=t.data.pageInfo))}).catch(function(e){console.log(e)})}}},ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/user"}},[e._v("用户管理")]),e._v(" > "),a("router-link",{attrs:{to:"/usergrouplist"}},[e._v("用户组管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("查看用户组")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search"},[a("el-col",{attrs:{span:2}},[a("span",[e._v(e._s(e.info.userGroupName))]),e._v(" "),e.info.countPepole?a("span",[e._v("("+e._s(e.info.countPepole)+")")]):e._e()]),e._v(" "),a("el-col",{attrs:{span:4}},[e._v("\n                    类别："+e._s(e.info.userGroupType)+"\n                ")]),e._v(" "),a("el-col",{attrs:{span:4}},[e._v("\n                    备注："+e._s(e.info.comment)+"\n                ")]),e._v(" "),a("el-col",{attrs:{span:4}},[e._v("\n                    添加时间："+e._s(e._f("formatDate")(e.info.createTime))+"\n                ")])],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"账户ID",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userGroupName",label:"用户组",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountNum",label:"账户名",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"schoolInfoName",label:"所属机构",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"formatRegistTime",label:"注册时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.registTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.viewAccount(t.row)}}},[e._v("查看")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:"查看账户",visible:e.dialogAccountVisible,width:"30%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogAccountVisible=t}}},[a("div",{staticClass:"account_detail"},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("用户名")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.accountNum))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("昵称")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.nickName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("姓名")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.userName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("性别")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},["F"==e.accountData.gender?a("div",{},[e._v("女")]):e._e(),e._v(" "),"M"==e.accountData.gender?a("div",{},[e._v("男")]):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("联系手机")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.mobileno))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("电子邮件")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.mobile?e.accountData.mobile:"----"))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("所属单位")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.schoolInfoName))])])],1),e._v(" "),e.accountData.tags&&""!=e.accountData.tags?a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("班级")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.tags))])])],1):e._e(),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("用户角色")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.accountData.userTypeName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("状态")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[0===e.accountData.status||"0"===e.accountData.status?a("div",[e._v("待审批")]):e._e(),e._v(" "),1===e.accountData.status||"1"===e.accountData.status?a("div",[e._v("使用中")]):e._e(),e._v(" "),2===e.accountData.status||"2"===e.accountData.status?a("div",[e._v("停用")]):e._e(),e._v(" "),3===e.accountData.status||"3"===e.accountData.status?a("div",[e._v("不通过")]):e._e()])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAccountVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAccountVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Be=a("VU/8")(Oe,ze,!1,function(e){a("nahr")},null,null).exports,je=[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!0,"large","huge"]}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],["link"]],He={name:"newsList",data:function(){return{tableData:[],currentPage:1,total:0,isCheckedAll:!1,checkboxModel:[],search:"",addNewsDialog:!1,addNewsform:{title:"",source:"",newsContent:""},actionUrl:"/zuul/proxy/report-business/booking/v2/api/infoManagement/news/upload",rules:{title:[{required:!0,message:"请输入活动名称",trigger:"blur"},{max:50,message:"不能超过50个字符",trigger:"blur"}],source:[{required:!0,message:"请输入来源",trigger:"blur"},{max:50,message:"不能超过25个字符",trigger:"blur"}],newsContent:[{required:!0,message:"请输入正文",trigger:"blur"},{max:5e3,message:"不能超过5000个字符",trigger:"blur"}]},editorOption:{modules:{toolbar:{container:je}}},fileInfo:{},userId:"",previewDialog:!1,previewList:{},previewContent:"",previewPicUrl:""}},computed:{editor:function(){return this.$refs.myQuillEditor.quill},header:function(){return{Authorization:sessionStorage.getItem("token")}}},mounted:function(){this.userId=sessionStorage.getItem("userId"),this.getNodeData()},methods:{getNodeData:function(e,t,a){var o=this,s=void 0==e?1:e,i=void 0==a?"":o.search;o.axios.get("/proxy/report-business/booking/v2/api/infoManagement/news?currPage="+s+"&title="+i).then(function(e){e.data.data&&e.data.data.length>0?(o.tableData=e.data.data,o.currentPage=e.data.pageInfo.currPage,o.total=e.data.pageInfo.total):o.tableData=[]}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.getNodeData(e,10,this.search)},checkedAll:function(){var e=this;e.isCheckedAll?(e.checkboxModel=[],e.tableData.forEach(function(t,a){Number(t.status)||e.checkboxModel.push(t.id)})):e.checkboxModel=[]},fnPreviewNotice:function(e){var t=this;t.previewDialog=!0,t.previewList=e,t.axios.get("/proxy/report-business/booking/v2/api/infoManagement/news/detail/"+e.id).then(function(e){200==e.data.code?(t.previewContent=e.data.data.newsContent,t.previewPicUrl=e.data.data.picUrl):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},beforeUpload:function(e){var t="image/jpg"==e.type,a="image/jpeg"==e.type,o=(e.type,e.type,e.type,e.size/1024<300);return a&&!t||this.$message.error("上传文件只能是 jpg 、jpeg格式!"),o||this.$message.error("上传文件大小不能超过 300KB!"),(t||a)&&o},handleSuccess:function(e,t,a){500!=e.code?this.fileInfo=e.data:this.$message.error(e.msg)},handlerError:function(e){500!=e.code||this.$message.error(e.msg)},addNotice:function(){this.addNewsDialog=!0},delNotice:function(){var e=this;0!=e.checkboxModel.length?e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/infoManagement/news/",{data:e.checkboxModel,headers:{"Content-type":"application/json"}}).then(function(t){200==t.data.code?(e.$message.success(t.data.msg),e.getNodeData(),e.isCheckedAll=!1,e.checkboxModel=[]):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除"),e.isCheckedAll=!1,e.checkboxModel=[]}):e.$message.error("没有可以删除的数据")},fnSearch:function(e,t,a,o){this.getNodeData(t,10,this.search)},setTop:function(e){var t=this,a=this,o=e.id;a.$prompt("请输入1~12的置顶排序数值","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputPattern:/^[0-9]+$/,customClass:"settopDialog",inputErrorMessage:"请输入数值"}).then(function(e){var t=e.value;a.axios.put("/proxy/report-business/booking/v2/api/infoManagement/news/"+o+"/"+t+"/top").then(function(e){200==e.data.code?(a.$message.success(e.data.msg),a.getNodeData()):a.$message.error(e.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},unTop:function(e){var t=this,a=e.id;t.axios.put("/proxy/report-business/booking/v2/api/infoManagement/news/"+a+"/unTop").then(function(e){200==e.data.code?(t.$message.success(e.data.msg),t.getNodeData()):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},onEditorReady:function(e){},submitForm:function(e){var t=this,a=!1,o=t.addNewsform;o.fileInfo=t.fileInfo,o.creator=t.userId,/<img(?:.|\s)*?>/g.test(t.addNewsform.newsContent)?t.$message.error("正文内容含有图片，请从添加图片处上传图片！"):t.$refs.addNewsform.validate(function(e){if(!e)return!1;a||(a=!0,t.axios.post("/proxy/report-business/booking/v2/api/infoManagement/news/insertOrUpNews",t.addNewsform).then(function(e){a=!1,200==e.data.code?(t.addNewsDialog=!1,t.$message.success(e.data.msg),location.reload()):t.$message.error(e.data.msg)}).catch(function(e){a=!1,console.log(e)}))})},resetForm:function(e){this.$refs.addNewsform.resetFields(),this.addNewsDialog=!1},closeDialog:function(e){this.$refs.addNewsform.resetFields()}},components:{bFooter:h.a,bHeader:g.a,quillEditor:O.quillEditor},watch:{checkboxModel:{handler:function(e,t){var a=[];this.tableData.forEach(function(e,t){Number(e.status)||a.push(e)}),this.isCheckedAll=this.checkboxModel.length==a.length},deep:!0}}},Ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/info"}}},[e._v("信息管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("新闻信息管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("div",{staticClass:"left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{change:[function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s},e.checkedAll]}}),e._v(" "),a("span",{staticClass:"label-span"},[e._v("全选")])]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.delNotice}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.addNotice}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{placeholder:"请输入标题"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.fnSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fnSearch},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[Number(t.row.status)?a("input",{staticClass:"container-checkbox",attrs:{type:"checkbox",disabled:""},domProps:{value:t.row.id}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(Number(t.row.status>0)?"置顶":"完成"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"300","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updator",label:"编辑人",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.updator?t.row.updator:"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"order",label:"序号",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.order?t.row.order:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("i",{staticClass:"operator-icon el-icon-view",on:{click:function(a){e.fnPreviewNotice(t.row)}}})]),e._v(" "),Number(t.row.status)>0?a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"撤回",placement:"top"}},[a("i",{staticClass:"operator-icon cancel-top-icon",on:{click:function(a){e.unTop(t.row)}}})]):e._e(),e._v(" "),0==Number(t.row.status)?a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"置顶",placement:"top"}},[a("i",{staticClass:"operator-icon set-top-icon",on:{click:function(a){e.setTop(t.row)}}})]):e._e()]}}])})],1),e._v(" "),e.tableData&&e.tableData.length>0?a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{staticClass:"new-dialog",attrs:{title:"新建编辑新闻",visible:e.addNewsDialog,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.addNewsDialog=t},close:function(t){e.closeDialog(e.addNewsform)}}},[a("div",[a("el-form",{ref:"addNewsform",attrs:{model:e.addNewsform,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入标题不超过50个汉字"},model:{value:e.addNewsform.title,callback:function(t){e.$set(e.addNewsform,"title","string"==typeof t?t.trim():t)},expression:"addNewsform.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"来源",prop:"source"}},[a("el-input",{attrs:{placeholder:"请输入来源超过25个汉字"},model:{value:e.addNewsform.source,callback:function(t){e.$set(e.addNewsform,"source","string"==typeof t?t.trim():t)},expression:"addNewsform.source"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"添加图片"}},[a("div",{staticClass:"upload-box"},[a("el-input",{attrs:{disabled:!0,placeholder:"限jpg格式，大小不超过300K"}}),e._v(" "),a("el-upload",{ref:"“upload”",staticClass:"ativity-upload",attrs:{id:"ativity-upload",action:e.actionUrl,headers:e.header,"on-success":e.handleSuccess,"on-error":e.handlerError,"before-upload":e.beforeUpload,limit:1}},[a("div",{staticClass:"upload-icon"},[e._v("浏览")])])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"正文",prop:"newsContent"}},[a("quill-editor",{ref:"myQuillEditor",staticClass:"editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.addNewsform.newsContent,callback:function(t){e.$set(e.addNewsform,"newsContent","string"==typeof t?t.trim():t)},expression:"addNewsform.newsContent"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetForm(e.addNewsform)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitForm(e.addNewsform)}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"preview-dialog",attrs:{title:"查看新闻信息",visible:e.previewDialog,center:""},on:{"update:visible":function(t){e.previewDialog=t}}},[a("ul",{staticClass:"preview-list"},[a("li",{staticClass:"preview-item"},[e._v(e._s(e.previewList.title))]),e._v(" "),a("li",{staticClass:"preview-item"},[e._v("发布时间："+e._s(e.previewList.createTime))]),e._v(" "),a("li",{staticClass:"preview-item preview-item-content"},[e.previewPicUrl?a("img",{staticClass:"news-item-image",attrs:{src:e.previewPicUrl}}):e._e(),e._v(" "),a("div",{staticClass:"ql-editor",domProps:{innerHTML:e._s(e.previewContent)}})])])])],1)},staticRenderFns:[]};var We=a("VU/8")(He,Ge,!1,function(e){a("mkI6")},null,null).exports,Qe={name:"activityList",data:function(){return{managementData:[],templateData:[]}},mounted:function(){this.getManagement(),this.getTemplate()},methods:{getManagement:function(e,t){var a=this;a.axios.get("/proxy/report-business/booking/v2/api/eventRunManagement/findShortList/5").then(function(e){200==e.data.code&&(_.each(e.data.datas,function(e){var t,a=new Date;e.nodevo&&(e.nodeName=e.nodevo.nodeName,e.baomingjieduan=e.nodevo.idx+"/"+e.nodevo.totalNode,e.baomingbi=e.nodevo.alreadyNum&&e.nodevo.shouldNum?Math.round(e.nodevo.alreadyNum/e.nodevo.shouldNum*100):0,e.nodevo.startTime&&(t=new Date(e.nodevo.startTime.substr(0,e.nodevo.startTime.indexOf("T"))),e.jieduanshengyu=Math.round((a-t)/864e5)))}),a.managementData=e.data.datas)}).catch(function(e){console.log(e)})},getTemplate:function(e,t){var a=this;a.axios.get("/proxy/report-business/booking/v2/api/eventManagement/eventTemp/list/1/100").then(function(e){if(200==e.data.code){var t=_.compact(_.map(e.data.datas,function(e){return e.baomingjieduan=_.random(0,100),e.baomingbi=_.random(0,100),e.jieduanshengyu=_.random(0,100),1==e.type?e:null}));t.length>5?a.templateData=t.slice(0,5):t.length<=5&&(a.templateData=t)}}).catch(function(e){console.log(e)})},opActive:function(e,t){var a,o=this;o.axios.get("/proxy/report-business/booking/v2/api/eventRunManagement/eventInstance/"+e.instanceId).then(function(e){e&&e.data&&e.data.data&&((a=e.data.data).status=1,o.axios.put("/proxy/report-business/booking/v2/api/eventRunManagement/eventInstance/"+sessionStorage.getItem("userId")+"/"+a.instanceId,a).then(function(e){}).catch(function(e){console.log(e)}))}).catch(function(e){console.log(e)})},newActive:function(e){this.$store.eventTemplateId=e.eventId,this.$router.push({name:"activeList"})},editActpl:function(e){this.$store.eventId=e.eventId,this.$router.push({name:"actplEdit"})},changeTepmplateType:function(e){var t=this;t.$confirm("操作将取销该模板的置顶，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){t.axios.put("/proxy/report-business/booking/v2/api/eventManagement/eventTemplateType/"+e.eventId+"/0").then(function(e){200==e.data.code&&t.getTemplate()}).catch(function(e){console.log(e)})}).catch(function(){})}},components:{bFooter:h.a,bHeader:g.a}},Ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30 "},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("活动管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"act_item_box"},[a("div",{staticClass:"act_item pos_rl fl clearfix"},[a("h1",[e._v("运行管理")]),e._v(" "),a("div",{staticClass:"act_list"},e._l(e.managementData,function(t){return a("div",{key:t.id,staticClass:"act_subitem"},[a("div",{staticClass:"act_txt fl"},[a("h2",[e._v(e._s(t.eventName))]),e._v(" "),a("p",[e._v(e._s(t.nodeName)+"："),a("span",[e._v(e._s(t.baomingjieduan))])]),e._v(" "),a("p",[e._v("参加比："),a("span",[e._v(e._s(t.baomingbi)+"%")])]),e._v(" "),a("p",{staticClass:"mgb0"},[e._v("阶段剩余时间："),a("span",[e._v(e._s(t.jieduanshengyu)+"天")])])]),e._v(" "),a("div",{staticClass:"fr subitem_btns"},[a("button",{on:{click:function(a){e.opActive(t,2)}}},[e._v("暂停")]),e._v(" "),a("button",{staticClass:"white_btn",on:{click:function(a){e.opActive(t,4)}}},[e._v("结束")])]),e._v(" "),a("div",{staticClass:"clearfix"})])})),e._v(" "),a("router-link",{attrs:{to:"/activeList"}},[a("a",{staticClass:"more fr",attrs:{href:"#"}})])],1),e._v(" "),a("div",{staticClass:"act_item pos_rl fr"},[a("h1",[e._v("模板管理")]),e._v(" "),a("div",{staticClass:"act_list"},e._l(e.templateData,function(t){return a("div",{key:t.id,staticClass:"act_subitem"},[a("div",{staticClass:"act_txt fl"},[a("h2",[e._v(e._s(t.eventName))]),e._v(" "),a("p",[e._v("报名阶段："),a("span",[e._v(e._s(t.baomingjieduan))])]),e._v(" "),a("p",[e._v("报名比："),a("span",[e._v(e._s(t.baomingbi)+"%")])]),e._v(" "),a("p",{staticClass:"mgb0"},[e._v("阶段剩余时间："),a("span",[e._v(e._s(t.jieduanshengyu)+"天")])])]),e._v(" "),a("div",{staticClass:"fr subitem_btns"},[a("button",{on:{click:function(a){e.newActive(t)}}},[e._v("新建活动")]),e._v(" "),a("button",{staticClass:"white_btn",on:{click:function(a){e.editActpl(t)}}},[e._v("修改")]),e._v(" "),a("button",{staticClass:"white_btn",on:{click:function(a){e.changeTepmplateType(t)}}},[e._v("取消置顶")])]),e._v(" "),a("div",{staticClass:"clearfix"})])})),e._v(" "),a("router-link",{attrs:{to:"/actplList"}},[a("a",{staticClass:"more fr",attrs:{href:"#"}})]),e._v(" "),a("div",{staticClass:"clearfix"})],1),e._v(" "),a("div",{staticClass:"clearfix"})])])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var Je=a("VU/8")(Qe,Ye,!1,function(e){a("9jnP")},null,null).exports,Ke=a("GK17"),Xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("服务管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search"},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"check_all_item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"check_box_all",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{click:e.checkedAll,change:function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s}}}),a("span",[e._v("全选")])])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:e.batchDelete}},[e._v("删除服务")])],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:e.newService}},[e._v("新建服务")])],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{staticClass:"search_type",model:{value:e.query.searchType,callback:function(t){e.$set(e.query,"searchType",t)},expression:"query.searchType"}},[a("el-option",{attrs:{label:"服务名",value:"message"}}),e._v(" "),a("el-option",{attrs:{label:"映射名",value:"code"}}),e._v(" "),a("el-option",{attrs:{label:"服务ID",value:"id"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"请输入关键字"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword","string"==typeof t?t.trim():t)},expression:"query.keyword"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"服务ID",width:"210"}}),e._v(" "),a("el-table-column",{attrs:{prop:"message",label:"服务名",width:"320"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"映射名",width:"285"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.apiDetail(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.editService(t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pageInfo.total>10,expression:"pageInfo.total>10"}],staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:e.formTitle,visible:e.dialogVisible,"lock-scroll":!1,"before-close":e.roleFormExit},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"roleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"服务名","label-width":e.formLabelWidth,prop:"message"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"",maxlength:e.formLength.message},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message","string"==typeof t?t.trim():t)},expression:"form.message"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"映射名","label-width":e.formLabelWidth,prop:"code"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"必须与配置的映射名一致",maxlength:e.formLength.code},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code","string"==typeof t?t.trim():t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务描述","label-width":e.formLabelWidth,prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容，不超过100字","auto-complete":"off",maxlength:e.formLength.description},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description","string"==typeof t?t.trim():t)},expression:"form.description"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.roleFormExit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveServiceHandle}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"service_dialog",attrs:{title:"服务详情",visible:e.detailDialogVisible,"lock-scroll":!1},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[a("div",{staticClass:"service_detail"},[a("el-row",{attrs:{gutter:1}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("服务名")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:2}},[a("div",{},[e._v(e._s(e.serviceDetail.message))])])],1),e._v(" "),a("el-row",{attrs:{gutter:1}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("映射名")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:2}},[a("div",{},[e._v(e._s(e.serviceDetail.code))])])],1),e._v(" "),a("el-row",{attrs:{gutter:1}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("服务描述")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:2}},[a("div",{},[e._v(e._s(e.serviceDetail.description))])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.detailDialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Ze=function(e){a("136l")},et=a("VU/8")(Ke.a,Xe,!1,Ze,null,null).exports,tt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"unopened-wrap"},[t("div",{staticClass:"full_screen"},[t("img",{staticClass:"unopened",attrs:{src:a("0Ysw")}}),this._v(" "),t("div",{staticClass:"home"},[t("router-link",{attrs:{to:"/"}},[t("a",{attrs:{href:"javascript:;"}},[this._v("返回首页")])])],1)])])])},staticRenderFns:[]};var at=a("VU/8")({name:"unopened",data:function(){return{}}},tt,!1,function(e){a("RExK")},null,null).exports,ot={name:"bPrivacy",components:{bFooter:h.a,bHeader:g.a},data:function(){return{}}},st={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"place"}),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"#"}},[e._v("用户隐私保护声明")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"center_align",attrs:{id:"middle"}},[a("h2",{staticClass:"Title font_bold"},[e._v("用户隐私保护声明")]),e._v(" "),e._m(0),e._v(" "),a("router-link",{attrs:{to:"/"}},[a("button",{staticClass:"step return"},[e._v("返回首页")])])],1)]),e._v(" "),a("bFooter")],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content no_border"},[a("p",[e._v("为深入贯彻落实习近平总书记系列讲话精神，响应党和国家关于“开展全民阅读，建设书香社会”的号召，推动“书香校园”建设，2017年8月，广东省教育厅、中共广东省委宣传部、广东省精神文明建设委员会办公室、广东省新闻出版广电局印发了《关于开展2017广东省“书香校园”创建系列活动的通知》（粤教思函[2017]73号），正式启动广东省“书香校园”创建系列活动，委托博雅优创（深圳）有限公司打造“书香在线”平台，提供全面支持。博雅优创（深圳）有限公司（以下称“我们”或“书香在线”）尊重并保护用户隐私，在您使用书香在线平台提供的服务时，我们将按照《书香在线用户隐私保护政策》（以下简称“本隐私政策”）收集、使用及共享您的个人信息。本隐私政策包含了我们收集、存储、使用、共享和保护您的个人信息的条款，我们希望通过本隐私政策向您清晰地介绍我们对您个人信息的处理方式，因此我们建议您完整地阅读本隐私政策，以帮助您了解维护自己隐私权的方式。")]),e._v(" "),a("p",[e._v("如果您不同意本隐私政策任何内容，您应立即停止使用书香在线产品或服务。当您使用书香在线提供的任一服务时，即表示您已同意我们按照本隐私政策来合法使用和保护您的个人信息。")]),e._v(" "),a("h3",[e._v("一、  适用范围")]),e._v(" "),a("p",[e._v("本隐私政策适用于书香在线提供的所有服务，您访问书香在线网站、客户端及未设独立隐私政策的关联公司网站及/或登录相关客户端使用书香在线提供的服务，均适用本隐私政策。需要特别说明的是，本隐私政策不适用于其他第三方向您提供的服务。")]),e._v(" "),a("h3",[e._v("二、  我们收集哪些信息")]),e._v(" "),a("p",[e._v("为了向您提供更好、更优、更个性化的服务，我们将根据您使用的服务收集您的如下信息：")]),e._v(" "),a("p",[e._v("1. 您向我们提供的信息。您在注册账户时，向我们提供的相关个人信息，例如电话号码、姓名、电子邮件、学号等；我们还会记录您在使用我们服务时提供的信息，例如您在书香在线客户端发布的信息、与书香在线客服联系时您提供的相关信息、您参与问卷调查时向我们发送的问卷答复信息等。")]),e._v(" "),a("p",[e._v("2. 在您使用服务过程中产生的信息。我们会根据您授予的权限，接收并记录您所使用的设备相关信息，这些设备信息包括：设备属性信息（如设备型号、操作系统版本、设备设置、唯一设备标识符等软硬件特征信息）、设备位置信息（如通过GPS、蓝牙或WIFI信号获得的位置信息）、设备连接信息（IP地址、电信运营商、使用的语言、访问日期和时间等）。")]),e._v(" "),a("p",[e._v("3. 来自第三方的信息。当您与使用我们服务的关联公司、书香在线合作伙伴之间互动时，为共同向您提供服务及改进服务质量的合理需要，我们将从关联公司、合作伙伴处接收关于您的体验或您与其互动的信息。")]),e._v(" "),a("h3",[e._v("三、  我们可能如何收集信息")]),e._v(" "),a("p",[e._v("我们或我们的第三方合作伙伴，可能通过cookies和web beacon收集和使用您的信息，并将该等信息储存为日志信息。我们使用自己的cookies和web beacon，目的是为您提供更个性化的用户体验和服务，并用于以下用途：")]),e._v(" "),a("p",[e._v("1. 记住您的身份。例如：cookies和web beacon有助于我们辨认您作为我们的注册用户的身份，或保存您向我们提供的有关您的喜好或其他信息。")]),e._v(" "),a("p",[e._v("2. 分析您使用我们服务的情况。例如，我们可利用cookies和web beacon来了解您使用我们的服务进行什么活动，或哪些服务最受您的欢迎。")]),e._v(" "),a("p",[e._v("3. 广告优化。Cookies和web beacon有助于我们根据您的信息，向您提供与您相关的广告而非进行普遍的广告投放。")]),e._v("\n                我们为上述目的使用cookies和web beacon的同时，可能将通过cookies和web beacon收集的非个人身份信息，经统计加工后提供给广告商或其他合作伙伴，用于分析用户如何使用我们的服务，并用于广告服务。"),a("p"),e._v(" "),a("p",[e._v("我们的产品和服务上可能会有广告商或其他合作方放置的cookies和web beacon。这些cookies和web beacon可能会收集与您相关的非个人身份信息，以用于分析用户如何使用该等服务、向您发送您可能感兴趣的广告，或用于评估广告服务的效果。这些第三方cookies和web beacon收集和使用该等信息，不受本隐私政策约束，而是受相关使用者的隐私政策约束，我们不对第三方的cookies或web beacon承担责任。")]),e._v(" "),a("p",[e._v("您可以通过终端设备设置拒绝或管理cookies或web beacon。但请注意，如果停用cookies或web beacon，您有可能无法享受最佳的服务体验，某些服务也可能无法正常使用。同时，您还会收到同样数量的广告，但这些广告与您的相关性会降低。")]),e._v(" "),a("h3",[e._v("四、  我们如何使用收集到的信息")]),e._v(" "),a("p",[e._v("收集您的信息是为了向您提供服务及提升服务质量，为了实现这一目的，我们会把您的信息用于下列用途：")]),e._v(" "),a("p",[e._v("1. 向您提供您使用的各项服务，并维护、改进这些服务。")]),e._v(" "),a("p",[e._v("2. 向您推荐您可能感兴趣的内容，包括但不限于向您发出产品和服务信息，或通过系统向您展示个性化的第三方推广信息，或者在征得您同意的情况下与书香在线的合作伙伴共享信息以便他们向您发送有关其产品和服务的信息。如您不希望接收上述信息，可以通过书香在线客服与我们取得联系。")]),e._v(" "),a("p",[e._v("3. 我们可能使用您的个人信息以预防、发现、调查欺诈、危害安全、非法或违反与我们或其关联方协议、政策或规则的行为，以保护您、我们的其他用户、我们或我们关联方的合法权益。")]),e._v(" "),a("p",[e._v("4. 我们可能会将来自某项服务的信息与来自其他服务的信息结合起来，以便为您提供服务、个性化内容和建议。")]),e._v(" "),a("p",[e._v("5. 经您许可的其他用途。")]),e._v(" "),a("p",[e._v("但无论如何，我们仅在本隐私政策所述目的所必需的期间和法律法规要求的时限内保留您的个人信息。")]),e._v(" "),a("h3",[e._v("五、  我们可能分享的信息")]),e._v(" "),a("p",[e._v("除以下情形外，未经您同意，我们以及我们的关联公司不会与任何第三方分享您的个人信息：")]),e._v(" "),a("p",[e._v("我们以及我们的关联公司，可能将您的个人信息与我们的关联公司、合作伙伴及第三方服务供应商、承包商及代理（例如代表我们发出电子邮件或推送通知的通讯服务提供商、为我们提供位置数据的地图服务供应商）分享（他们可能并非位于您所在的法域），用作下列用途：")]),e._v(" "),a("p",[e._v("1. 向您提供我们的服务；")]),e._v(" "),a("p",[e._v("2. 实现“我们如何使用收集到的信息”部分所述目的；")]),e._v(" "),a("p",[e._v("3. 履行我们在本隐私政策或书香在线其他产品的用户协议中的义务和行使我们的权利；")]),e._v(" "),a("p",[e._v("4. 理解、维护和改善我们的服务。")]),e._v(" "),a("p",[e._v("如我们或我们的关联公司与任何上述第三方分享您的个人信息，我们将努力确保该等第三方在使用您的个人信息时遵守本隐私政策及我们要求其遵守的其他适当的保密和安全措施。")]),e._v(" "),a("p",[e._v("随着我们业务的持续发展，我们以及我们的关联公司有可能进行合并、收购、资产转让或类似的交易，您的个人信息有可能作为此类交易的一部分而被转移。我们将在转移前通知您。")]),e._v(" "),a("p",[e._v("我们或我们的关联公司还可能为以下需要而保留、保存或披露您的个人信息：")]),e._v(" "),a("p",[e._v("1. 遵守适用的法律法规；")]),e._v(" "),a("p",[e._v("2. 遵守法院命令或其他法律程序的规定；")]),e._v(" "),a("p",[e._v("3. 遵守相关政府机关的要求；")]),e._v(" "),a("p",[e._v("为遵守适用的法律法规、维护社会公共利益，或保护我们的客户、我们或我们的集团公司、其他用户或雇员的人身和财产安全或合法权益所合理必需的用途。")]),e._v(" "),a("h3",[e._v("六、  您如何管理自己的信息")]),e._v(" "),a("p",[e._v("我们提供了便捷的方法，让您可以查询、更正及删除自己的账户信息等使用我们服务时您提供的个人信息。")]),e._v(" "),a("p",[e._v("如果您认为我们存在违反法律、行政法规的规定或者与您的约定收集、使用您个人信息的，您可以通过书香在线客服与我们取得联系。")]),e._v(" "),a("h3",[e._v("七、  您的个人信息保护")]),e._v(" "),a("p",[e._v("我们非常重视您的个人信息安全。我们努力采取各种合理的物理、电子和管理方面的安全措施来保护您的个人信息，并尽最大合理努力使您的个人信息不会被泄漏、毁损或者丢失，包括但不限于SSL、信息加密存储、数据中心的访问控制。我们对可能接触到您个人信息的员工或外包人员也采取了严格管理，包括但不限于采取信息访问权限控制、与接触个人信息的人员签署保密协议、监控该等人员的操作情况等措施。")]),e._v(" "),a("p",[e._v("书香在线账户信息（包括网站及客户端账号名、密码信息）为非常重要的个人信息，请您妥善设置、保管您的账号名及密码信息。我们将通过备份、对密码进行加密等安全措施以保护您的账户信息等个人信息不丢失、不被滥用和变造。尽管有前述安全措施，但同时也请您理解在信息网络上不存在“完善的安全措施”。")]),e._v(" "),a("p",[e._v("请注意，单独的设备信息等是无法与任何特定个人直接建立联系的数据，不属于个人信息。如果我们将这类非个人信息与其他信息结合用于识别自然人个人身份，或者将其与个人信息结合使用，则在结合使用期间，此类设备信息将被视为个人信息。")]),e._v(" "),a("h3",[e._v("八、  未成年人保护")]),e._v(" "),a("p",[e._v("我们重视未成年人的个人信息保护，如您为未成年人，建议您请您的监护人仔细阅读本隐私政策，并在征得您的监护人同意的前提下使用我们的服务或向我们提供信息。")]),e._v(" "),a("h3",[e._v("九、  商业信息")]),e._v(" "),a("p",[e._v("我们可能使用您的相关信息，向您提供与您更加相关的商业信息。")]),e._v(" "),a("p",[e._v("我们也可能使用您的信息，通过我们的服务、电子邮件或其他方式向您发送商业信息，提供或推广我们或第三方的商品或服务。")]),e._v(" "),a("p",[e._v("如您不希望我们将您的个人信息用作前述商业用途，您可通过书香在线客服与我们取得联系。")]),e._v(" "),a("h3",[e._v("十、  我们可能向您发送的邮件和信息")]),e._v(" "),a("p",[e._v("邮件和信息推送。您在使用我们的服务时，我们可能使用您的信息向您的设备发送电子邮件、新闻或推送通知。如您不希望收到这些信息，可以按照我们的相关提示，在设备上选择取消订阅。")]),e._v(" "),a("p",[e._v("与服务有关的公告。我们可能在必要时（例如因系统维护而暂停某一项服务时）向您发出与服务有关的公告。您可能无法取消这些与服务有关、性质不属于推广的公告。")]),e._v(" "),a("h3",[e._v("十一、 本政策的修订")]),e._v(" "),a("p",[e._v("我们可不定期修改本隐私政策，变更后的隐私政策将在修订生效前通过书香在线平台公告或以其他适当方式通知您。该等情况下，若您继续使用我们的服务，即表示同意受经修订的隐私政策的约束。")])])}]};var it=a("VU/8")(ot,st,!1,function(e){a("/7AR")},"data-v-385438b3",null).exports,rt={name:"bService",components:{bFooter:h.a,bHeader:g.a},data:function(){return{}}},nt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"place"}),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("用户服务协议")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"center_align",attrs:{id:"middle"}},[a("h2",{staticClass:"Title font_bold"},[e._v("用户服务协议")]),e._v(" "),e._m(0),e._v(" "),a("router-link",{attrs:{to:"/"}},[a("button",{staticClass:"step return"},[e._v("返回首页")])])],1)]),e._v(" "),a("bFooter")],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content no_border"},[a("h3",[e._v("一、  首部及导言")]),e._v(" "),a("p",[e._v("为深入贯彻落实习近平总书记系列讲话精神，响应党和国家关于“开展全民阅读，建设书香社会”的号召，推动“书香校园”建设，2017年8月，广东省教育厅、中共广东省委宣传部、广东省精神文明建设委员会办公室、广东省新闻出版广电局印发了《关于开展2017广东省“书香校园”创建系列活动的通知》（粤教思函[2017]73号），正式启动广东省“书香校园”创建系列活动，委托博雅优创（深圳）有限公司打造“书香在线”平台，提供全面支持。")]),e._v(" "),a("p",[e._v("欢迎您使用书香在线的服务！为使用书香在线的服务，您应当阅读并遵守《书香在线服务协议》（以下简称“本协议”），请您务必审慎阅读、充分理解各条款内容，特别是免除或者限制责任的条款、管辖与法律适用条款，以及开通或使用某项服务的单独协议。限制、免责条款可能以黑体加粗或加下划线的形式提示您重点注意。除非您已阅读并接受本协议所有条款，否则您无权使用书香在线提供的服务。您使用书香在线的服务即视为您已阅读并同意上述协议的约束。")]),e._v(" "),a("p",[e._v("如果您未满18周岁，请在法定监护人的陪同下阅读本协议，并特别注意未成年人使用条款。")]),e._v(" "),a("h3",[e._v("二、  协议的范围")]),e._v(" "),a("p",[e._v("1. 本协议是您与书香在线之间关于用户使用书香在线相关服务所订立的协议。“书香在线”是指博雅优创（深圳）有限公司及其相关服务可能存在的运营关联单位。“用户”是指使用书香在线相关服务的使用人，在本协议中更多地称为“您”。")]),e._v(" "),a("p",[e._v("2. 本协议项下的服务是指书香在线向用户提供的包括但不限于即时通讯、网络媒体、互联网增值、互动娱乐、电子商务和广告等产品及服务（以下简称“本服务”）。")]),e._v(" "),a("p",[e._v("3. 本协议内容同时包括《用户隐私保护声明》（链接地址： ）和《免责声明》（链接地址： ））,且您在使用书香在线某一特定服务时，该服务可能会另有单独的协议、相关业务规则等（以下统称为“单独协议”）。上述内容一经正式发布，即为本协议不可分割的组成部分，您同样应当遵守。您对前述任何业务规则、单独协议的接受，即视为您对本协议全部的接受。")]),e._v(" "),a("h3",[e._v("三、  帐号与密码安全")]),e._v(" "),a("p",[e._v("1. 您在使用书香在线的服务时可能需要注册一个帐号。")]),e._v(" "),a("p",[e._v("2. 书香在线特别提醒您应妥善保管您的帐号和密码。当您使用完毕后，应安全退出。因您保管不善可能导致遭受盗号或密码失窃，责任由您自行承担。")]),e._v(" "),a("h3",[e._v("四、  用户个人信息保护")]),e._v(" "),a("p",[e._v("1. 保护用户个人信息是书香在线的一项基本原则。书香在线将按照本协议及《隐私政策》（链接地址： ）的规定收集、使用、储存和分享您的个人信息。本协议对个人信息保护规定的内容与上述《隐私政策》有相冲突的，及本协议对个人信息保护相关内容未作明确规定的，均应以《隐私政策》的内容为准。")]),e._v(" "),a("p",[e._v("2. 您在注册帐号或使用本服务的过程中，可能需要填写一些必要的信息。若国家法律法规有特殊规定的，您需要填写真实的身份信息。若您填写的信息不完整，则无法使用本服务或在使用过程中受到限制。")]),e._v(" "),a("p",[e._v("3. 一般情况下，您可随时浏览、修改自己提交的信息，但出于安全性和身份识别（如号码申诉服务）的考虑，您可能无法修改注册时提供的初始注册信息及其他验证信息。")]),e._v(" "),a("p",[e._v("4. 书香在线将运用各种安全技术和程序建立完善的管理制度来保护您的个人信息，以免遭受未经授权的访问、使用或披露。")]),e._v(" "),a("p",[e._v("5. 书香在线不会将您的个人信息转移或披露给任何非关联的第三方，除非：")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("1) 相关法律法规或法院、政府机关要求；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("2) 为完成合并、分立、收购或资产转让而转移；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("3) 为提供您要求的服务所必需。")]),e._v(" "),a("p",[e._v('6. 书香在线非常重视对未成年人个人信息的保护。若您是18周岁以下的未成年人，在使用书香在线的服务前，应事先取得您家长或法定监护人（以下简称"监护人"）的书面同意。')]),e._v(" "),a("h3",[e._v("五、  使用本服务的方式")]),e._v(" "),a("p",[e._v("1. 除非您与书香在线另有约定，您同意本服务仅为您个人非商业性质的使用。")]),e._v(" "),a("p",[e._v("2. 您应当通过书香在线提供或认可的方式使用本服务。您依本协议条款所取得的权利不可转让。")]),e._v(" "),a("p",[e._v("3. 您不得使用未经书香在线授权的插件、外挂或第三方工具对本协议项下的服务进行干扰、破坏、修改或施加其他影响。")]),e._v(" "),a("h3",[e._v("六、  按现状提供服务")]),e._v(" "),a("p",[e._v("您理解并同意，书香在线的服务是按照现有技术和条件所能达到的现状提供的。书香在线会尽最大努力向您提供服务，确保服务的连贯性和安全性；但书香在线不能随时预见和防范法律、技术以及其他风险，包括但不限于不可抗力、病毒、木马、黑客攻击、系统不稳定、第三方服务瑕疵、政府行为等原因可能导致的服务中断、数据丢失以及其他的损失和风险。")]),e._v(" "),a("h3",[e._v("七、  自备设备")]),e._v(" "),a("p",[e._v("1. 您应当理解，您使用书香在线的服务需自行准备与相关服务有关的终端设备（如电脑、调制解调器等装置），并承担所需的费用（如电话费、上网费等费用）。")]),e._v(" "),a("p",[e._v("2. 您理解并同意，您使用本服务时会耗用您的终端设备和带宽等资源。")]),e._v(" "),a("h3",[e._v("八、  广告")]),e._v(" "),a("p",[e._v("1. 您同意书香在线可以在提供服务的过程中自行或由第三方广告商向您发送广告、推广或宣传信息（包括商业与非商业信息），其方式和范围可不经向您特别通知而变更。")]),e._v(" "),a("p",[e._v("2. 书香在线可能为您提供选择关闭广告信息的功能，但任何时候您都不得以本协议未明确约定或书香在线未书面许可的方式屏蔽、过滤广告信息。")]),e._v(" "),a("p",[e._v("3. 书香在线依照法律的规定对广告商履行相关义务，您应当自行判断广告信息的真实性并为自己的判断行为负责，除法律明确规定外，您因依该广告信息进行的交易或前述广告商提供的内容而遭受的损失或损害，书香在线不承担责任。")]),e._v(" "),a("p",[e._v("4. 您同意，对书香在线服务中出现的广告信息，您应审慎判断其真实性和可靠性，除法律明确规定外，您应对依该广告信息进行的交易负责。")]),e._v(" "),a("h3",[e._v("九、  收费服务")]),e._v(" "),a("p",[e._v("1. 书香在线服务包括免费、收费两种提供模式，如您使用收费服务，请遵守相关协议。")]),e._v(" "),a("p",[e._v("2. 书香在线可能根据实际需要对收费服务的收费标准、方式进行修改和变更，书香在线也可能会对部分免费服务开始收费。前述修改、变更或开始收费前，书香在线将在相应服务页面进行通知或公告。如果您不同意上述修改、变更或付费内容，则应停止使用该服务。")]),e._v(" "),a("h3",[e._v("十、  第三方提供的产品或服务")]),e._v(" "),a("p",[e._v("您在书香在线平台上使用第三方提供的产品或服务时，除遵守本协议约定外，还应遵守第三方的用户协议。书香在线和第三方对可能出现的纠纷在法律规定和约定的范围内各自承担责任。")]),e._v(" "),a("h3",[e._v("十一、 基于软件提供服务")]),e._v(" "),a("p",[e._v("若书香在线依托“软件”（包括但不限于网页、即时通讯工具、客户端等）向您提供服务，您还应遵守以下约定：")]),e._v(" "),a("p",[e._v("1. 您在使用本服务的过程中可能需要下载软件，对于这些软件，书香在线给予您一项个人的、不可转让及非排他性的许可。您仅可为访问或使用本服务的目的而使用这些软件。")]),e._v(" "),a("p",[e._v("2. 为了改善用户体验、保证服务的安全性及产品功能的一致性，书香在线可能会对软件进行更新。您应该将相关软件更新到最新版本，否则书香在线并不保证其能正常使用。")]),e._v(" "),a("p",[e._v("3. 书香在线可能为不同的终端设备开发不同的软件版本，您应当根据实际情况选择下载合适的版本进行安装。您可以直接从书香在线的网站上获取软件，也可以从得到书香在线授权的第三方获取。如果您从未经书香在线授权的第三方获取软件或与软件名称相同的安装程序，书香在线无法保证该软件能够正常使用，并对因此给您造成的损失不予负责。")]),e._v(" "),a("p",[e._v("4. 除非书香在线书面许可，您不得从事下列任一行为：")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("1) 删除软件及其副本上关于著作权的信息；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("2) 对软件进行反向工程、反向汇编、反向编译，或者以其他方式尝试发现软件的源代码；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("3) 对书香在线拥有知识产权的内容进行使用、出租、出借、复制、修改、链接、转载、汇编、发表、出版、建立镜像站点等；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("4) 对软件或者软件运行过程中释放到任何终端内存中的数据、软件运行过程中客户端与服务器端的交互数据，以及软件运行所必需的系统数据，进行复制、修改、增加、删除、挂接运行或创作任何衍生作品，形式包括但不限于使用插件、外挂或非经书香在线授权的第三方工具/服务接入软件和相关系统； ")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("5) 通过修改或伪造软件运行中的指令、数据，增加、删减、变动软件的功能或运行效果，或者将用于上述用途的软件、方法进行运营或向公众传播，无论这些行为是否为商业目的；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("6) 通过非书香在线开发、授权的第三方软件、插件、外挂、系统，登录或使用书香在线软件及服务，或制作、发布、传播非书香在线开发、授权的第三方软件、插件、外挂、系统。")]),e._v(" "),a("h3",[e._v("十二、 知识产权声明")]),e._v(" "),a("p",[e._v("1. 书香在线在本服务中提供的内容（包括但不限于网页、文字、图片、音频、视频、图表等）的知识产权归书香在线所有，用户在使用本服务中所产生的内容的知识产权归用户或相关权利人所有。")]),e._v(" "),a("p",[e._v("2. 除另有特别声明外，书香在线提供本服务时所依托软件的著作权、专利权及其他知识产权均归书香在线所有。")]),e._v(" "),a("p",[e._v("3. 书香在线在本服务中所使用的“书香校园”、“书香在线”、“博雅优创”及自行设计熊猫形象等商业标识，其著作权或商标权归书香在线所有。")]),e._v(" "),a("p",[e._v("4. 上述及其他任何本服务包含的内容的知识产权均受到法律保护，未经书香在线、用户或相关权利人书面许可，任何人不得以任何形式进行使用或创造相关衍生作品。")]),e._v(" "),a("h3",[e._v("十三、 用户违法行为")]),e._v(" "),a("p",[e._v("1. 您在使用本服务时须遵守法律法规，不得利用本服务从事违法违规行为，包括但不限于：")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("1) 发布、传送、传播、储存危害国家安全统一、破坏社会稳定、违反公序良俗、侮辱、诽谤、淫秽、暴力以及任何违反国家法律法规的内容；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("2) 发布、传送、传播、储存侵害他人知识产权、商业秘密等合法权利的内容；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("3) 恶意虚构事实、隐瞒真相以误导、欺骗他人；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("4) 发布、传送、传播广告信息及垃圾信息；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("5) 其他法律法规禁止的行为。")]),e._v(" "),a("p",[e._v("2. 如果您违反了本条约定，相关国家机关或机构可能会对您提起诉讼、罚款或采取其他制裁措施，并要求书香在线给予协助。造成损害的，您应依法予以赔偿，书香在线不承担任何责任。")]),e._v(" "),a("p",[e._v("3. 如果书香在线发现或收到他人举报您发布的信息违反本条约定，书香在线有权进行独立判断并采取技术手段予以删除、屏蔽或断开链接。同时，书香在线有权视用户的行为性质，采取包括但不限于暂停或终止服务，限制、冻结或终止您书香在线平台账号的使用，追究法律责任等措施。")]),e._v(" "),a("p",[e._v("4. 您违反本条约定，导致任何第三方损害的，您应当独立承担责任；书香在线因此遭受损失的，您也应当一并赔偿。")]),e._v(" "),a("h3",[e._v("十四、 遵守当地法律监管")]),e._v(" "),a("p",[e._v("1. 您在使用本服务过程中应当遵守当地相关的法律法规，并尊重当地的道德和风俗习惯。如果您的行为违反了当地法律法规或道德风俗，您应当为此独立承担责任。")]),e._v(" "),a("p",[e._v("2. 您应避免因使用本服务而使书香在线卷入政治和公共事件，否则书香在线有权暂停或终止对您的服务。")]),e._v(" "),a("h3",[e._v("十五、 用户发送、传播的内容与第三方投诉处理")]),e._v(" "),a("p",[e._v("1. 您通过本服务发送或传播的内容（包括但不限于网页、文字、图片、音频、视频、图表等）均由您自行承担责任。")]),e._v(" "),a("p",[e._v("2. 您发送或传播的内容应有合法来源，相关内容为您所有或您已获得权利人的授权。")]),e._v(" "),a("p",[e._v("3. 您同意书香在线可为履行本协议或提供本服务的目的而使用您发送或传播的内容。")]),e._v(" "),a("p",[e._v("4. 如果书香在线收到权利人通知，主张您发送或传播的内容侵犯其相关权利的，您同意书香在线有权进行独立判断并采取删除、屏蔽或断开链接等措施。 ")]),e._v(" "),a("p",[e._v("5. 您使用本服务时不得违反国家法律法规、侵害他人合法权益。您理解并同意，如您被他人投诉侵权或您投诉他人侵权，书香在线有权将争议中相关方的主体、联系方式、投诉相关内容等必要信息提供给其他争议方或相关部门，以便及时解决投诉纠纷，保护他人合法权益。")]),e._v(" "),a("h3",[e._v("十六、 不可抗力及其他免责事由")]),e._v(" "),a("p",[e._v("1. 您理解并同意在使用本服务的过程中，可能会遇到不可抗力等风险因素，使本服务发生中断。不可抗力是指不能预见、不能克服并不能避免且对一方或双方造成重大影响的客观事件，包括但不限于自然灾害如洪水、地震、瘟疫流行和风暴等以及社会事件如战争、动乱、政府行为等。出现上述情况时，书香在线将努力在第一时间与相关单位配合，及时进行修复，但是由此给您造成的损失书香在线在法律允许范围内免责。")]),e._v(" "),a("p",[e._v("2. 在法律允许的范围内，书香在线对以下情形导致的服务中断或受阻不承担责任：")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("1) 受到计算机病毒、木马或其他恶意程序、黑客攻击的破坏；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("2) 用户或书香在线的电脑软件、系统、硬件和通信线路出现故障；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("3) 用户操作不当；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("4) 用户通过非书香在线授权的方式使用本服务；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("5) 其他书香在线无法控制或合理预见的情形。")]),e._v(" "),a("p",[e._v("3. 您理解并同意，在使用本服务的过程中，可能会遇到网络信息或其他用户行为带来的风险，书香在线不对任何信息的真实性、适用性、合法性承担责任，也不对因侵权行为给您造成的损害负责。这些风险包括但不限于：")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("1) 来自他人匿名或冒名的含有威胁、诽谤、令人反感或非法内容的信息；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("2) 因使用本协议项下的服务，遭受他人误导、欺骗或其他导致或可能导致的任何心理、生理上的伤害以及经济上的损失；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("3) 其他因网络信息或用户行为引起的风险。")]),e._v(" "),a("p",[e._v("4. 您理解并同意，本服务并非为某些特定目的而设计，包括但不限于核设施、军事用途、医疗设施、交通通讯等重要领域。如果因为软件或服务的原因导致上述操作失败而带来的人员伤亡、财产损失和环境破坏等，书香在线不承担法律责任。")]),e._v(" "),a("p",[e._v("5. 书香在线依据本协议约定获得处理违法违规内容的权利，该权利不构成书香在线的义务或承诺，书香在线不能保证及时发现违法行为或进行相应处理。")]),e._v(" "),a("p",[e._v("6. 在任何情况下，您不应轻信借款、索要密码或其他涉及财产的网络信息。涉及财产操作的，请一定先核实对方身份，并请经常留意书香在线有关防范诈骗犯罪的提示。")]),e._v(" "),a("h3",[e._v("十七、 协议的生效与变更")]),e._v(" "),a("p",[e._v("1. 您使用书香在线的服务即视为您已阅读本协议并接受本协议的约束。")]),e._v(" "),a("p",[e._v("2. 书香在线有权在必要时修改本协议条款。您可以在相关服务页面查阅最新版本的协议条款。")]),e._v(" "),a("p",[e._v("3. 本协议条款变更后，如果您继续使用书香在线提供的软件或服务，即视为您已接受修改后的协议。如果您不接受修改后的协议，应当停止使用书香在线提供的软件或服务。")]),e._v(" "),a("h3",[e._v("十八、 服务的变更、中断、终止")]),e._v(" "),a("p",[e._v("1. 书香在线可能会对服务内容进行变更，也可能会中断、中止或终止服务。")]),e._v(" "),a("p",[e._v("2. 您理解并同意，书香在线有权自主决定经营策略。在书香在线发生合并、分立、收购、资产转让时，书香在线可向第三方转让本服务下相关资产；书香在线也可在单方通知您后，将本协议下部分或全部服务转交由第三方运营或履行。具体受让主体以书香在线通知的为准。")]),e._v(" "),a("p",[e._v("3. 如发生下列任何一种情形，书香在线有权不经通知而中断或终止向您提供的服务：")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("1) 根据法律规定您应提交真实信息，而您提供的个人资料不真实、或与注册时信息不一致又未能提供合理证明；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("2) 您违反相关法律法规或本协议的约定；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("3) 按照法律规定或主管部门的要求；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("4) 出于安全的原因或其他必要的情形。")]),e._v(" "),a("p",[e._v("4. 书香在线有权按本协议第九条的约定进行收费。若您未按时足额付费，书香在线有权中断、中止或终止提供服务。")]),e._v(" "),a("p",[e._v("5. 您有责任自行备份存储在本服务中的数据。如果您的服务被终止，书香在线可以从服务器上永久地删除您的数据,但法律法规另有规定的除外。服务终止后，书香在线没有义务向您返还数据。")]),e._v(" "),a("h3",[e._v("十九、 管辖与法律适用")]),e._v(" "),a("p",[e._v("1. 本协议的成立、生效、履行、解释及纠纷解决，适用中华人民共和国大陆地区法律（不包括冲突法）。")]),e._v(" "),a("p",[e._v("2. 本协议签订地为中华人民共和国广东省深圳市南山区。")]),e._v(" "),a("p",[e._v("3. 若您和书香在线之间发生任何纠纷或争议，首先应友好协商解决；协商不成的，您同意将纠纷或争议提交本协议签订地（即中国广东省深圳市南山区）有管辖权的人民法院管辖。")]),e._v(" "),a("p",[e._v("4. 本协议所有条款的标题仅为阅读方便，本身并无实际涵义，不能作为本协议涵义解释的依据。")]),e._v(" "),a("p",[e._v("5. 本协议条款无论因何种原因部分无效或不可执行，其余条款仍有效，对双方具有约束力。")]),e._v(" "),a("h3",[e._v("二十、 未成年人使用条款")]),e._v(" "),a("p",[e._v("1. 若用户未满18周岁，则为未成年人，应在监护人监护、指导下阅读本协议和使用本服务。")]),e._v(" "),a("p",[e._v("2. 未成年人用户涉世未深，容易被网络虚象迷惑，且好奇心强，遇事缺乏随机应变的处理能力，很容易被别有用心的人利用而又缺乏自我保护能力。因此，未成年人用户在使用本服务时应注意以下事项，提高安全意识，加强自我保护：")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("1) 认清网络世界与现实世界的区别，避免沉迷于网络，影响日常的学习生活；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("2) 填写个人资料时，加强个人保护意识，以免不良分子对个人生活造成骚扰；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("3) 在监护人或老师的指导下，学习正确使用网络；")]),e._v(" "),a("p",{staticClass:"p_0"},[e._v("4) 避免陌生网友随意会面或参与联谊活动，以免不法分子有机可乘，危及自身安全。")]),e._v(" "),a("p",[e._v("3. 监护人、学校均应对未成年人使用本服务时多做引导。特别是家长应关心子女的成长，注意与子女的沟通，指导子女上网应该注意的安全问题，防患于未然。")]),e._v(" "),a("h3",[e._v("二十一、    其他")]),e._v(" "),a("p",[e._v("如果您对本协议或本服务有意见或建议，可与书香在线客户服务部门联系，我们会给予您必要的帮助。（正文完）")]),e._v(" "),a("p",{staticClass:"p_1"},[e._v(" 博雅优创（深圳）有限公司")])])}]};var lt=a("VU/8")(rt,nt,!1,function(e){a("VH76")},"data-v-7942a5dc",null).exports,ct={name:"bDisclaimer",components:{bFooter:h.a,bHeader:g.a},data:function(){return{}}},dt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"place"}),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"#"}},[e._v("免责声明")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"center_align",attrs:{id:"middle"}},[a("h2",{staticClass:"Title font_bold"},[e._v("免责声明")]),e._v(" "),e._m(0),e._v(" "),a("router-link",{attrs:{to:"/"}},[a("button",{staticClass:"step return"},[e._v("返回首页")])])],1)]),e._v(" "),a("bFooter")],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content no_border no_indent"},[a("p",[e._v("1. 本网站所提供的信息，只供参考之用。")]),e._v(" "),a("p",[e._v("2. 由于用户将个人密码告知他人或与他人共享注册帐户，由此导致的任何个人资料泄露，本网站不负任何责任。")]),e._v(" "),a("p",[e._v("3. 对于因不可抗力或其他不能控制的原因造成的网络服务中断或其它缺陷，本网站不承担任何责任，但将尽力减少因此而给用户造成的损失和影响。")]),e._v(" "),a("p",[e._v("4. 本网站及其雇员一概毋须以任何方式就任何信息传递或传送的失误、不准确或错误对用户或任何其他人士负任何直接或间接的责任。")]),e._v(" "),a("p",[e._v("5. 在法律允许的范围内，本网站在此声明,不承担用户或任何人士就使用或未能使用本网站所提供的信息或任何链接或项目所引致的任何直接、间接、附带、从属、特殊、惩罚性或惩戒性的损害赔偿（包括但不限于收益、预期利润的损失或失去的业务、未实现预期的节省）。")]),e._v(" "),a("p",[e._v("6. 本网站所提供的信息，若在任何司法管辖地区供任何人士使用或分发给任何人士时会违反该司法管辖地区的法律或条例的规定或会导致本网站或其第三方代理人受限于该司法管辖地区内的任何监管规定时，则该等信息不宜在该司法管辖地区供该等任何人士使用或分发给该等任何人士。用户须自行保证不会受限于任何限制或禁止用户使用或分发本网站所提供信息的当地的规定。")]),e._v(" "),a("p",[e._v("7. 本网站图片，文字之类版权申明：因为网站可以由注册用户自行上传图片或文字，本网站无法鉴别所上传图片或文字的知识版权，如果侵犯，请及时通知我们，本网站将在第一时间及时删除。")]),e._v(" "),a("p",[e._v("8. 本网站使用者因为违反本声明的规定而触犯中华人民共和国法律的，一切后果自己负责，本网站不承担任何责任。")]),e._v(" "),a("p",[e._v("9. 本声明未涉及的问题参见国家有关法律法规，当本声明与国家法律法规冲突时，以国家法律法规为准。")]),e._v(" "),a("p",[e._v("10. 凡以任何方式登陆本网站或直接、间接使用本网站资料者，视为自愿接受本网站声明的约束。")])])}]};var ut=a("VU/8")(ct,dt,!1,function(e){a("nLun")},null,null).exports,pt={name:"educationIndex",data:function(){return{orgCount:"",ax:[]}},components:{bFooter:h.a,bHeader:g.a},mounted:function(){this.getData(),this.ax=_.pluck(JSON.parse(sessionStorage.getItem("ax")),"url")},methods:{axs:function(e){return!!sessionStorage.getItem("isad")||this.ax.includes(e)},getData:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/organizationManagement/getOrgTotal").then(function(t){t.data&&200==t.data.code?e.orgCount=t.data.data.orgCount:e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}}},mt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/orgIndex"}}},[e._v("机构管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"item_box"},[e.axs("jggl.jyjg")?a("div",{staticClass:"item col_yellow"},[a("h1",[e._v("教育机构")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.orgCount))]),e._v(" "),a("p",[e._v("机构总数")])]),e._v(" "),e._m(0)])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/educationManagement"}})],1):e._e(),e._v(" "),e.axs("jggl.yyjg")?a("div",{staticClass:"item col_yellow"},[a("h1",[e._v("运营机构")]),e._v(" "),e._m(1),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/unopened"}})],1):e._e()])])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"list"},[t("span",[this._v("0")]),this._v(" "),t("p",[this._v("机构层级数")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("机构总数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("Saas机构数")])])])])}]};var vt=a("VU/8")(pt,mt,!1,function(e){a("wa7I")},null,null).exports,ft=a("FSij"),ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/orgIndex"}}},[e._v("机构管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("教育机构管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head"},[a("el-button",{staticClass:"el-button--primary",attrs:{size:"small"},on:{click:e.removeOrg}},[e._v("删除机构")]),e._v(" "),a("el-button",{staticClass:"el-button--primary",attrs:{size:"small"},on:{click:e.addOrg}},[e._v("新建机构")]),e._v(" "),a("el-button",{staticClass:"el-button--primary",attrs:{size:"small"},on:{click:e.editOrg}},[e._v("修改机构")])],1),e._v(" "),a("div",{staticClass:"b-container-table education-container-table clearfix"},[a("div",{staticClass:"container-table-left left"},[a("el-tree",{ref:"tree",staticClass:"pd20",attrs:{id:"treeOrg","show-checkbox":"","node-key":"id",data:e.educationList,load:e.loadNodeTree,lazy:"","expand-on-click-node":!0,"render-content":e.renderContent},on:{check:e.changeCheckbox}})],1),e._v(" "),a("div",{staticClass:"container-table-right right"},[a("el-table",{staticClass:"pd20",staticStyle:{width:"100%"},attrs:{data:e.tableData,"show-header":!1}},[a("el-table-column",{attrs:{prop:"name",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"value"}}),e._v(" "),a("el-table-column",{attrs:{width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[4==t.$index?a("el-button",{staticClass:"el-button--primary",attrs:{size:"small"},on:{click:function(t){e.userDialog=!0}}},[e._v("修改关联用户")]):e._e(),e._v(" "),6==t.$index&&2==e.confirmOrgItem.status?a("el-button",{staticClass:"el-button--primary",attrs:{size:"small"},on:{click:function(t){e.confirmOrg()}}},[e._v("机构确认")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowOrgList,expression:"isShowOrgList"}],staticClass:"orgs-list",attrs:{id:"orgsList"}},[a("el-input",{attrs:{placeholder:"请输入学校名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchOrg(t):null}},model:{value:e.searchOrgList,callback:function(t){e.searchOrgList=t},expression:"searchOrgList"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchOrg},slot:"append"})],1),e._v(" "),e.orgList&&e.orgList.length>0?a("ul",{staticClass:"orgs-list-wrapper"},e._l(e.orgList,function(t){return a("li",{key:t.id,staticClass:"orgs-list-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"item.checked"}],staticClass:"container-checkbox orgs-list-checkbox",attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(t.checked)?e._i(t.checked,t.id)>-1:t.checked},on:{change:[function(a){var o=t.checked,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.id,n=e._i(o,r);s.checked?n<0&&e.$set(t,"checked",o.concat([r])):n>-1&&e.$set(t,"checked",o.slice(0,n).concat(o.slice(n+1)))}else e.$set(t,"checked",i)},function(a){e.checkOrglist(t)}]}}),e._v(" "),a("span",[e._v(e._s(t.name))])])})):e._e(),e._v(" "),e.orgList&&0==e.orgList.length?a("p",{staticStyle:{"text-align":"center","line-height":"40px"}},[e._v("暂无数据")]):e._e(),e._v(" "),e.total&&e.total>0?a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":e.currentPage,"page-size":22,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{staticClass:"user-org-dialog",attrs:{title:"新建机构",visible:e.orgDialog,width:"760px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.orgDialog=t},close:function(t){e.closeAdd(e.form)}}},[a("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.isEditeDialog?"修改机构":"新建机构"))]),e._v(" "),a("div",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[e.isEditeDialog?e._e():a("el-form-item",{attrs:{label:"机构层级",prop:"orgParent"}},[a("el-input",{staticClass:"org-input",attrs:{type:"text",disabled:"disabled"},model:{value:e.form.orgParent,callback:function(t){e.$set(e.form,"orgParent",t)},expression:"form.orgParent"}}),e._v(" "),a("i",{staticClass:"el-icon-plus org-parent",on:{click:function(t){e.selectOrgParent()}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机构类型",required:""}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"orgCategory"}},[a("el-select",{model:{value:e.form.orgCategory,callback:function(t){e.$set(e.form,"orgCategory",t)},expression:"form.orgCategory"}},e._l(e.orgCategoryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),1===e.form.orgCategory?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"schoolType"}},[a("el-select",{model:{value:e.form.schoolType,callback:function(t){e.$set(e.form,"schoolType",t)},expression:"form.schoolType"}},e._l(e.schoolList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1):e._e()],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"机构名称",prop:"orgname"}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.orgname,callback:function(t){e.$set(e.form,"orgname",t)},expression:"form.orgname"}})],1),e._v(" "),a("el-form-item",{staticClass:"org-city-select",attrs:{label:"机构地址",prop:"orgAddress"}},[a("el-row",{attrs:{span:4}},[a("el-col",{attrs:{span:4}},[a("el-select",{model:{value:e.form.provinceInfoId,callback:function(t){e.$set(e.form,"provinceInfoId",t)},expression:"form.provinceInfoId"}},e._l(e.citySelect.provinces,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{model:{value:e.form.cityInifoId,callback:function(t){e.$set(e.form,"cityInifoId",t)},expression:"form.cityInifoId"}},e._l(e.citySelect.cities,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{model:{value:e.form.areasInfoId,callback:function(t){e.$set(e.form,"areasInfoId",t)},expression:"form.areasInfoId"}},e._l(e.citySelect.areas,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.orgAddress,callback:function(t){e.$set(e.form,"orgAddress",t)},expression:"form.orgAddress"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"机构邮编",prop:"postCode"}},[a("el-input",{staticClass:"number-input",attrs:{type:"text"},model:{value:e.form.postCode,callback:function(t){e.$set(e.form,"postCode",t)},expression:"form.postCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"同级排序",prop:"orgOrder"}},[a("el-input",{staticClass:"number-input",attrs:{type:"text"},model:{value:e.form.orgOrder,callback:function(t){e.$set(e.form,"orgOrder",t)},expression:"form.orgOrder"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",plain:""},on:{click:function(t){e.closeAdd(e.form)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitAdd(e.form)}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"user-name-dialog",attrs:{title:"修改关联用户",visible:e.userDialog,width:"650px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.userDialog=t},close:function(t){e.closeUser(e.form)}}},[a("div",[a("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.useRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"用户姓名搜索",prop:"searchName"}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:20}},[a("el-autocomplete",{staticClass:"search-name-input",attrs:{"fetch-suggestions":e.querySearchAsync,"suffix-icon":"el-icon-search",placeholder:"请输入姓名","popper-class":"education-autocomplete"},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.item;return[a("p",{key:o.id},[a("span",{staticClass:"user-search-input user-name-search"},[e._v(e._s(o.value))]),e._v(" "),-1!==o.id?a("span",{staticClass:"user-search-input"},[e._v("用户组："+e._s(e._f("userRoleFilter")(o.userType))+"  ")]):e._e(),e._v(" "),-1!==o.id?a("span",{staticClass:"user-search-input"},[e._v("| 昵称："+e._s(o.nickName?o.nickName:"--")+"  ")]):e._e()])]}}]),model:{value:e.userForm.searchName,callback:function(t){e.$set(e.userForm,"searchName",t)},expression:"userForm.searchName"}})],1),e._v(" "),a("el-col",{staticClass:"user-dialog-button",attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitUser(e.userForm)}}},[e._v("确认关联")]),e._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:function(t){e.cancelUser(e.userForm)}}},[e._v("取消关联")])],1)],1)],1)],1)],1)]),e._v(" "),a("el-dialog",{staticClass:"org-parent-dialog",attrs:{title:"选择机构层级",visible:e.orgParentDialog,width:"600px",height:"500px","close-on-click-modal":!1,"show-close":!1,center:""},on:{"update:visible":function(t){e.orgParentDialog=t}}},[a("div",[a("el-form",{attrs:{"label-width":"120px"}},[a("el-tree",{ref:"parentDialogTree",staticClass:"pd20",attrs:{"show-checkbox":"","node-key":"id",data:e.educationList,load:e.loadNodeTree,lazy:""},on:{check:e.addOrgParent}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",plain:""},on:{click:e.closeOrgParent}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.sureOrgParent}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var gt=function(e){a("ob6i")},_t=a("VU/8")(ft.a,ht,!1,gt,null,null).exports,bt={name:"authorityManagement",data:function(){return{creator:"",authorityId:"",authorityDialog:!1,isEditeDialog:!1,previewDialog:!1,tableData:[],servicesList:[],serviceName:"",currentPage:1,total:0,checkboxModel:[],isCheckedAll:!1,search:"",form:{name:"",type:"",url:"",requestType:"",serviceId:"",description:""},rules:{name:[{validator:function(e,t,a){/^[\u4e00-\u9fa5\a-zA-Z]+$/.test(t)?a():a(new Error("请输入汉字或英文字母"))},required:!0,trigger:"blur"},{max:20,message:"不能超过20个字符",trigger:"blur"}],type:[{required:!0,message:"请选择机构类型",trigger:"blur"}],url:[{required:!0,message:"请输入URL",trigger:"blur"},{max:100,message:"不能超过100个字符",trigger:"blur"}],requestType:[{required:!0,message:"请选择请求方式",trigger:"blur"}],serviceId:[{required:!0,message:"请选择所属服务",trigger:"blur"}],description:[{message:"请输入权限描述",trigger:"blur"},{max:100,message:"不能超过100个字符",trigger:"blur"}]},typeList:[{id:1,name:"操作权限"},{id:2,name:"显示权限"}],methodsList:[{id:1,name:"GET"},{id:2,name:"HEAD"},{id:3,name:"POST"},{id:4,name:"PUT"},{id:5,name:"PATCH"},{id:6,name:"DELETE"},{id:7,name:"OPTIONS"},{id:8,name:"TRACE"}],preiviewItem:{},editTime:""}},mounted:function(){this.userId=sessionStorage.getItem("userId"),this.getData(),this.getServices()},filters:{dateFormat:function(e){return moment.utc(e).format("YYYY-MM-DD hh:ss:mm")}},methods:{getData:function(e,t,a,o){var s=this,i={},r=void 0==e?1:e,n=void 0==t?10:t;i.name=void 0==a?"":s.search,i.serviceName=void 0==o?"":s.serviceName,s.axios.post("/proxy/report-business/booking/v2/api/userManagement/queryPermissionList/"+r+"/"+n,i).then(function(e){e.data&&200==e.data.code?(s.tableData=e.data.datas,s.currentPage=e.data.pageInfo.currPage,s.total=e.data.pageInfo.total):s.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},getServices:function(){var e=this;e.axios.post("/proxy/report-business/booking/v2/api/service/getAllOperation").then(function(t){t.data&&200==t.data.code?(e.servicesList=t.data.data,e.servicesList.forEach(function(e){e.serviceId=e.id,e.serviceName=e.message})):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})},fnSearch:function(){this.getData(this.currentPage,10,this.search,this.serviceName)},handleCurrentChange:function(e){this.getData(e,10,this.search,this.serviceName)},add:function(){this.authorityDialog=!0,this.isEditeDialog=!1,this.form.name="",this.form.type="",this.form.url="",this.form.requestType="",this.form.serviceId="",this.form.serviceName="",this.form.description=""},submitForm:function(e){var t,a=this,o=!1;e.creator=a.userId,a.servicesList.forEach(function(t){t.serviceId===e.serviceId&&(e.serviceName=t.serviceName)}),"操作权限"!==a.form.type&&"显示权限"!==a.form.type||(a.form.type=1),a.isEditeDialog?(a.form.id=a.authorityId,a.form.createTime=a.editTime):(delete e.id,delete e.createTime),t=a.form,a.$refs.form.validate(function(e){if(e){if(o)return;o=!0,a.axios.post("/proxy/report-business/booking/v2/api/userManagement/saveOrUpdatePermission",t).then(function(e){if(o=!1,e.data&&200==e.data.code){var t=a.isEditeDialog?"修改成功":"创建成功";a.$message.success(t),a.authorityDialog=!1,a.getData(),a.isEditeDialog=!1}else a.$message.error("创建失败"),a.isEditeDialog=!1}).catch(function(e){o=!1,console.log(e)})}})},close:function(e){this.authorityDialog=!1,this.$refs.form.resetFields()},fnDelete:function(){var e=this;0!=e.checkboxModel.length?e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.post("/proxy/report-business/booking/v2/api/userManagement/deletePermission",e.checkboxModel).then(function(t){200==t.data.code?(e.$message.success("删除成功！"),e.getData(),e.checkboxModel=[]):e.$message.error("删除失败！")}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除")}):e.$message.error("请选择要删除的权限!")},handlePreiview:function(e,t){this.previewDialog=!0,this.preiviewItem=t},handleEdit:function(e,t){var a=t;this.authorityDialog=!0,this.isEditeDialog=!0,this.form.name=a.name,this.form.type=1===Number(a.type)?"操作权限":"显示权限",this.form.url=a.url,this.form.requestType=a.requestType,this.form.serviceId=a.serviceId,this.form.serviceName=a.serviceName,this.form.description=a.description,this.authorityId=a.id,this.editTime=a.createTime},handleSelectionChange:function(e){this.checkboxModel=e},checkedAll:function(){var e=this;e.isCheckedAll?(e.checkboxModel=[],e.tableData.forEach(function(t){e.checkboxModel.push(t.id)})):e.checkboxModel=[]}},components:{bFooter:h.a,bHeader:g.a},watch:{checkboxModel:{handler:function(e,t){this.checkboxModel.length===this.tableData.length?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0},"form.type":{handler:function(e,t){},deep:!0},"form.serviceId":{handler:function(e,t){},deep:!0}}},kt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/user"}}},[e._v("用户管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container authority-wrap"},[a("div",{staticClass:"container-head clearfix"},[a("div",{staticClass:"left"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{change:[function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s},e.checkedAll]}}),e._v(" "),a("span",{staticClass:"label-span"},[e._v("全选")])]),e._v(" "),a("el-button",{staticClass:"el-button--primary",attrs:{size:"small"},on:{click:e.fnDelete}},[e._v("删除")]),e._v(" "),a("el-button",{staticClass:"el-button--primary",attrs:{size:"small"},on:{click:e.add}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"right"},[a("el-select",{attrs:{clearable:""},model:{value:e.serviceName,callback:function(t){e.serviceName=t},expression:"serviceName"}},e._l(e.servicesList,function(e){return a("el-option",{key:e.serviceId,attrs:{label:e.serviceName,value:e.serviceName}})})),e._v(" "),a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入权限名"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.fnSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fnSearch},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"权限ID",prop:"id",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"权限名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"权限类型","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(1==t.row.type?"操作权限":"显示权限"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"URL","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("dateFormat")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceName",label:"所属服务","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-view",on:{click:function(a){e.handlePreiview(t.$index,t.row)}}}),e._v(" "),a("i",{staticClass:"el-icon-edit-outline",on:{click:function(a){e.handleEdit(t.$index,t.row)}}})]}}])})],1),e._v(" "),e.tableData.length>0?a("el-pagination",{staticClass:"new-pagination",staticStyle:{"text-align":"right"},attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{staticClass:"user-org-dialog",attrs:{visible:e.authorityDialog,width:"760px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.authorityDialog=t},close:function(t){e.close(e.form)}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[e._v(e._s(e.isEditeDialog?"修改权限":"新建权限"))])]),e._v(" "),a("div",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"权限名",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限类型",prop:"type"}},[a("el-select",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"请求方式",prop:"requestType"}},[a("el-select",{model:{value:e.form.requestType,callback:function(t){e.$set(e.form,"requestType",t)},expression:"form.requestType"}},e._l(e.methodsList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"所属服务",prop:"serviceId"}},[a("el-select",{model:{value:e.form.serviceId,callback:function(t){e.$set(e.form,"serviceId",t)},expression:"form.serviceId"}},e._l(e.servicesList,function(e){return a("el-option",{key:e.serviceId,attrs:{label:e.serviceName,value:e.serviceId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"权限描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",autosize:{maxRows:4,minRows:4}},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{plain:""},on:{click:function(t){e.close(e.form)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm(e.form)}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"preview-org-dialog",attrs:{title:"查看权限",visible:e.previewDialog,width:"550px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.previewDialog=t},close:function(t){e.previewDialog=!1}}},[a("div",[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"权限名",prop:"name"}},[a("div",[e._v(e._s(e.preiviewItem.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"权限类型",prop:"type"}},[a("div",[e._v(e._s(1==e.preiviewItem.type?"操作权限":"显示权限"))])]),e._v(" "),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("div",[e._v(e._s(e.preiviewItem.url))])]),e._v(" "),a("el-form-item",{attrs:{label:"所属服务",prop:"services"}},[a("div",[e._v(e._s(e.preiviewItem.serviceName))])]),e._v(" "),a("el-form-item",{attrs:{label:"权限描述",prop:"description"}},[a("div",[e._v(e._s(e.preiviewItem.description))])])],1)],1)])],1)},staticRenderFns:[]};var yt=a("VU/8")(bt,kt,!1,function(e){a("Emca")},null,null).exports,xt={name:"examPanel",components:{bHeader:g.a,bFooter:h.a},data:function(){return{ax:[],questionSumNum:0,questionCitedNum:0,answerSumNum:0,answerReviewNum:0}},mounted:function(){this.ax=_.pluck(JSON.parse(sessionStorage.getItem("ax")),"url"),this.getQuestion()},methods:{axs:function(e){return!!sessionStorage.getItem("isad")||this.ax.includes(e)},getQuestion:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/questionsAnswer/questionsStatistics").then(function(t){if(t&&"200"==t.status&&t.data&&t.data.data){var a=t.data.data;e.questionSumNum=a.questionSumNum,e.questionCitedNum=a.questionCitedNum,e.answerSumNum=a.answerSumNum,e.answerReviewNum=a.answerReviewNum}}).catch(function(e){console.log(e)})}}},Ct={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("问答卷管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"item_box"},[e.axs("tdjgl.wjgl")?a("div",{staticClass:"item fl mgr50 col_purple paper_info"},[a("h1",[e._v("问卷管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.questionCitedNum))]),e._v(" "),a("p",[e._v("被引用的问卷")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.questionSumNum))]),e._v(" "),a("p",[e._v("问卷总数")])])])]),e._v(" "),a("router-link",{attrs:{to:"/questionnairelist"}})],1):e._e(),e._v(" "),e.axs("tdjgl.djgl")?a("div",{staticClass:"item fl mgr50 col_purple paper_info"},[a("h1",[e._v("答卷管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.answerReviewNum))]),e._v(" "),a("p",[e._v("待评审的答卷")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.answerSumNum))]),e._v(" "),a("p",[e._v("答卷总数")])])])]),e._v(" "),a("router-link",{attrs:{to:"/paperlist"}})],1):e._e(),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[]};var wt=a("VU/8")(xt,Ct,!1,function(e){a("kIdi")},null,null).exports,It=a("cFig"),qt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/exam"}},[e._v("问答卷管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v(" 答卷管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container paperlist"},[a("div",{staticClass:"page_search user_search"},[a("el-row",[a("el-col",{attrs:{span:3,offset:"17"}},[a("el-select",{staticStyle:{width:"80%"},model:{value:e.query.searchType,callback:function(t){e.$set(e.query,"searchType",t)},expression:"query.searchType"}},[a("el-option",{attrs:{label:"活动ID",value:"eventInsId"}}),e._v(" "),a("el-option",{attrs:{label:"活动名称",value:"eventName"}}),e._v(" "),a("el-option",{attrs:{label:"活动卷名称",value:"eventQuestionnaireName"}}),e._v(" "),a("el-option",{attrs:{label:"活动节点",value:"nodeName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"请输入关键词"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.keyWords,callback:function(t){e.$set(e.query,"keyWords","string"==typeof t?t.trim():t)},expression:"query.keyWords"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{prop:"eventInsId",label:"活动ID",width:"200",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eventName",label:"活动名称",width:"300",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eventQuestionnaireName",label:"活动卷名称",width:"200",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:"活动节点",width:"160",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"活动时间段",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate1")(t.row.startTime)))]),e._v("至"),a("span",[e._v(e._s(e._f("formatDate1")(t.row.endTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("router-link",{attrs:{to:{path:"/paper/"+e.row.eventInsId,query:{nodeId:e.row.nodeInfoId,eventQuestionnaireId:e.row.eventQuestionnaireId}}}},[a("span",{staticClass:"icon-sx-view"})])],1)]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pageInfo.total>0,expression:"pageInfo.total>0"}],staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"30%","lock-scroll":!1},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[a("span",[e._v("确认删除这条数据？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmDeleteMsg}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Nt=function(e){a("NsXF")},Tt=a("VU/8")(It.a,qt,!1,Nt,null,null).exports,St=a("rg6s"),$t={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/paperlist"}},[e._v("答卷管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("答卷详情管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search"},[a("el-col",{attrs:{span:2,offset:"18"}},[a("el-select",{staticStyle:{width:"90%"},model:{value:e.query.searchType,callback:function(t){e.$set(e.query,"searchType",t)},expression:"query.searchType"}},[a("el-option",{attrs:{label:"机构",value:"orgName"}}),e._v(" "),a("el-option",{attrs:{label:"答卷人",value:"respondents"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"请输入关键词"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword","string"==typeof t?t.trim():t)},expression:"query.keyword"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{prop:"orgName",label:"机构名",width:"630"}}),e._v(" "),a("el-table-column",{attrs:{prop:"respondents",label:"答卷人",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"最后答卷时间",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.date)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("span",{staticClass:"icon-sx-view",on:{click:function(a){e.toAnswerSheet(t.row)}}})])]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pageInfo.total>0,expression:"pageInfo.total>0"}],staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"30%","lock-scroll":!1},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[a("span",[e._v("确认删除这条记录？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmDeleteMsg}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Dt=function(e){a("Dnd7")},At=a("VU/8")(St.a,$t,!1,Dt,null,null).exports,Lt=a("Zsu+"),Pt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg questionnaire"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/exam"}},[e._v("问答卷管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("问卷管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search"},[a("el-row",[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"check_all_item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"check_box_all",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{click:e.checkedAll,change:function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s}}}),a("span",[e._v("全选")])]),e._v(" "),a("button",{staticClass:"btn btn-delete btn-orange ",on:{click:e.batchDelete}},[e._v("删除")]),e._v(" "),a("button",{staticClass:"btn btn-orange",on:{click:e.newQuestionnaire}},[e._v("新建")])]),e._v(" "),a("el-col",{attrs:{span:3,offset:"12"}},[a("el-select",{staticStyle:{width:"80%"},model:{value:e.query.queryFiled,callback:function(t){e.$set(e.query,"queryFiled",t)},expression:"query.queryFiled"}},[a("el-option",{attrs:{label:"问卷ID",value:"id"}}),e._v(" "),a("el-option",{attrs:{label:"问卷类型",value:"questionnaireType"}}),e._v(" "),a("el-option",{attrs:{label:"问卷名称",value:"name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"请输入关键词"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword","string"==typeof t?t.trim():t)},expression:"query.keyword"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.referenceCount&&t.row.referenceCount>0?a("input",{staticClass:"sx_input_b",attrs:{type:"checkbox",disabled:""},domProps:{value:t.row.id}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"sx_input_b",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"问卷ID",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"问卷类型",prop:"questionnaireType",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"问卷名称",width:"260"}}),e._v(" "),a("el-table-column",{attrs:{prop:"referenceCount",label:"被引用次数",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createName",label:"创建者",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("span",{staticClass:"icon-sx-view",on:{click:function(a){e.viewDetail(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("span",{staticClass:"icon-sx-edit",on:{click:function(a){e.editQuestionnaire(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"引用该卷的活动",placement:"top"}},[a("span",{staticClass:"icon-role-setting",on:{click:function(a){e.referActivities(t.row)}}})])]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pageInfo.total>0,expression:"pageInfo.total>0"}],staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{staticClass:"orange-dialog edit-dialog",attrs:{title:e.dialogTitle,visible:e.dialogEditFormVisible,"before-close":e.questionnaireFormExit},on:{"update:visible":function(t){e.dialogEditFormVisible=t}}},[a("el-form",{ref:"questionnaireForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"问卷名称","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:e.formLength.name},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"==typeof t?t.trim():t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"问卷URL","label-width":e.formLabelWidth,prop:"questionURL"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入URL"},model:{value:e.form.questionURL,callback:function(t){e.$set(e.form,"questionURL","string"==typeof t?t.trim():t)},expression:"form.questionURL"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"问卷类型","label-width":e.formLabelWidth,prop:"questionnaireType"}},[a("el-select",{attrs:{placeholder:"请选择问卷类型"},model:{value:e.form.questionnaireType,callback:function(t){e.$set(e.form,"questionnaireType",t)},expression:"form.questionnaireType"}},[a("el-option",{attrs:{label:"活动问卷",value:"活动问卷"}}),e._v(" "),a("el-option",{attrs:{label:"调查问卷",value:"调查问卷"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"不超过200个字符",maxlength:e.formLength.remark},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.questionnaireFormExit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveDataHandle}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"orange-dialog",attrs:{title:"查看问卷",visible:e.dialogQuestionnnaireVisible,width:"40%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogQuestionnnaireVisible=t}}},[a("div",{staticClass:"questionnaire_detail"},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("问卷名称")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:2}},[a("p",[e._v(e._s(e.detail.name))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("问卷URL")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:2}},[a("p",[e._v(e._s(e.detail.questionURL))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("问卷类型")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:2}},[a("div",{},[a("span",[e._v(e._s(e.detail.questionnaireType))])])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("备注")])]),e._v(" "),a("el-col",{attrs:{span:16,offset:2}},[a("p",[e._v(e._s(e.detail.remark?e.detail.remark:"--"))])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogQuestionnnaireVisible=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"orange-dialog",attrs:{title:"引用该问卷的活动",visible:e.dialogTableVisible,width:e.dialogTableWidth},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("div",{staticClass:"refer_activities"},[a("div",{staticClass:"activities_tb"},[a("div",{staticClass:"t_header"},[a("span",{staticClass:"col0"},[e._v("活动名称")]),e._v(" "),a("span",{staticClass:"col1"},[e._v("被引用时间")])]),e._v(" "),a("div",{staticClass:"t_body"},[e.activityList.length>0?a("ul",e._l(e.activityList,function(t){return a("li",{staticClass:"tr"},[a("span",{staticClass:"col0"},[e._v(e._s(t.eventName))]),e._v(" "),a("span",{staticClass:"col1"},[e._v(e._s(e._f("formatDate")(t.referenceTime)))])])})):e._e(),e._v(" "),0==e.activityList.length?a("div",{staticClass:"q_default_info"},[a("div",{staticClass:"q_default_img"}),e._v(" "),a("p",{staticClass:"q_default_txt"},[e._v("暂无数据")])]):e._e()])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.activityPageInfo.total>0,expression:"activityPageInfo.total>0"}],staticClass:"page_pagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":e.activityPageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.activityPageInfo.total},on:{"current-change":e.activityHandleCurrentChange}})],1)])]),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"30%","lock-scroll":!1},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[a("span",[e._v("确认删除这条数据？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmDeleteMsg}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Mt=function(e){a("26bA"),a("cmeh")},Et=a("VU/8")(Lt.a,Pt,!1,Mt,null,null).exports,Ft={name:"orderList",components:{bHeader:g.a,bFooter:h.a},data:function(){return{searchTypes:[{id:1,name:"用户名"},{id:2,name:"手机号"}],detail:{},pageInfo:{total:0,currPage:1,pageSize:10},query:{keyword:"",startTime:"",endTime:"",payType:0,searchType:1},list:[],checkboxModel:[],isCheckedAll:!1,payTypes:[{key:1,val:"微信"},{key:2,val:"支付宝"}],payStatus:[{key:0,val:"全部"},{key:1,val:"待支付"},{key:2,val:"已失效"},{key:3,val:"已支付"},{key:4,val:"已取消"}],dialogAccountVisible:!1}},created:function(){this.userId=sessionStorage.getItem("userId"),this.getInfo()},computed:{isEdit:function(){return!!this.form.id}},watch:{checkboxModel:{handler:function(e,t){this.checkboxModel.length===this.list.length?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{handleSelect:function(e){this.form.schoolInfoId=e.orgId,this.form.region=e.region},viewAccount:function(e){var t=this;t.axios.get("/proxy/report-business/booking/v2/api/ordermanager/getOrderDetail/"+e.id).then(function(e){if(e&&e.data){var a=e.data.data;a.payType&&(a.payTypes=_.findWhere(t.payTypes,{key:a.payType}).val),a.payTime&&a.payTime.length>0&&(a.payTime=a.payTime.substr(0,a.payTime.indexOf("T"))),a.createTime&&a.createTime.length>0&&(a.createTime=a.createTime.substr(0,a.createTime.indexOf("T"))),a.startEffective&&a.startEffective.length>0&&(a.effects=a.startEffective.substr(0,a.startEffective.indexOf("T"))+" 至 "+a.endEffective.substr(0,a.endEffective.indexOf("T"))),a.detailList&&a.detailList.length>0&&_.each(a.detailList,function(e,t){e.idx=t+1,e.createTime=e.createTime.substr(0,e.createTime.indexOf("T"))}),a.payStatus>=0&&(a.jyzt=_.findWhere(t.payStatus,{key:a.payStatus}).val),a.goodsInfo=a.userName?a.userName+(a.mobileNum?"  "+a.mobileNum:""):"",t.detail=a,t.dialogAccountVisible=!0}}).catch(function(e){console.log(e)})},checkedAll:function(){var e=this;this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){e.checkboxModel.push(t.id)}))},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getInfo()},searchInfo:function(){this.getInfo()},getTime:function(e){return""!=e&&e?moment(e).format("YYYY-MM-DD HH:mm:ss"):""},getInfo:function(){var e=this,t={};this.query.payType>0&&(t.payStatus=this.query.payType),this.query.startTime&&(t.startCreateTime=new Date(this.query.startTime.getTime()+288e5)),this.query.endTime&&(t.endCreateTime=new Date(this.query.endTime.getTime()+288e5)),this.query.keyword.length>0&&(1==this.query.searchType?t.userName=this.query.keyword:t.mobileNum=this.query.keyword),e.axios.post("/proxy/report-business/booking/v2/api/ordermanager/getOrderList/"+e.pageInfo.currPage+"/"+e.pageInfo.pageSize,t).then(function(t){t.data&&t.data.data&&(e.list=_.map(t.data.data,function(t){return t.payInfo=t.payMoneny?t.payMoneny+(t.payType?"\n "+_.findWhere(e.payTypes,{key:t.payType}).val:"")+(t.payStatus?"\n "+_.findWhere(e.payStatus,{key:t.payStatus}).val:""):"",t.goodsInfo=t.userName?t.userName+(t.mobileNum?"\n "+t.mobileNum:""):"",t.payTime&&t.payTime.length>0&&(t.payTime=e.getTime(t.payTime)),t}),e.pageInfo=t.data.pageInfo)}).catch(function(e){console.log(e)})}}},Ut={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("订单管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search user_search"},[a("el-row",[a("el-col",{staticStyle:{"line-height":"30px"},attrs:{span:1.5}},[a("span",[e._v("付款时间")])]),e._v(" "),a("el-col",{attrs:{span:9.5}},[a("div",{staticClass:"seach_date_picker",staticStyle:{width:"470px",display:"inline-block"}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"开始时间"},model:{value:e.query.startTime,callback:function(t){e.$set(e.query,"startTime",t)},expression:"query.startTime"}})],1),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("至")]),e._v(" "),a("div",{staticStyle:{display:"inline-block"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"结束时间"},model:{value:e.query.endTime,callback:function(t){e.$set(e.query,"endTime",t)},expression:"query.endTime"}})],1)])]),e._v(" "),a("el-col",{staticStyle:{"line-height":"30px"},attrs:{span:1.5}},[a("span",[e._v("付款状态")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticStyle:{width:"80%"},on:{change:e.searchInfo},model:{value:e.query.payType,callback:function(t){e.$set(e.query,"payType",t)},expression:"query.payType"}},e._l(e.payStatus,function(e){return a("el-option",{key:e.key,attrs:{label:e.val,value:e.key}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticStyle:{width:"80%"},model:{value:e.query.searchType,callback:function(t){e.$set(e.query,"searchType",t)},expression:"query.searchType"}},e._l(e.searchTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword","string"==typeof t?t.trim():t)},expression:"query.keyword"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNumber",label:"订单编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsInfoName",label:"商品名",width:"288"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsInfo",label:"收货信息",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payInfo",label:"款项",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTime",label:"付款时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("span",{staticClass:"el-icon-view",on:{click:function(a){e.viewAccount(t.row)}}})])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:"订单详情",visible:e.dialogAccountVisible,width:"700px","lock-scroll":!1},on:{"update:visible":function(t){e.dialogAccountVisible=t}}},[a("div",{staticClass:"account_detail"},[a("el-row",{staticStyle:{width:"100%",border:"1px solid #e8e8e8","border-bottom":"0","background-color":"#f0f0f0"},attrs:{gutter:2}},[a("el-col",{attrs:{span:10,offset:1,align:"center"}},[e._v("商品")]),e._v(" "),a("el-col",{attrs:{span:5,offset:1}},[e._v("单价")]),e._v(" "),a("el-col",{attrs:{span:3,offset:0}},[e._v("数量")]),e._v(" "),a("el-col",{attrs:{span:4,offset:0}},[e._v("交易状态")])],1),e._v(" "),a("el-row",{staticStyle:{width:"100%",border:"1px solid #e8e8e8","margin-bottom":"10px","padding-bottom":"10px"},attrs:{gutter:2}},[a("el-col",{staticStyle:{"padding-left":"20px","padding-top":"10px"},attrs:{span:4,offset:0}},[a("img",{attrs:{src:e.detail.goodsPictureUrl,width:"88",height:"88"}})]),e._v(" "),a("el-col",{staticStyle:{"padding-top":"10px"},attrs:{span:6,offset:1}},[a("div",{},[e._v(e._s(e.detail.goodsInfoName))])]),e._v(" "),a("el-col",{staticStyle:{"padding-top":"10px"},attrs:{span:5,offset:1}},[a("div",{},[e._v("¥ "+e._s(e.detail.payMoneny))])]),e._v(" "),a("el-col",{staticStyle:{"padding-top":"10px"},attrs:{span:3,offset:0}},[a("div",{},[e._v(e._s(e.detail.goodsAmount))])]),e._v(" "),a("el-col",{staticStyle:{"padding-top":"10px"},attrs:{span:4,offset:0}},[a("div",{},[e._v(e._s(e.detail.jyzt))])])],1),e._v(" "),a("div",{staticStyle:{border:"1px solid #e8e8e8",padding:"10px 10px 10px 0"}},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("订单编号")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:1}},[a("div",{},[e._v(e._s(e.detail.orderNumber))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("支付方式")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:1}},[a("div",{},[e._v(e._s(e.detail.payTypes))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("微信交易号")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:1}},[a("div",{},[e._v(e._s(e.detail.wxPayNumber))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("创建时间")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:1}},[a("div",{},[e._v(e._s(e.detail.createTime))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("付款时间")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:1}},[a("div",{},[e._v(e._s(e.detail.payTime))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("使用有效期限")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:1}},[a("div",{},[e._v(e._s(e.detail.effects))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("可使用次数")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:1}},[a("div",{},[e._v(e._s(e.detail.frequency))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("收货信息")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:1}},[a("div",{},[e._v(e._s(e.detail.goodsInfo))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"dialog_label"},[e._v("服务详情")])]),e._v(" "),a("el-col",{staticStyle:{width:"79%","margin-top":"5px"},attrs:{span:12,offset:1}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.detail.detailList,"tooltip-effect":"dark",border:"","header-cell-class-name":"order_detail_th","cell-class-name":"order_detail_td"}},[a("el-table-column",{attrs:{label:"序号",prop:"idx"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"服务名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsType",label:"服务类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"服务时间"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAccountVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Rt=a("VU/8")(Ft,Ut,!1,function(e){a("HfEL")},null,null).exports,Vt={name:"cExamfile",props:["question","filelist","readonly","noJpg","usedVolume","volume","qid"],data:function(){return{noJpg:!1,purl:"/proxy/report-business/booking/v1/api/file/display/",durl:"/proxy/report-business/booking/v1/api/file/download/display/",ufilelist:[],uploading:null,usedVolume:"",question:[],volume:"",qid:"",actionUrl:"",userId:"",tokens:sessionStorage.getItem("token")}},mounted:function(){this.actionUrl="/zuul/proxy/report-consumer/booking/v1/api/file/"+sessionStorage.getItem("activeUid"),this.userId=sessionStorage.getItem("activeUid"),0==location.hostname.indexOf("console")&&(this.purl="http://www.bysxzx.com"+this.purl,this.durl="http://www.bysxzx.com"+this.durl)},computed:{header:function(){return{Authorization:sessionStorage.getItem("token")}}},watch:{filelist:function(){var e=this;this.ufilelist=_.compact(_.map(this.filelist,function(t){var a=t;return e.noJpg||"jpg"!=!t.type||"jpeg"!=!t.type||(a=null),a})),this.question=_.map(this.question,function(t){return _.findWhere(e.filelist,{id:t.fid})&&(t.fileName=_.findWhere(e.filelist,{id:t.fid}).fileName,t.type=_.findWhere(e.filelist,{id:t.fid}).type),t})},question:function(e){this.$emit("updateq",e,this.qid)}},methods:{isfirst:function(e){return 0==_.findIndex(this.question,e)},filterD:function(){var e=this;this.ufilelist=_.compact(_.map(this.filelist,function(t){var a=t;return e.noJpg||"jpg"!=!t.type||"jpeg"!=!t.type||(a=null),_.findWhere(e.question,{fid:t.id})&&(a=null,_.findWhere(e.question,{fid:t.id}).fileName=t.fileName),a}))},validOp:function(){var e=this;this.question=_.map(this.question,function(t){return _.findWhere(e.filelist,{id:t.fid})&&(t.fileName=_.findWhere(e.filelist,{id:t.fid}).fileName),t})},addOp:function(){""!=this.question[this.question.length-1].fid&&(this.question.length>8?this.$message.error("最多添加9"):(this.filterD(),this.question.push({fid:"",fileName:""})))},removeOp:function(e){this.question.length>1?this.question.splice(_.findIndex(this.question,e),1):this.question=[{fid:"",fileName:""}],this.filterD()},beforeUpload:function(e){var t=e.name.lastIndexOf("."),a=e.name.substring(t+1),o="image/jpg"===e.type,s="image/jpeg"===e.type,i="xls"===a,r="xlsx"===a,n="doc"===a,l="docx"===a,c=e.size/1024/1024<3,d=this.isOverVolume(this.usedVolume,e.size);return!this.noJpg&&(i||r||n||l)?(this.$message.error("上传文件只能是 jpg,jpeg 格式!"),!1):(o||s||i||r||n||l||this.$message.error("上传文件只能是 jpg,jpeg,xls,xlsx,doc,docx 格式!"),c||this.$message.error("上传文件大小不能超过 3MB!"),d?(this.$message.error("上传文件后已使用容量将超过最大数"+this.volume),!1):((o||s||i||r||n||l)&&c&&(this.uploading=this.$loading({lock:!0,text:"上传中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})),(o||s||i||r||n||l)&&c))},formateVolume:function(e){var t,a;return-1!==e.indexOf("KB")?(a=e.slice(0,e.indexOf("KB")),t=1024):-1!==e.indexOf("MB")?(a=e.slice(0,e.indexOf("MB")),t=1048576):-1!==e.indexOf("GB")&&(a=e.slice(0,e.indexOf("GB")),t=1073741824),parseInt(a)*t},isOverVolume:function(e,t){var a=this.formateVolume(e),o=this.formateVolume(this.volume);return void 0!==a&&a+t>o},setImgInfo:function(e,t,a){this.uploading.close(),"500"!=e.code?(this.ufilelist.push({id:e.data,fileName:t.name}),""==this.question[this.question.length-1].fid?(this.question.splice(this.question.length-1,1),this.question.push({fid:e.data,fileName:t.name})):this.question.push({fid:e.data,fileName:t.name}),this.$parent.$parent.getFileList(),this.$message({message:"恭喜你，上传文件成功！",type:"success"})):this.$message.error(e.msg)},handlerError:function(e,t,a){this.uploading.close(),this.$message({showClose:!0,message:"上传失败，请检查您的文件和网络后重新上传!",type:"error"})}}},Ot={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"exam-file-wrapper"},e._l(e.question,function(t){return a("el-form-item",{key:t.id},[a("el-select",{staticClass:"exam-select-item",attrs:{disabled:e.readonly,"no-data-text":"暂无数据，可以通过我的文件进行上传文件","popper-class":"examfile-select"},on:{change:e.validOp},model:{value:t.fid,callback:function(a){e.$set(t,"fid",a)},expression:"op.fid"}},e._l(e.ufilelist,function(e){return a("el-option",{key:e.id,attrs:{label:e.fileName,value:e.id}})})),e._v(" "),a("div",{staticClass:"exam-file"},[!e.readonly&&e.isfirst(t)?a("el-upload",{staticStyle:{display:"inline-block","margin-left":"5px"},attrs:{action:e.actionUrl,"on-success":e.setImgInfo,headers:e.header,"on-error":e.handlerError,"before-upload":e.beforeUpload,"show-file-list":!1}},[a("span",{staticClass:"exam-file-btn el-icon-upload2"})]):e._e(),e._v(" "),t.fileName&&t.fileName.length>0&&("jpg"==t.type||"jpeg"==t.type)?a("a",{staticClass:"exam-file-btn el-icon-view",attrs:{href:[e.purl+t.fid+"?token="+e.tokens],target:"_blank"}}):e._e(),e._v(" "),e.readonly?e._e():a("span",{staticClass:"exam-file-btn el-icon-plus",on:{click:function(t){t.preventDefault(),e.addOp()}}}),e._v(" "),!e.readonly&&e.question.length>1?a("span",{staticClass:"exam-file-btn el-icon-minus",on:{click:function(a){a.preventDefault(),e.removeOp(t)}}}):e._e()],1)],1)}))},staticRenderFns:[]};var zt=a("VU/8")(Vt,Ot,!1,function(e){a("IAyE")},null,null).exports,Bt=a("XRkv"),jt=a("rH5K"),Ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"menu_btns"},[a("a",{staticClass:"go_top",attrs:{href:"javascript:;"},on:{click:e.goTop}},[a("span"),a("samp",[e._v("顶部")])]),e._v(" "),a("a",{staticClass:"save",attrs:{href:"javascript:;"},on:{click:e.save}},[a("span"),a("samp",[e._v("保存")])]),e._v(" "),a("a",{staticClass:"go_act",attrs:{href:"javascript:;"},on:{click:e.goActive}},[a("span"),a("samp",[e._v("申报活动")])]),e._v(" "),a("a",{staticClass:"go-file",attrs:{href:"javascript:;"},on:{click:e.goFile}},[a("span"),a("samp",[e._v("上传文件")])])])])},staticRenderFns:[]},Gt=a("VU/8")(jt.a,Ht,!1,null,null,null).exports,Wt={name:"cExamstudent",components:{bFooter:h.a,bHeader:g.a,cExamfile:zt,sidebar:Gt},data:function(){return{userInfo:{},form:{name:"cExamstudent",q101:"",q102:"",q2:"",q301:"",q401:"",q402:"",q403:"",q501:"",q502:"",q503:"",q601:"",q602:"",q603:"",q604:"",q701:"",q702:"",q302:[{fid:"",fileName:""}]},filelist:[],usedVolume:"",volume:"",radioList:[{id:1,name:"A. 非常满意"},{id:2,name:"B. 较满意"},{id:3,name:"C. 尚可"}],readonly:!1}},created:function(){C()(this,Bt.a.examFunc)},mounted:function(){this.initPage()},methods:{updateq:function(e,t){this.form[t]=e}},watch:{form:{handler:function(e,t){this.changed=!0},deep:!0},"form.q101":function(e,t){this.validInt(e)||(this.form.q101=t)},"form.q401":function(e,t){this.validInt(e)||(this.form.q401=t)},"form.q402":function(e,t){this.validInt(e)||(this.form.q402=t)},"form.q501":function(e,t){this.validInt(e)||(this.form.q501=t)},"form.q502":function(e,t){this.validInt(e)||(this.form.q502=t)},"form.q601":function(e,t){this.validInt(e)||(this.form.q601=t)},"form.q602":function(e,t){this.validInt(e)||(this.form.q602=t)},"form.q603":function(e,t){this.validInt(e)||(this.form.q603=t)},"form.q604":function(e,t){this.validInt(e)||(this.form.q604=t)}}},Qt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"place"}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"exam_box c-exam-box"},[a("div",{staticClass:"exam_header"},[a("h1",[e._v("书香校园申报——学生填报")]),e._v(" "),a("div",{staticClass:"fl"},[a("span",{staticClass:"fontweigth"},[e._v("申报学校：")]),a("span",[e._v(e._s(e.userInfo.schoolName))])]),e._v(" "),a("div",{staticClass:"fr"},[a("span",{staticClass:"fontweigth"},[e._v("申报填写人：")]),a("span",[e._v(e._s(e.userInfo.realName))])]),e._v(" "),a("div",{staticClass:"clearfix"})]),e._v(" "),a("el-form",{attrs:{model:e.form}},[a("div",{staticClass:"exam_content"},[a("div",{staticClass:"content_header"},[a("h1",[e._v("第一部分 书香活动与分享")]),e._v(" "),a("p",[e._v("(共4题，共4分)")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("一、阅读分享")]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("1.  学生每学期参与阅读分享会\n                                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q101,expression:"form.q101"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q101},on:{input:function(t){t.target.composing||e.$set(e.form,"q101",t.target.value)}}}),e._v("\n                                    次，并填报主要书目及分享会感想。（1分）\n                                ")])])]),e._v(" "),a("div",{staticClass:"con_textarea"},[a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",autosize:{minRows:9,maxRows:4},placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q102,callback:function(t){e.$set(e.form,"q102",t)},expression:"form.q102"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("2.  学生是否有在公开刊物上发表文章?请填报刊物名称、期号和文章名。（1分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",autosize:{minRows:9,maxRows:4},placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q2,callback:function(t){e.$set(e.form,"q2",t)},expression:"form.q2"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("3.   学生是否参与阅读志愿服务（进社区、福利机构、公共文化机构等）？请以图文形式简述次数及成果。（最少1张，最多9张）（1分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",autosize:{minRows:9,maxRows:4},placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q301,callback:function(t){e.$set(e.form,"q301",t)},expression:"form.q301"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q302",question:e.form.q302,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("二、家校阅读互动")]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("4.  每周家庭阅读时长 \n                                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q401,expression:"form.q401"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q401},on:{input:function(t){t.target.composing||e.$set(e.form,"q401",t.target.value)}}}),e._v("\n                                     小时、每月阅读分享\n                                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q402,expression:"form.q402"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q402},on:{input:function(t){t.target.composing||e.$set(e.form,"q402",t.target.value)}}}),e._v("次，并填报主要书目。（1分）\n                                ")])])]),e._v(" "),a("div",{staticClass:"con_textarea"},[a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",autosize:{minRows:9,maxRows:4},placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q403,callback:function(t){e.$set(e.form,"q403",t)},expression:"form.q403"}})],1)]),e._v(" "),a("div",{staticClass:"exam_content"},[a("div",{staticClass:"content_header"},[a("h1",[e._v("第二部分 书香行为与成效")]),e._v(" "),a("p",[e._v("(共3题，共7分)")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("三、学生阅读行动")]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("5.  学生完成学校推荐书单阅读完成量 \n                                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q501,expression:"form.q501"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q501},on:{input:function(t){t.target.composing||e.$set(e.form,"q501",t.target.value)}}}),e._v("\n                                    册，每周课外平均阅读时长\n                                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q502,expression:"form.q502"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q502},on:{input:function(t){t.target.composing||e.$set(e.form,"q502",t.target.value)}}}),e._v("小时，并填报主要书目。（3分）\n                                ")])]),e._v(" "),a("p",{staticClass:"exam-box-refer"},[e._v("（参考：每人每学年"),a("samp",{staticClass:"symbol"}),e._v("30册；小学每周不少于3.5小时；中学（非毕业班）每周不少于7小时）")])]),e._v(" "),a("div",{staticClass:"con_textarea"},[a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",autosize:{minRows:9,maxRows:4},placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q503,callback:function(t){e.$set(e.form,"q503",t)},expression:"form.q503"}})],1),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("6.  每学年完成读书札记 \n                                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q601,expression:"form.q601"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q601},on:{input:function(t){t.target.composing||e.$set(e.form,"q601",t.target.value)}}}),e._v("\n                                    篇、笔记\n                                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q602,expression:"form.q602"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q602},on:{input:function(t){t.target.composing||e.$set(e.form,"q602",t.target.value)}}}),e._v("\n                                    篇、随笔\n                                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q603,expression:"form.q603"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q603},on:{input:function(t){t.target.composing||e.$set(e.form,"q603",t.target.value)}}}),e._v("\n                                    篇、读后感\n                                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q604,expression:"form.q604"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q604},on:{input:function(t){t.target.composing||e.$set(e.form,"q604",t.target.value)}}}),e._v("\n                                    篇。（3分）\n                                ")])]),e._v(" "),a("p",{staticClass:"exam-box-refer"},[e._v("（参考：每人每学年≥6篇）")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("四、书香成效")]),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("7. 请简述学生本人对学校阅读相关规划、制度、环境及资源的评价及建议，按A（非常满意）、B（较满意）、C（尚可）三个等级评价。（1分）")]),e._v(" "),a("div",{staticClass:"exam-box-radio"},[a("el-radio-group",{attrs:{disabled:e.readonly},model:{value:e.form.q701,callback:function(t){e.$set(e.form,"q701",t)},expression:"form.q701"}},e._l(e.radioList,function(t){return a("el-radio",{key:t.id,attrs:{label:t.name,value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请文字简述")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",autosize:{minRows:9,maxRows:4},placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q702,callback:function(t){e.$set(e.form,"q702",t)},expression:"form.q702"}})],1)])])],1),e._v(" "),a("div",{staticClass:"step-wrapper"},[e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("submit")}}},[e._v("提 交")])]),e._v(" "),e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("save")}}},[e._v("保 存")])])])]),e._v(" "),a("bFooter"),e._v(" "),e.readonly?e._e():a("sidebar")],1)},staticRenderFns:[]};var Yt=a("VU/8")(Wt,Qt,!1,function(e){a("xem1")},null,null).exports,Jt={name:"cExamschool",components:{bFooter:h.a,bHeader:g.a,cExamfile:zt,sidebar:Gt},data:function(){var e;return{userInfo:{},form:(e={name:"cExamschool",q1:"",q2:"",q3:"",q4:"",q5:"",q601:"",q602:"",q701:"",q702:"",q703:"",q10:"",q11:"",q1301:"",q1302:"",q1401:"",q1402:"",q1403:"",q1404:"",q1405:"",q1406:"",q15:"",q16:"",q17:"",q1801:"",q1901:"",q2001:"",q2101:"",q2102:"",q2103:"",q22:"",q2301:"",q2302:""},f()(e,"q2302",""),f()(e,"q2303",""),f()(e,"q2304",""),f()(e,"q2305",""),f()(e,"q2401",""),f()(e,"q8",[{fid:"",fileName:""}]),f()(e,"q9",[{fid:"",fileName:""}]),f()(e,"q12",[{fid:"",fileName:""}]),f()(e,"q1802",[{fid:"",fileName:""}]),f()(e,"q1902",[{fid:"",fileName:""}]),f()(e,"q2002",[{fid:"",fileName:""}]),f()(e,"q2402",[{fid:"",fileName:""}]),f()(e,"booknumber",""),f()(e,"chinaBook",""),f()(e,"englishBook",""),f()(e,"otherBook",""),f()(e,"classicBook",""),e),filelist:[],usedVolume:"",volume:"",readonly:!1,bookErr:!1}},created:function(){C()(this,Bt.a.examFunc)},mounted:function(){this.initPage()},methods:{updateq:function(e,t){this.form[t]=e}},computed:{bookBudget:function(e){return this.form.q601>0&&this.form.q602>0?(Number(this.form.q602)/Number(this.form.q601)*100).toFixed(2):""},fundsBudget:function(e){return this.form.q701>0&&this.form.q702>0?(Number(this.form.q701)/Number(this.form.q702)*100).toFixed(2):""},borrowRate:function(e){return this.form.q2101>0&&this.form.q2102>0?((Number(this.form.q2101)+Number(this.form.q2102))/(Number(this.form.schoolNumber)+Number(this.form.teacherNumber))*100).toFixed(2):""}},watch:{form:{handler:function(e,t){this.changed=!0},deep:!0},"form.q2101":function(e,t){this.validInt(e)||(this.form.q2101=t)},"form.q2102":function(e,t){this.validInt(e)||(this.form.q2102=t)},"form.q2301":function(e,t){this.validInt(e)||(this.form.q2301=t)},"form.q2302":function(e,t){this.validInt(e)||(this.form.q2302=t)},"form.q2303":function(e,t){this.validInt(e)||(this.form.q2303=t)},"form.q2304":function(e,t){this.validInt(e)||(this.form.q2304=t)},"form.q604":function(e,t){this.validInt(e)||(this.form.q604=t)},"form.q2305":function(e,t){this.validInt(e)||(this.form.q2305=t)},"form.classicBook":function(e,t){this.validInt(e)||(this.form.classicBook=t)},"form.booknumber":function(e,t){if(this.validInt(e)){var a="";if(a=e>0&&this.form.schoolNumber?Number(e)/this.form.schoolNumber:"",this.form.avgnumber=a,e&&this.form.chinaBook&&this.form.englishBook&&this.form.otherBook){var o=Number(this.form.chinaBook)+Number(this.form.englishBook)+Number(this.form.otherBook);this.bookErr=Number(e)!==o}else this.bookErr=!1}else this.form.booknumber=t},"form.chinaBook":function(e,t){if(this.validInt(e))if(this.form.booknumber&&e&&this.form.englishBook&&this.form.otherBook){var a=Number(e)+Number(this.form.englishBook)+Number(this.form.otherBook);this.bookErr=Number(this.form.booknumber)!==a}else this.bookErr=!1;else this.form.chinaBook=t},"form.englishBook":function(e,t){if(this.validInt(e))if(this.form.booknumber&&this.form.chinaBook&&e&&this.form.otherBook){var a=Number(this.form.chinaBook)+Number(e)+Number(this.form.otherBook);this.bookErr=Number(this.form.booknumber)!==a}else this.bookErr=!1;else this.form.englishBook=t},"form.otherBook":function(e,t){if(this.validInt(e))if(this.form.booknumber&&this.form.chinaBook&&this.form.englishBook&&e){var a=Number(this.form.chinaBook)+Number(this.form.englishBook)+Number(e);this.bookErr=Number(this.form.booknumber)!==a}else this.bookErr=!1;else this.form.otherBook=t}}},Kt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"place"}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"exam_box c-exam-box"},[a("div",{staticClass:"exam_header"},[a("h1",[e._v("书香校园申报——校园填报")]),e._v(" "),a("div",{staticClass:"fl"},[a("span",{staticClass:"fontweigth"},[e._v("申报学校：")]),a("span",[e._v(e._s(e.userInfo.schoolName))])]),e._v(" "),a("div",{staticClass:"fr"},[a("span",{staticClass:"fontweigth"},[e._v("申报填写人：")]),a("span",[e._v(e._s(e.userInfo.realName))])]),e._v(" "),a("div",{staticClass:"clearfix"})]),e._v(" "),a("el-form",{attrs:{model:e.form,rules:e.rule,id:"exform"}},[a("div",{staticClass:"exam_content"},[a("div",{staticClass:"content_header"},[a("h1",[e._v("第一部分 书香保障与投入")]),e._v(" "),a("p",[e._v("（共7题，共15分）")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("一、组织保障")]),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("1.  是否成立由校长负责的“书香校园”创建领导小组，设立包含各科教师在内的校园阅读实施工作组？请填报名单。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{name:"ttt",type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q1,callback:function(t){e.$set(e.form,"q1",t)},expression:"form.q1"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("2.  是否将“书香校园”活动列入学校文化建设重要内容，有“书香校园”智慧化建设的中短期规划和规章制度？请填写内容。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q2,callback:function(t){e.$set(e.form,"q2",t)},expression:"form.q2"}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("3.  是否有明确的“书香校园”创建活动目标、主题和口号，保障创建知晓率及参与率100%？请填写内容。（2分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q3,callback:function(t){e.$set(e.form,"q3",t)},expression:"form.q3"}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("4.  是否有与阅读工作相关的校级学年计划？请填写内容。（1分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q4,callback:function(t){e.$set(e.form,"q4",t)},expression:"form.q4"}})],1),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("二、资金保障")]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("5.  年度创建专项经费预算：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q5,expression:"form.q5"}],staticClass:"exam-input",attrs:{name:"currency",type:"number",disabled:e.readonly},domProps:{value:e.form.q5},on:{input:function(t){t.target.composing||e.$set(e.form,"q5",t.target.value)}}}),e._v(" "),a("span",[e._v("元。（1分）")])])]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("6.  创建学年生均购书经费支出预算：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q601,expression:"form.q601"}],staticClass:"exam-input",attrs:{name:"currency",type:"number",disabled:e.readonly},domProps:{value:e.form.q601},on:{input:function(t){t.target.composing||e.$set(e.form,"q601",t.target.value)}}}),e._v(" "),a("span",[e._v("元；生均经费：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q602,expression:"form.q602"}],staticClass:"exam-input",attrs:{name:"currency",type:"number",disabled:e.readonly},domProps:{value:e.form.q602},on:{input:function(t){t.target.composing||e.$set(e.form,"q602",t.target.value)}}}),e._v(" "),a("span",[e._v("元；学年生均购书经费支出占生均经费：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.bookBudget,expression:"bookBudget"}],staticClass:"exam-input",attrs:{type:"text",readonly:"readonly"},domProps:{value:e.bookBudget},on:{input:function(t){t.target.composing||(e.bookBudget=t.target.value)}}}),e._v(" "),a("span",[e._v("% 。(2分)")])])]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("7.  年度专门读书活动经费预算：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q701,expression:"form.q701"}],staticClass:"exam-input",attrs:{name:"currency",type:"number",disabled:e.readonly},domProps:{value:e.form.q701},on:{input:function(t){t.target.composing||e.$set(e.form,"q701",t.target.value)}}}),e._v(" "),a("span",[e._v("元；教育经费预算：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q702,expression:"form.q702"}],staticClass:"exam-input",attrs:{name:"currency",type:"number",disabled:e.readonly},domProps:{value:e.form.q702},on:{input:function(t){t.target.composing||e.$set(e.form,"q702",t.target.value)}}}),e._v(" "),a("span",[e._v("元；读书活动经费预算占教育经费预算比例：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fundsBudget,expression:"fundsBudget"}],staticClass:"exam-input",attrs:{type:"text",readonly:"readonly"},domProps:{value:e.fundsBudget},on:{input:function(t){t.target.composing||(e.fundsBudget=t.target.value)}}}),e._v(" "),a("span",[e._v("% 。(3分)")])])])]),e._v(" "),a("div",{staticClass:"exam_content"},[a("div",{staticClass:"content_header"},[a("h1",[e._v("第二部分 书香环境与资源")]),e._v(" "),a("p",[e._v("（共9题，共26分））")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("三、阅读氛围")]),e._v(" "),a("div",{staticClass:"con_textarea "},[a("div",{staticClass:"select_div"},[a("h2",[e._v("8.  请上传学校公共场所悬挂与读书有关的格言、标语并适时更新的图片。（最少1张，最多9张)。（2分）")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q8",question:e.form.q8,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1)]),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("9.  请拍照上传校园、班级合理布置体现书香氛围的橱窗、阅读屏、黑板报等图片。（最少1张，最多9张)。（3分）")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q9",question:e.form.q9,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("div",{staticClass:"con_textarea  "},[a("h2",[e._v("10. 校园网站是否设有开展读书活动、创建书香校园的网页并经常更新内容？请上传链接。（2分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"text",name:"ip",placeholder:"填写网页链接地址 http://",disabled:e.readonly},model:{value:e.form.q10,callback:function(t){e.$set(e.form,"q10",t)},expression:"form.q10"}})],1),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("四、阅读设施")]),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("11. 是否设有校级图书馆，并有专人管理，有信息化流通管理机制和方式？请将实施流通管理的软件及其机制予以文字说明。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q11,callback:function(t){e.$set(e.form,"q11",t)},expression:"form.q11"}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("12. 是否设有由学生参与管理的校舍特色阅读空间、班级图书角等？请上传图片。（最少1张，最多9张）（3分）")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,qid:"q12",volume:e.volume,question:e.form.q12,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("13. 是否设有电子阅读器等数字阅读移动设备，创新信息化、电子化、有声听书的阅读方式和手段？请将软硬件及其实施机制予以文字说明，输入网址链接。(3分)")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q1301,callback:function(t){e.$set(e.form,"q1301",t)},expression:"form.q1301"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("网址链接")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"text",name:"ip",placeholder:"填写网页链接地址 http://",disabled:e.readonly},model:{value:e.form.q1302,callback:function(t){e.$set(e.form,"q1302",t)},expression:"form.q1302"}})],1),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("五、阅读资源")]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("14. 图书总册数：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.booknumber,expression:"form.booknumber"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.booknumber},on:{input:function(t){t.target.composing||e.$set(e.form,"booknumber",t.target.value)}}}),e._v(" "),a("span",[e._v("册，学生人均图书量：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.avgnumber,expression:"form.avgnumber"}],staticClass:"exam-input",attrs:{name:"int",type:"text",readonly:"readonly"},domProps:{value:e.form.avgnumber},on:{input:function(t){t.target.composing||e.$set(e.form,"avgnumber",t.target.value)}}}),e._v(" "),a("span",[e._v("册，主题图书：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.classicBook,expression:"form.classicBook"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.classicBook},on:{input:function(t){t.target.composing||e.$set(e.form,"classicBook",t.target.value)}}}),e._v(" "),a("span",[e._v("册（不低于馆藏总量的5%）。")])])]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("语种：中文")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.chinaBook,expression:"form.chinaBook"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.chinaBook},on:{input:function(t){t.target.composing||e.$set(e.form,"chinaBook",t.target.value)}}}),e._v(" "),a("span",[e._v("册，英文")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.englishBook,expression:"form.englishBook"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.englishBook},on:{input:function(t){t.target.composing||e.$set(e.form,"englishBook",t.target.value)}}}),e._v(" "),a("span",[e._v("册，其他语种：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.otherBook,expression:"form.otherBook"}],staticClass:"exam-input",attrs:{id:"otherBook",name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.otherBook},on:{input:function(t){t.target.composing||e.$set(e.form,"otherBook",t.target.value)}}}),e._v(" "),a("span",[e._v("册。（4分）。")])]),e._v(" "),a("p",{staticClass:"exam-box-refer"},[e._v("(参考：小学纸质书刊生均藏书量"),a("samp",{staticClass:"symbol"}),e._v("册，初中"),a("samp",{staticClass:"symbol"}),e._v("30册，高中"),a("samp",{staticClass:"symbol"}),e._v("40册。）"),e.bookErr?a("span",{staticStyle:{color:"#f00"}},[e._v("中文，英文，其他语言相加之和必须等于图书总册数")]):e._e()])]),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("15. 是否配备一定数量的电子、有声图书等阅读资源？请输入网址链接。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"text",name:"ip",placeholder:"填写网页链接地址 http://",disabled:e.readonly},model:{value:e.form.q15,callback:function(t){e.$set(e.form,"q15",t)},expression:"form.q15"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("16. 是否每学年有针对不同年级的推荐书单，并有师生、家长和专家学者等多方参与的书刊采购机制？请上传学年推荐书刊清单，并文字说明书单制订的参与名单及采购机制。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q16,callback:function(t){e.$set(e.form,"q16",t)},expression:"form.q16"}})],1)]),e._v(" "),a("div",{staticClass:"exam_content"},[a("div",{staticClass:"content_header"},[a("h1",[e._v("第三部分 书香活动与分享")]),e._v(" "),a("p",[e._v("（共4题，共12分）")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("六、阅读活动")]),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("17. 请填报创立校园阅读、写作、表演等相关社团组织的数量和社团活动学年计划，并文字说明社团活动学年成果，介绍社团信息化管理手段。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q17,callback:function(t){e.$set(e.form,"q17",t)},expression:"form.q17"}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("18. 每学年举办“书香校园”系列活动数量（至少三项），包括校园阅读推广人和阅读之星评选、主题阅读、写作竞赛、朗诵等。请以图文形式简述活动内容。（5分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q1801,callback:function(t){e.$set(e.form,"q1801",t)},expression:"form.q1801"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q1802",question:e.form.q1802,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("19. 请简要图文陈述学校参与国家级、省级、地市级、县区级、镇街级阅读相关活动次数及成果。（最少1张，最多9张)。（3分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q1901,callback:function(t){e.$set(e.form,"q1901",t)},expression:"form.q1901"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q1902",question:e.form.q1902,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("七、阅读分享")]),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("20. 学校是否拥有校报校刊，或将师生作品整理结集出版，总结推介相关成功的经验做法？请以图文形式予以简述。（最少1张，最多9张)。（1分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q2001,callback:function(t){e.$set(e.form,"q2001",t)},expression:"form.q2001"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q2002",question:e.form.q2002,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1)]),e._v(" "),a("div",{staticClass:"exam_content"},[a("div",{staticClass:"content_header"},[a("h1",[e._v("第四部分 书香行为与成效")]),e._v(" "),a("p",[e._v("（共4题，共9分）")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("八、学生阅读行为")]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("21. 学校图书馆纸质书刊借阅总数：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q2101,expression:"form.q2101"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q2101},on:{input:function(t){t.target.composing||e.$set(e.form,"q2101",t.target.value)}}}),e._v(" "),a("span",[e._v("；电子书或有声图书阅读量：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q2102,expression:"form.q2102"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q2102},on:{input:function(t){t.target.composing||e.$set(e.form,"q2102",t.target.value)}}}),e._v(" "),a("span",[e._v("；学校图书馆书刊生均借阅率：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.borrowRate,expression:"borrowRate"}],staticClass:"exam-input",attrs:{type:"number",readonly:"readonly"},domProps:{value:e.borrowRate},on:{input:function(t){t.target.composing||(e.borrowRate=t.target.value)}}}),e._v(" "),a("span",[e._v("% 。（3分）")])])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("九、书香成效 ")]),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("22. 是否采用大数据手段进行阅读效果测评并形成分析报告？请用文字简述大数据来源和报告分析过程。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",autosize:{minRows:9,maxRows:4},placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q22,callback:function(t){e.$set(e.form,"q22",t)},expression:"form.q22"}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("23. 各类媒体对学校阅读活动宣传报道次数:")])]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("国家级：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q2301,expression:"form.q2301"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q2301},on:{input:function(t){t.target.composing||e.$set(e.form,"q2301",t.target.value)}}}),e._v(" "),a("span",[e._v("次；省级：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q2302,expression:"form.q2302"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q2302},on:{input:function(t){t.target.composing||e.$set(e.form,"q2302",t.target.value)}}}),e._v(" "),a("span",[e._v("次；地市级：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q2303,expression:"form.q2303"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q2303},on:{input:function(t){t.target.composing||e.$set(e.form,"q2303",t.target.value)}}}),e._v(" "),a("span",[e._v("次；县区级：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q2304,expression:"form.q2304"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q2304},on:{input:function(t){t.target.composing||e.$set(e.form,"q2304",t.target.value)}}}),e._v(" "),a("span",[e._v("次；镇街级：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q2305,expression:"form.q2305"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q2305},on:{input:function(t){t.target.composing||e.$set(e.form,"q2305",t.target.value)}}}),e._v(" "),a("span",[e._v("次。")])])]),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h4",{staticClass:"con-textarea-text"},[e._v("并文字列举报道机构和报道标题。（2分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q2306,callback:function(t){e.$set(e.form,"q2306",t)},expression:"form.q2306"}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("24. 请上传学校对师生、家长执行学校阅读计划的满意度调查问卷，并简述调查结果。（1分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("填报调查结果")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q2401,callback:function(t){e.$set(e.form,"q2401",t)},expression:"form.q2401"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("上传问卷原稿")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q2402",question:e.form.q2402,readonly:e.readonly,filelist:e.filelist,noJpg:!0},on:{updateq:this.updateq}})],1)])])],1),e._v(" "),a("div",{staticClass:"step-wrapper"},[e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("submit",e.bookErr)}}},[e._v("提 交")])]),e._v(" "),e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("save",e.bookErr)}}},[e._v("保 存")])])])]),e._v(" "),a("bFooter"),e._v(" "),e.readonly?e._e():a("sidebar",{attrs:{err:e.bookErr}})],1)},staticRenderFns:[]};var Xt=a("VU/8")(Jt,Kt,!1,function(e){a("63Ub")},null,null).exports,Zt={name:"cExamKindergarten",components:{bFooter:h.a,bHeader:g.a,cExamfile:zt,sidebar:Gt},data:function(){return{userInfo:{},form:{name:"cExamKindergarten",q1:"",q2:"",q3:"",q4:"",q5:"",q601:"",q602:"",q603:"",q901:"",q902:"",q903:"",q904:"",q905:"",q906:"",q907:"",q908:"",q909:"",q1001:"",q1101:"",q1201:"",q7:[{fid:"",fileName:""}],q8:[{fid:"",fileName:""}],q9:[{fid:"",fileName:""}],q1002:[{fid:"",fileName:""}],q1102:[{fid:"",fileName:""}],q1202:[{fid:"",fileName:""}]},readonly:!1,filelist:[],usedVolume:"",volume:"",bookErr:!1}},created:function(){C()(this,Bt.a.examFunc)},mounted:function(){this.initPage()},methods:{updateq:function(e,t){this.form[t]=e}},watch:{form:{handler:function(e,t){this.changed=!0},deep:!0},"form.q601":function(e,t){var a="";a=e>0&&this.form.q602?(Number(this.form.q602)/Number(e)).toFixed(2):"",this.form.q603=a},"form.q602":function(e,t){var a="";a=e>0&&this.form.q602?(Number(e)/Number(this.form.q601)).toFixed(2):"",this.form.q603=a},"form.q901":function(e,t){if(this.validInt(e)){var a="";a=e>0&&this.form.schoolNumber?(Number(e)/this.form.schoolNumber).toFixed(2):"",this.form.q902=a}else this.form.q901=t},"form.q905":function(e,t){if(this.validInt(e))if(e&&this.form.q906&&this.form.q907){var a=Number(this.form.q906)+Number(this.form.q907);this.bookErr=Number(e)!==a}else this.bookErr=!1;else this.form.q905=t},"form.q906":function(e,t){if(this.validInt(e))if(e&&this.form.q905&&this.form.q907){var a=Number(e)+Number(this.form.q907);this.bookErr=Number(this.form.q905)!==a}else this.bookErr=!1;else this.form.q906=t},"form.q907":function(e,t){if(this.validInt(e))if(e&&this.form.q906&&this.form.q905){var a=Number(this.form.q906)+Number(e);this.bookErr=Number(this.form.q905)!==a}else this.bookErr=!1;else this.form.q907=t},"form.q903":function(e,t){this.validInt(e)||(this.form.q903=t)},"form.q904":function(e,t){this.validInt(e)||(this.form.q904=t)},"form.q908":function(e,t){this.validInt(e)||(this.form.q908=t)}}},ea={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"place"}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"exam_box c-exam-box"},[a("div",{staticClass:"exam_header clearfix"},[a("h1",[e._v("书香校园申报——幼儿园填报")]),e._v(" "),a("p",{staticStyle:{margin:"-20px 0 40px"}},[e._v("（共12题，共60分）")]),e._v(" "),a("div",{staticClass:"fl"},[a("span",{staticClass:"fontweigth"},[e._v("申报学校：")]),a("span",[e._v(e._s(e.userInfo.schoolName))])]),e._v(" "),a("div",{staticClass:"fr"},[a("span",{staticClass:"fontweigth"},[e._v("申报填写人：")]),a("span",[e._v(e._s(e.userInfo.realName))])])]),e._v(" "),a("el-form",{attrs:{model:e.form}},[a("div",{staticClass:"exam_content"},[a("div",{staticClass:"con_textarea"},[a("h2",[e._v("1.   是否将“书香校园”活动列入园所文化建设重要内容？请文字填报。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q1,callback:function(t){e.$set(e.form,"q1",t)},expression:"form.q1"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("2.  是否有与阅读工作相关的学年、学期计划？请文字填报。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q2,callback:function(t){e.$set(e.form,"q2",t)},expression:"form.q2"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("3.  是否有与阅读工作相关的学年、学期总结？请文字填报。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q3,callback:function(t){e.$set(e.form,"q3",t)},expression:"form.q3"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("4.  是否有“书香校园”建设的规章制度？请文字填报。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q4,callback:function(t){e.$set(e.form,"q4",t)},expression:"form.q4"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("5.  是否有展示明确的书香校园活动目标、主题和口号？请文字填报。（4分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q5,callback:function(t){e.$set(e.form,"q5",t)},expression:"form.q5"}})],1),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("6.  书香校园建设专项经费生均经费：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q601,expression:"form.q601"}],staticClass:"exam-input",attrs:{name:"currency",type:"text",disabled:e.readonly},domProps:{value:e.form.q601},on:{input:function(t){t.target.composing||e.$set(e.form,"q601",t.target.value)}}}),e._v(" "),a("span",[e._v("元；学年生均购书经费支出：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q602,expression:"form.q602"}],staticClass:"exam-input",attrs:{name:"currency",type:"text",disabled:e.readonly},domProps:{value:e.form.q602},on:{input:function(t){t.target.composing||e.$set(e.form,"q602",t.target.value)}}}),e._v(" "),a("span",[e._v("元；创建学年生均购书经费支出占生均经费比例为：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q603,expression:"form.q603"}],staticClass:"exam-input",attrs:{type:"number",readonly:"readonly"},domProps:{value:e.form.q603},on:{input:function(t){t.target.composing||e.$set(e.form,"q603",t.target.value)}}}),e._v(" "),a("span",[e._v("%。(10分)")])])]),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("7.  请上传园所充分利用空间布设阅读区的图片。（最少1张，最多9张）（8分）")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q7",question:e.form.q7,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("8.  请上传悬挂有关书香校园的格言和标语图片。（最少1张，最多9张）（3分）")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q8",question:e.form.q8,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("9、图书总册数：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q901,expression:"form.q901"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q901},on:{input:function(t){t.target.composing||e.$set(e.form,"q901",t.target.value)}}}),e._v(" "),a("span",[e._v("册，学生人均图书量：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q902,expression:"form.q902"}],staticClass:"exam-input",attrs:{type:"number",readonly:"readonly"},domProps:{value:e.form.q902},on:{input:function(t){t.target.composing||e.$set(e.form,"q902",t.target.value)}}}),e._v(" "),a("span",[e._v("册。")])]),e._v(" "),a("div",{staticClass:"exam-total-item"},[a("span",[e._v("语种：中文绘本")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q903,expression:"form.q903"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q903},on:{input:function(t){t.target.composing||e.$set(e.form,"q903",t.target.value)}}}),e._v(" "),a("span",[e._v("册，英文绘本")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q904,expression:"form.q904"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q904},on:{input:function(t){t.target.composing||e.$set(e.form,"q904",t.target.value)}}}),e._v(" "),a("span",[e._v("册。")])]),e._v(" "),a("div",{staticClass:"exam-total-item"},[a("span",[e._v("杂志：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q905,expression:"form.q905"}],staticClass:"exam-input",attrs:{id:"q905",name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q905},on:{input:function(t){t.target.composing||e.$set(e.form,"q905",t.target.value)}}}),e._v(" "),a("span",[e._v("种，其中专业杂志")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q906,expression:"form.q906"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q906},on:{input:function(t){t.target.composing||e.$set(e.form,"q906",t.target.value)}}}),e._v(" "),a("span",[e._v("种，幼儿杂志")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q907,expression:"form.q907"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q907},on:{input:function(t){t.target.composing||e.$set(e.form,"q907",t.target.value)}}}),e._v(" "),a("span",[e._v("种。")]),e._v(" "),e.bookErr?a("span",{staticStyle:{color:"#f00"}},[e._v("专业杂志、幼儿杂志之和必须等于杂志总数")]):e._e()]),e._v(" "),a("div",{staticClass:"exam-total-item"},[a("span",[e._v("有声读物")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q908,expression:"form.q908"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q908},on:{input:function(t){t.target.composing||e.$set(e.form,"q908",t.target.value)}}}),e._v(" "),a("span",[e._v("种，（是/否）配置智能音箱")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q909,expression:"form.q909"}],staticClass:"exam-input",attrs:{type:"text",disabled:e.readonly},domProps:{value:e.form.q909},on:{input:function(t){t.target.composing||e.$set(e.form,"q909",t.target.value)}}}),e._v(" "),a("span",[e._v("。")])])]),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("10. 请图文介绍图书主题活动，包括绘本漂流、绘本故事大赛、绘本交换、绘本创作、绘本制作等。（最少1张，最多9张）（7分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q1001,callback:function(t){e.$set(e.form,"q1001",t)},expression:"form.q1001"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q1002",question:e.form.q1002,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("11. 园所是否有图书借阅信息化管理工具？是否有制订第三方绘本阅读共建计划？是否有推荐家园共读信息化工具？（3分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q1101,callback:function(t){e.$set(e.form,"q1101",t)},expression:"form.q1101"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q1102",question:e.form.q1102,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("12. 园所每学年是否举办“书香校园”系列活动（包括校园阅读推广人和阅读之星评选、主题阅读、朗诵等）？（5分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q1201,callback:function(t){e.$set(e.form,"q1201",t)},expression:"form.q1201"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q1202",question:e.form.q1202,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1)])])],1),e._v(" "),a("div",{staticClass:"step-wrapper"},[e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("submit",e.bookErr)}}},[e._v("提 交")])]),e._v(" "),e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("save",e.bookErr)}}},[e._v("保 存")])])])]),e._v(" "),a("bFooter"),e._v(" "),e.readonly?e._e():a("sidebar",{attrs:{err:e.bookErr}})],1)},staticRenderFns:[]};var ta=a("VU/8")(Zt,ea,!1,function(e){a("jUGb")},null,null).exports,aa={name:"cExamKindergartenTeacher",components:{bFooter:h.a,bHeader:g.a,cExamfile:zt,sidebar:Gt},data:function(){return{userInfo:{},form:{name:"cExamKindergartenTeacher",q1:"",q2:"",q3:"",q401:"",q5:"",q601:"",q602:"",q603:"",q604:"",q402:[{fid:"",fileName:""}]},filelist:[],usedVolume:"",volume:"",readonly:!1}},created:function(){C()(this,Bt.a.examFunc)},mounted:function(){this.initPage()},watch:{form:{handler:function(e,t){this.changed=!0},deep:!0},"form.q601":function(e,t){this.validInt(e)||(this.form.q601=t)},"form.q602":function(e,t){this.validInt(e)||(this.form.q602=t)},"form.q603":function(e,t){this.validInt(e)||(this.form.q603=t)},"form.q604":function(e,t){this.validInt(e)||(this.form.q604=t)}},methods:{updateq:function(e,t){this.form[t]=e}}},oa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"place"}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"exam_box c-exam-box"},[a("div",{staticClass:"exam_header"},[a("h1",[e._v("书香校园申报——幼儿园教师填报")]),e._v(" "),a("p",{staticStyle:{margin:"-20px 0 40px"}},[e._v("（共6题，共23分）")]),e._v(" "),a("div",{staticClass:"fl"},[a("span",{staticClass:"fontweigth"},[e._v("申报学校：")]),a("span",[e._v(e._s(e.userInfo.schoolName))])]),e._v(" "),a("div",{staticClass:"fr"},[a("span",{staticClass:"fontweigth"},[e._v("申报填写人：")]),a("span",[e._v(e._s(e.userInfo.realName))])])]),e._v(" "),a("el-form",{attrs:{model:e.form}},[a("div",{staticClass:"exam_content"},[a("div",{staticClass:"con_textarea "},[a("h2",[e._v("1.  每学期参加阅读培训不低于8学时，请填报培训内容简介。（4分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q1,callback:function(t){e.$set(e.form,"q1",t)},expression:"form.q1"}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("2.  请填报每学期推荐的幼儿（亲子）阅读书单。（4分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q2,callback:function(t){e.$set(e.form,"q2",t)},expression:"form.q2"}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("3.  请提交一份阅读课（活动）方案设计。（4分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q3,callback:function(t){e.$set(e.form,"q3",t)},expression:"form.q3"}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("4.  请上传组织开展阅读活动的图片，并予以文字简介。（最少1张，最多9张）（4分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q401,callback:function(t){e.$set(e.form,"q401",t)},expression:"form.q401"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,qid:"q402",volume:e.volume,question:e.form.q402,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("div",{staticClass:"con_textarea "},[a("h2",[e._v("5.  在刊物（县、市、省、国家级）或各级教育部门或学会论文征集活动中，发表关于幼儿阅读的文章、论文，请填报刊物名称、期号和文章标题。（3分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q5,callback:function(t){e.$set(e.form,"q5",t)},expression:"form.q5"}})],1),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("6.  个人读书记录：专业职业类图书：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q601,expression:"form.q601"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q601},on:{input:function(t){t.target.composing||e.$set(e.form,"q601",t.target.value)}}}),e._v(" "),a("span",[e._v("种/月；生活文化类图书")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q602,expression:"form.q602"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q602},on:{input:function(t){t.target.composing||e.$set(e.form,"q602",t.target.value)}}}),e._v(" "),a("span",[e._v("种/月；专业杂志图书")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q603,expression:"form.q603"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q603},on:{input:function(t){t.target.composing||e.$set(e.form,"q603",t.target.value)}}}),e._v(" "),a("span",[e._v("种/月；读书心得")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q604,expression:"form.q604"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q604},on:{input:function(t){t.target.composing||e.$set(e.form,"q604",t.target.value)}}}),e._v(" "),a("span",[e._v("篇。（4分）")])])])])])],1),e._v(" "),a("div",{staticClass:"step-wrapper"},[e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("submit")}}},[e._v("提 交")])]),e._v(" "),e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("save")}}},[e._v("保 存")])])])]),e._v(" "),a("bFooter"),e._v(" "),e.readonly?e._e():a("sidebar")],1)},staticRenderFns:[]};var sa=a("VU/8")(aa,oa,!1,function(e){a("YKFA")},null,null).exports,ia={name:"cExamKindergartenParents",components:{bFooter:h.a,bHeader:g.a,cExamfile:zt,sidebar:Gt},data:function(){return{userInfo:{},form:{name:"cExamKindergartenParents",q11:[{fid:"",fileName:""}],q302:[{fid:"",fileName:""}],q2:"",q301:""},filelist:[],usedVolume:"",volume:"",readonly:!1}},created:function(){C()(this,Bt.a.examFunc)},mounted:function(){this.initPage()},watch:{form:{handler:function(e,t){this.changed=!0},deep:!0}},methods:{updateq:function(e,t){this.form[t]=e}}},ra={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"place"}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"exam_box c-exam-box"},[a("div",{staticClass:"exam_header"},[a("h1",[e._v("书香校园申报——幼儿园家长填报")]),e._v(" "),a("p",{staticStyle:{margin:"-20px 0 40px"}},[e._v("（共3题，共17分）")]),e._v(" "),a("div",{staticClass:"fl"},[a("span",{staticClass:"fontweigth"},[e._v("申报学校：")]),a("span",[e._v(e._s(e.userInfo.schoolName))])]),e._v(" "),a("div",{staticClass:"fr"},[a("span",{staticClass:"fontweigth"},[e._v("申报填写人：")]),a("span",[e._v(e._s(e.userInfo.realName))])])]),e._v(" "),a("el-form",{attrs:{model:e.form}},[a("div",{staticClass:"exam_content"},[a("div",{staticClass:"con_textarea"},[a("h2",[e._v("1.  是否有亲子阅读记录？请家长上传图片。（最少1张，最多9张）（4分）")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q11",question:e.form.q11,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("2.   幼儿园是否开展亲子共读指导活动（如举办与阅读相关的家长讲座、故事妈妈培训辅导活动等）？请家长对讲座进行评价。（7分））")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q2,callback:function(t){e.$set(e.form,"q2",t)},expression:"form.q2"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("3.  家长是否参加以“读书、交流”为组织主旨的家长义工团，开展阅读义工、故事义工进校园活动？请填报活动次数及评价。（6分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q301,callback:function(t){e.$set(e.form,"q301",t)},expression:"form.q301"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q302",question:e.form.q302,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1)])])],1),e._v(" "),a("div",{staticClass:"step-wrapper"},[e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("submit")}}},[e._v("提 交")])]),e._v(" "),e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("save")}}},[e._v("保 存")])])])]),e._v(" "),a("bFooter"),e._v(" "),e.readonly?e._e():a("sidebar")],1)},staticRenderFns:[]};var na=a("VU/8")(ia,ra,!1,function(e){a("Eczf")},null,null).exports,la={name:"cExamParents",components:{bFooter:h.a,bHeader:g.a,cExamfile:zt,sidebar:Gt},data:function(){return{userInfo:{},form:{name:"cExamParents",q101:"",q102:"",q103:"",q201:"",q202:"",q3:"",q401:"",q402:""},readonly:!1,filelist:[],usedVolume:"",volume:"",radioList:[{id:1,name:"A. 非常满意"},{id:2,name:"B. 较满意"},{id:3,name:"C. 尚可"}]}},created:function(){C()(this,Bt.a.examFunc)},mounted:function(){this.initPage()},watch:{form:{handler:function(e,t){this.changed=!0},deep:!0},"form.q102":function(e,t){this.validInt(e)||(this.form.q102=t)},"form.q101":function(e,t){this.validInt(e)||(this.form.q101=t)},"form.q201":function(e,t){this.validInt(e)||(this.form.q201=t)}},methods:{}},ca={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"place"}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"exam_box c-exam-box"},[a("div",{staticClass:"exam_header clearfix"},[a("h1",[e._v("书香校园申报——家长填报")]),e._v(" "),a("div",{staticClass:"fl"},[a("span",{staticClass:"fontweigth"},[e._v("申报学校：")]),a("span",[e._v(e._s(e.userInfo.schoolName))])]),e._v(" "),a("div",{staticClass:"fr"},[a("span",{staticClass:"fontweigth"},[e._v("申报填写人：")]),a("span",[e._v(e._s(e.userInfo.realName))])])]),e._v(" "),a("el-form",{attrs:{model:e.form}},[a("div",{staticClass:"exam_content"},[a("div",{staticClass:"content_header"},[a("h1",[e._v("第一部分 书香活动与分享")]),e._v(" "),a("p",[e._v("(共3题，共5分)")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("一、家校阅读互动")]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("1.  每周家庭阅读时长")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q101,expression:"form.q101"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q101},on:{input:function(t){t.target.composing||e.$set(e.form,"q101",t.target.value)}}}),e._v(" "),a("span",[e._v("小时、每月阅读分享")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q102,expression:"form.q102"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q102},on:{input:function(t){t.target.composing||e.$set(e.form,"q102",t.target.value)}}}),e._v(" "),a("span",[e._v("次，并填报主要书目。（1分）")])]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q103,callback:function(t){e.$set(e.form,"q103",t)},expression:"form.q103"}})],1),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("2.  每学期以“读书、交流”为组织主旨的家长义工团，开展阅读义工、故事义工进校园活动")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q201,expression:"form.q201"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q201},on:{input:function(t){t.target.composing||e.$set(e.form,"q201",t.target.value)}}}),e._v(" "),a("span",[e._v("次，并填写活动成果。（2分）")])]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q202,callback:function(t){e.$set(e.form,"q202",t)},expression:"form.q202"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("3.  请填报家长向子女推荐阅读书单及向其他家长建议的阅读书目。（2分） "),a("span",{staticClass:"exam-box-refer"},[e._v("（参考：每月"),a("samp",{staticClass:"symbol"}),e._v("2本）")])]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q3,callback:function(t){e.$set(e.form,"q3",t)},expression:"form.q3"}})],1)]),e._v(" "),a("div",{staticClass:"exam_content"},[a("div",{staticClass:"content_header"},[a("h1",[e._v("第二部分 书香行为与成效")]),e._v(" "),a("p",[e._v("(共1题，共1分)")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("二、书香成效")]),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("4. 请简述家长本人对学校阅读相关规划、制度、环境及资源的评价及建议，按A（非常满意）、B（较满意）、C（尚可）三个等级评价。（1分）")]),e._v(" "),a("div",{staticClass:"exam-box-radio"},[a("el-radio-group",{attrs:{disabled:e.readonly},model:{value:e.form.q401,callback:function(t){e.$set(e.form,"q401",t)},expression:"form.q401"}},e._l(e.radioList,function(t){return a("el-radio",{key:t.id,attrs:{label:t.name,value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请文字简述")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q402,callback:function(t){e.$set(e.form,"q402",t)},expression:"form.q402"}})],1)])])],1),e._v(" "),a("div",{staticClass:"step-wrapper"},[e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("submit")}}},[e._v("提 交")])]),e._v(" "),e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("save")}}},[e._v("保 存")])])])]),e._v(" "),a("bFooter"),e._v(" "),e.readonly?e._e():a("sidebar")],1)},staticRenderFns:[]};var da=a("VU/8")(la,ca,!1,function(e){a("rqSR")},null,null).exports,ua={name:"cExamteacher",components:{bFooter:h.a,bHeader:g.a,cExamfile:zt,sidebar:Gt},data:function(){var e;return{userInfo:{},form:(e={name:"cExamteacher",q1:"",q201:"",q202:"",q301:"",q302:"",q401:"",q402:"",q501:"",q601:"",q7:"",q801:"",q9:"",q101:""},f()(e,"q101",""),f()(e,"q102",""),f()(e,"q1101",""),f()(e,"q1102",""),f()(e,"q502",[{fid:"",fileName:""}]),f()(e,"q602",[{fid:"",fileName:""}]),f()(e,"q802",[{fid:"",fileName:""}]),e),readonly:!1,filelist:[],usedVolume:"",volume:"",radioList:[{id:1,name:"A. 非常满意"},{id:2,name:"B. 较满意"},{id:3,name:"C. 尚可"}]}},created:function(){C()(this,Bt.a.examFunc)},mounted:function(){this.initPage()},methods:{updateq:function(e,t){this.form[t]=e}},watch:{form:{handler:function(e,t){this.changed=!0},deep:!0},"form.q301":function(e,t){if(this.validInt(e)){var a="";a=e>0&&this.form.schoolNumber&&this.form.teacherNumber?(Number(e)/(this.form.schoolNumber+this.form.teacherNumber)*100).toFixed(2):"",this.form.q302=a}else this.form.q301=t},"form.q401":function(e,t){this.validInt(e)||(this.form.q401=t)},"form.q101":function(e,t){this.validInt(e)||(this.form.q101=t)},"form.q201":function(e,t){this.validInt(e)||(this.form.q201=t)}}},pa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("bHeader"),e._v(" "),a("div",{staticClass:"place"}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"exam_box c-exam-box"},[a("div",{staticClass:"exam_header clearfix"},[a("h1",[e._v("书香校园申报——教师填报")]),e._v(" "),a("div",{staticClass:"fl"},[a("span",{staticClass:"fontweigth"},[e._v("申报学校：")]),a("span",[e._v(e._s(e.userInfo.schoolName))])]),e._v(" "),a("div",{staticClass:"fr"},[a("span",{staticClass:"fontweigth"},[e._v("申报填写人：")]),a("span",[e._v(e._s(e.userInfo.realName))])])]),e._v(" "),a("el-form",{attrs:{model:e.form,rules:e.rules,id:"exform"}},[a("div",{staticClass:"exam_content"},[a("div",{staticClass:"content_header"},[a("h1",[e._v("第一部分 书香保障与投入")]),e._v(" "),a("p",[e._v("(共1题，共1分)")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("一、组织保障")]),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("1.  是否有与阅读工作相关的校级学年计划和总结？请填报材料。（1分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly,prop:"nodeName"},model:{value:e.form.q1,callback:function(t){e.$set(e.form,"q1",t)},expression:"form.q1"}})],1)]),e._v(" "),a("div",{staticClass:"exam_content"},[a("div",{staticClass:"content_header"},[a("h1",[e._v("第二部分 书香活动与分享")]),e._v(" "),a("p",[e._v("(共5题，共11分)")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("二、阅读活动")]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("2.  是否参加校园文化、阅读相关课题研究？组织相关教研、学习培训和交流活动")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q201,expression:"form.q201"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q201},on:{input:function(t){t.target.composing||e.$set(e.form,"q201",t.target.value)}}}),e._v(" "),a("span",[e._v("次。")]),a("br"),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报课题研究主题，以及教研、培训或交流的成果。（3分）")])]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q202,callback:function(t){e.$set(e.form,"q202",t)},expression:"form.q202"}})],1),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("3.  每学期阅读活动参与人数：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q301,expression:"form.q301"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q301},on:{input:function(t){t.target.composing||e.$set(e.form,"q301",t.target.value)}}}),e._v(" "),a("span",[e._v("人，在全校师生总数中的占比：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q302,expression:"form.q302"}],staticClass:"exam-input",attrs:{type:"number",readonly:"readonly"},domProps:{value:e.form.q302},on:{input:function(t){t.target.composing||e.$set(e.form,"q302",t.target.value)}}}),e._v(" "),a("span",[e._v("%（参与人数/全校师生X100%）。（3分）")])])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("三、阅读分享")]),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("4.  教师每学期组织阅读分享会")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q401,expression:"form.q401"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q401},on:{input:function(t){t.target.composing||e.$set(e.form,"q401",t.target.value)}}}),e._v(" "),a("span",[e._v("次，并填报分享会主要书目及成果。（2分）")])]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q402,callback:function(t){e.$set(e.form,"q402",t)},expression:"form.q402"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("5.  请简要图文陈述教师本人参与阅读活动国家级、省级、地市级、县区级、镇街级阅读相关活动次数及成果。（最少1张，最多9张）（1分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q501,callback:function(t){e.$set(e.form,"q501",t)},expression:"form.q501"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,qid:"q502",volume:e.volume,question:e.form.q502,readonly:e.readonly,filelist:e.filelist},on:{queryVolume:e.queryVolume,updateq:this.updateq}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("6.  学校教师是否参与阅读志愿服务（进社区、福利机构、公共文化机构等）？请以图文形式简述次数及成果。（最少1张，最多9张）（2分）")]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q601,callback:function(t){e.$set(e.form,"q601",t)},expression:"form.q601"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q602",question:e.form.q602,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1)]),e._v(" "),a("div",{staticClass:"exam_content"},[a("div",{staticClass:"content_header"},[a("h1",[e._v("第三部分 书香行为与成效")]),e._v(" "),a("p",[e._v("(共5题，共9分)")])]),e._v(" "),a("h3",{staticClass:"exam-content-title"},[e._v("四、教师阅读工作")]),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("7.  请各科目教师填报本人与阅读教学工作相关的学年计划和总结。（2分） "),a("span",{staticClass:"exam-box-refer"},[e._v("参考：主题阅读、经典阅读、双语阅读、科普阅读、绘本阅读负责教师每人每学年2篇。）")])]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q7,callback:function(t){e.$set(e.form,"q7",t)},expression:"form.q7"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("8.  各科目教师是否有阅读指导课学年教学设计、微课、公开课制作和共享，并有形式多样的阅读活动方案设计？请予以图文介绍，并填报相关网络资源链接。 （2分） "),a("span",{staticClass:"exam-box-refer"},[e._v(" （参考：阅读方案每人每学年"),a("samp",{staticClass:"symbol"}),e._v("6次）")])]),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请填报内容")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q801,callback:function(t){e.$set(e.form,"q801",t)},expression:"form.q801"}}),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请上传图片")]),e._v(" "),a("cExamfile",{attrs:{usedVolume:e.usedVolume,volume:e.volume,qid:"q802",question:e.form.q802,readonly:e.readonly,filelist:e.filelist},on:{updateq:this.updateq}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("9.  请各科目教师填报主导或参与形成校园特色文化的校本课程开发和出版数量，并列举成果名称。（2分）")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q9,callback:function(t){e.$set(e.form,"q9",t)},expression:"form.q9"}})],1),e._v(" "),a("div",{staticClass:"exam-total"},[a("div",{staticClass:"exam-total-item"},[a("span",[e._v("10. 各科目教师本人每周课外平均阅读时长：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.q101,expression:"form.q101"}],staticClass:"exam-input",attrs:{name:"int",type:"text",disabled:e.readonly},domProps:{value:e.form.q101},on:{input:function(t){t.target.composing||e.$set(e.form,"q101",t.target.value)}}}),e._v(" "),a("span",[e._v("小时，并填写主要阅读书目。（2分）")])]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q102,callback:function(t){e.$set(e.form,"q102",t)},expression:"form.q102"}})],1),e._v(" "),a("div",{staticClass:"con_textarea"},[a("h2",[e._v("11. 请简述教师本人对学校阅读相关规划、制度、环境及资源的评价及建议，按A（非常满意）、B（较满意）、C（尚可）三个等级评价。（1分）")]),e._v(" "),a("div",{staticClass:"exam-box-radio"},[a("el-radio-group",{attrs:{disabled:e.readonly},model:{value:e.form.q1101,callback:function(t){e.$set(e.form,"q1101",t)},expression:"form.q1101"}},e._l(e.radioList,function(t){return a("el-radio",{key:t.id,attrs:{label:t.name,value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("h4",{staticClass:"con-textarea-text"},[e._v("请文字简述")]),e._v(" "),a("el-input",{staticClass:"con-textarea-input",attrs:{type:"textarea",placeholder:"请输入内容",disabled:e.readonly},model:{value:e.form.q1102,callback:function(t){e.$set(e.form,"q1102",t)},expression:"form.q1102"}})],1)])])],1),e._v(" "),a("div",{staticClass:"step-wrapper"},[e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("submit")}}},[e._v("提 交")])]),e._v(" "),e.readonly?e._e():a("button",{staticClass:"step"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.submit("save")}}},[e._v("保 存")])])])]),e._v(" "),a("bFooter"),e._v(" "),e.readonly?e._e():a("sidebar")],1)},staticRenderFns:[]};var ma=a("VU/8")(ua,pa,!1,function(e){a("SbNe")},null,null).exports,va={name:"systemIndex",components:{bHeader:g.a,bFooter:h.a},data:function(){return{downTotal:0,fileTotal:0}},mounted:function(){this.getDownTotal(),this.getFileTotal()},methods:{getDownTotal:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/fileManagement/getDownloadTotal").then(function(t){t.data&&200==t.data.code?e.downTotal=t.data.data:e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})},getFileTotal:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/fileManagement/getFileTotal").then(function(t){t.data&&200==t.data.code?e.fileTotal=t.data.data:e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}}},fa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("系统管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"item_box"},[a("div",{staticClass:"item col_gray"},[a("h1",[e._v("文件管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.downTotal))]),e._v(" "),a("p",[e._v("已下载文件包数量")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.fileTotal))]),e._v(" "),a("p",[e._v("已生成文件包总数量")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/systemFile"}})],1),e._v(" "),a("div",{staticClass:"item col_gray"},[a("h1",[e._v("系统变量管理")]),e._v(" "),e._m(0),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/sysAdmin"}})],1)])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mid"},[t("span",{staticClass:"mid_icon"}),this._v(" "),t("div",{staticClass:"mid_list fl"})])}]};var ha=a("VU/8")(va,fa,!1,function(e){a("HXyh")},null,null).exports,ga={name:"systemFile",data:function(){return{tableData:[],search:"",currentPage:1,total:0,token:""}},components:{bHeader:g.a,bFooter:h.a},mounted:function(){this.getData(),this.token=sessionStorage.getItem("token")},methods:{getData:function(e,t,a){var o=this,s=e||1,i=t||10,r=a||"";o.axios.get("/proxy/report-business/booking/v2/api/fileManagement/findFileList/"+s+"/"+i+"?fileName="+r).then(function(e){e.data&&200==e.data.code?(o.tableData=e.data.datas,o.currentPage=e.data.pageInfo.currentPage,o.total=e.data.pageInfo.total):o.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.getData(e,10,this.search)},fnSearch:function(){this.getData("",10,this.search)},downFile:function(e){var t=this;t.axios.get("/proxy/report-business/booking/v2/api/fileManagement/download/display/"+e.id).then(function(e){e.data&&200==e.data.code?t.$message.success(e.data.msg):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})}}},_a={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/systemIndex"}}},[e._v("系统管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("文件管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head"},[a("div",{staticClass:"right"},[a("el-input",{attrs:{placeholder:"请输入关键词"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.fnSearch(t):null}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fnSearch},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"fileName",label:"文件包名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"生成时间",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"downloadCount",label:"下载次数",width:"130","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"/proxy/report-business/booking/v2/api/fileManagement/download/display/"+t.row.id+"?token="+e.token,download:"下载文件"}},[a("i",{staticClass:"el-icon-download",staticStyle:{"font-size":"20px"}})])]}}])})],1),e._v(" "),e.tableData&&e.tableData.length>0?a("el-pagination",{staticClass:"new-pagination",staticStyle:{"text-align":"right"},attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var ba=a("VU/8")(ga,_a,!1,function(e){a("humd")},null,null).exports,ka={name:"products-panel",data:function(){return{saling:"",goodsInfoSumNum:"",ax:[]}},components:{bHeader:g.a,bFooter:h.a},created:function(){this.initData(),this.ax=_.pluck(JSON.parse(sessionStorage.getItem("ax")),"url")},methods:{axs:function(e){return!!sessionStorage.getItem("isad")||this.ax.includes(e)},initData:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/goodsManager/goodsInfoStatistics").then(function(t){if(t&&"200"==t.status&&t.data&&t.data.data){var a=t.data.data;e.saling=a.saling,e.goodsInfoSumNum=a.goodsInfoSumNum}}).catch(function(e){console.log(e)})}}},ya={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("商品管理主页")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"item_box"},[e.axs("spgl")?a("div",{staticClass:"item"},[a("h1",[e._v("商品管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.saling))]),e._v(" "),a("p",[e._v("上架数量")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.goodsInfoSumNum))]),e._v(" "),a("p",[e._v("商品数量")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/goodsList"}})],1):e._e()])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[]};var xa=a("VU/8")(ka,ya,!1,function(e){a("5oz+")},null,null).exports,Ca={name:"packageList",components:{bHeader:g.a,bFooter:h.a},data:function(){return{query:{keyword:"",searchType:"message"},pageInfo:{total:0,currPage:1,pageSize:10},list:[],isCheckedAll:!1,checkboxModel:[],dateTime:[]}},created:function(){this.getInfo()},computed:{},watch:{checkboxModel:{handler:function(e,t){this.checkboxModel.length===this.list.length?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getInfo()},checkedAll:function(){var e=this;this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){e.checkboxModel.push(t.id)})),console.log(e.checkboxModel)},addPackage:function(){this.$router.push({name:"packageEdit"})},packageEdit:function(e){var t=e.id;this.$router.push({name:"packageEdit",query:{id:t}})},packageDetail:function(e){var t=e.id;this.$router.push({name:"packageDetail",query:{id:t}})},deletePackage:function(){},searchInfo:function(){this.getInfo()},getInfo:function(){var e=this,t={infoMap:{},pagesize:10,startpage:1};t.pagesize=e.pageInfo.pageSize,t.startpage=e.pageInfo.currPage;var a=e.query.searchType;a&&e.query.keyword?t.infoMap[a]=e.query.keyword:t.infoMap={},e.axios.post("/proxy/report-business//booking/v2/api/service/queryOperationList/"+t.startpage+"/"+t.pagesize,t.infoMap).then(function(t){if(t&&t.data&&t.data.datas){var a=t.data.datas;e.list=a,e.pageInfo=t.data.pageInfo}}).catch(function(e){console.log(e)})}}},wa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/products"}},[e._v("商品管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("套餐管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search",staticStyle:{height:"90px"}},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:e.addPackage}},[e._v("添加套餐")])],1),e._v(" "),a("el-col",{attrs:{span:22}},[a("span",[e._v("状态")]),e._v(" "),a("div",{staticStyle:{display:"inline-block"}},[a("el-select",{staticClass:"package_status",model:{value:e.query.searchType,callback:function(t){e.$set(e.query,"searchType",t)},expression:"query.searchType"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),e._v(" "),a("el-option",{attrs:{label:"已上架",value:"message"}}),e._v(" "),a("el-option",{attrs:{label:"已下架",value:"code"}})],1)],1),e._v(" "),a("span",[e._v("创建时间")]),e._v(" "),a("div",{staticClass:"seach_date_picker product_search_time",staticStyle:{width:"410px",display:"inline-block"}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"开始时间"},model:{value:e.dateTime[0],callback:function(t){e.$set(e.dateTime,0,t)},expression:"dateTime[0]"}})],1),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("至")]),e._v(" "),a("div",{staticStyle:{display:"inline-block","margin-right":"-18px"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"结束时间"},model:{value:e.dateTime[1],callback:function(t){e.$set(e.dateTime,1,t)},expression:"dateTime[1]"}})],1)]),e._v(" "),a("span",[e._v("开售时间")]),e._v(" "),a("div",{staticClass:"seach_date_picker product_search_time",staticStyle:{width:"410px",display:"inline-block","margin-right":"-18px"}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"开始时间"},model:{value:e.dateTime[0],callback:function(t){e.$set(e.dateTime,0,t)},expression:"dateTime[0]"}})],1),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("至")]),e._v(" "),a("div",{staticStyle:{display:"inline-block","margin-right":"-18px"}},[a("el-date-picker",{attrs:{type:"datetime","popper-class":"sx_date_picker",placeholder:"结束时间"},model:{value:e.dateTime[1],callback:function(t){e.$set(e.dateTime,1,t)},expression:"dateTime[1]"}})],1)])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:2}},[a("el-select",{staticClass:"search_type",model:{value:e.query.searchType,callback:function(t){e.$set(e.query,"searchType",t)},expression:"query.searchType"}},[a("el-option",{attrs:{label:"创建者",value:"message"}}),e._v(" "),a("el-option",{attrs:{label:"套餐名称",value:"all"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"请输入关键字"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword","string"==typeof t?t.trim():t)},expression:"query.keyword"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"套餐名称",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"message",label:"套餐说明",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"创建说明",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建者",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("span")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"当前使用人数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("span")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"价格(元)",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("span")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开售时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"成交数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("span")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"总成单金额(元)",width:"90"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("span")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"套餐状态",width:"70"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("span")]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("span",{staticClass:"icon-sx-view",on:{click:function(a){e.packageDetail(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("span",{staticClass:"icon-sx-edit",on:{click:function(a){e.packageEdit(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("span",{staticClass:"icon-sx-delete",on:{click:function(a){e.deletePackage(t.row)}}})])]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pageInfo.total>10,expression:"pageInfo.total>10"}],staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[]};var Ia=a("VU/8")(Ca,wa,!1,function(e){a("Yoln")},null,null).exports,qa={name:"goodsList",components:{bFooter:h.a,bHeader:g.a},data:function(){return{searchForm:{type:"goodsName",search:""},multipleSelection:[],tableData:[],pageInfo:{currPage:1,total:0},userId:""}},mounted:function(){this.userId=sessionStorage.getItem("userId"),this.getList()},methods:{getList:function(e,t){var a=this,o=a.searchForm.type,s={infoMap:{}},i=e||1,r=t||10;s.infoMap[o]=a.searchForm.search,a.axios.post("/proxy/report-business/booking/v2/api/goodsManager/goods/"+i+"/"+r,s).then(function(e){e.data&&200==e.data.code&&(a.tableData=e.data.datas,a.pageInfo=e.data.pageInfo,a.pageInfo.total=e.data.pageInfo.total)}).catch(function(e){console.log(e)})},changeStatus:function(e){var t=this,a=1==e.goodsStatus?2:1;t.axios.put("/proxy/report-business/booking/v2/api/goodsManager/goodsStatus/"+e.id+"/"+a).then(function(a){if(a.data&&200==a.data.code){var o=1==e.goodsStatus?"下架成功":"上架成功";t.$message.success(o),t.getList(t.pageInfo.currPage)}else t.$message.error(a.data.msg)}).catch(function(e){console.log(e)})},changeTop:function(e){var t=this,a=1==e.hasTop?2:1;t.axios.put("/proxy/report-business/booking/v2/api/goodsManager/goodsHasTop/"+e.id+"/"+a).then(function(a){if(a.data&&200==a.data.code){var o=1==e.hasTop?"取消置顶成功":"置顶成功";t.$message.success(o),t.getList(t.pageInfo.currPage)}else t.$message.error(a.data.msg)}).catch(function(e){console.log(e)})},handleSelectionChange:function(e){this.multipleSelection=e},removeGoods:function(){var e=this,t=!1,a=[];0!==e.multipleSelection.length?(e.multipleSelection.forEach(function(o){if(1===o.goodsStatus)return e.$message.error("上架的商品不能删除，请重新选择！"),void(t=!0);a.push(o.id)}),t||e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/goodsManager/goods/"+e.userId,{data:a,headers:{"Content-type":"application/json"}}).then(function(t){t.data&&200==t.data.code?(e.$message.success(t.data.msg),e.getList(e.pageInfo.currPage)):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除")})):e.$message.error("请选择删除商品！")},handleCurrentChange:function(e){this.getList(e)}},filters:{goodsType:function(e){var t=e;switch(t){case 1:t="全部";break;case 2:t="图书";break;case 3:t="绘本";break;case 4:t="音像";break;case 5:t="测评服务"}return t}}},Na={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper goods-list-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/products"}}},[e._v("商品管理主页")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:2}},[a("span",{staticClass:"new-primary-button",on:{click:e.removeGoods}},[e._v("删除")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("router-link",{attrs:{to:"/addGoods"}},[a("span",{staticClass:"new-primary-button"},[e._v("添加")])])],1),e._v(" "),a("el-col",{staticClass:"right",attrs:{span:8}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"选择搜索类型"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"商品名称",value:"goodsName"}}),e._v(" "),a("el-option",{attrs:{label:"ISBN",value:"ISBN"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{placeholder:"请输入关键字搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getList()}},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search","string"==typeof t?t.trim():t)},expression:"searchForm.search"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(t){e.getList()}},slot:"suffix"})])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品图片",prop:"goodsPhoto",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.goodsPhoto&&t.row.goodsPhoto.length>0?a("div",[a("img",{attrs:{src:t.row.goodsPhoto[0].path,width:"50",height:"50"}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",prop:"goodsName",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"ISBN",prop:"isbn",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品类型",prop:"goodsType",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("goodsType")(t.row.goodsType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"价格(元)",prop:"goodsPrice",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("￥"+e._s(t.row.goodsPrice.toFixed(2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售数量",prop:"salesValue",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.salesValue))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"goodsStatus",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(1==t.row.goodsStatus?"上架":"下架"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"首页置顶",prop:"hasTop",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.hasTop?"是":"否"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("router-link",{attrs:{to:{name:"goodsEdit",query:{id:t.row.id}}}},[a("span",{staticClass:"goods-operation-icon el-icon-edit-outline"})])],1),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("router-link",{attrs:{to:{name:"goodsDetail",query:{id:t.row.id}}}},[a("span",{staticClass:"goods-operation-icon el-icon-view"})])],1),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:1==t.row.goodsStatus?"下架":"上架",placement:"top"}},[a("span",{staticClass:"goods-operation-icon",class:[1==t.row.goodsStatus?"off-shelf":" on-shelf"],on:{click:function(a){e.changeStatus(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:1==t.row.hasTop?"取消置顶":"置顶",placement:"top"}},[a("span",{staticClass:"goods-operation-icon",class:[1==t.row.hasTop?"cancel-top-icon":"set-top-icon"],on:{click:function(a){e.changeTop(t.row)}}})])]}}])})],1),e._v(" "),a("div",[e.tableData&&e.tableData.length>0?a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pageInfo.currPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var Ta=a("VU/8")(qa,Na,!1,function(e){a("C0Fv")},null,null).exports,Sa=[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!0,"large","huge"]}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],["link"]],$a={goodsName:"addGoods",components:{bFooter:h.a,bHeader:g.a,quillEditor:O.quillEditor},data:function(){return{form:f()({goodsName:"",goodsType:"",goodsPrice:"",describes:"",isbn:"",frequency:"",effective:""},"describes",""),rule:{goodsName:[{required:!0,message:"请输入商品名称",trigger:"blur"},{max:40,message:"不能超过40个字符",trigger:"blur"}],goodsType:[{required:!0,message:"请选择商品类型",trigger:"blur"}],isbn:[{validator:function(e,t,a){!/^[\d\-]+$/.test(t)||17!=t.length&&13!=t.length?a(new Error("请输入正确的ISBN")):t?a():a(new Error("请输入ISBN"))},required:!0,trigger:"blur"}],goodsPrice:[{validator:function(e,t,a){!/^[0-9]+([.]{1}[0-9]{1,2})?$/.test(t)&&t?a(new Error("请输入保留两位小数的数字")):t>999999.99?a(new Error("不能超过999999.99")):""===t?a(new Error("请输入价格")):a()},required:!0,trigger:"blur"}],frequency:[{validator:function(e,t,a){!/^\d+$/.test(t)&&t?a(new Error("请输入整数")):t>9999?a(new Error("不能超过9999")):t?a():a(new Error("请输入可使用次数"))},required:!0,trigger:"blur"}],effective:[{required:!0,message:"请选择使用期限",trigger:"blur"}],describes:[{max:2e3,message:"不能超过2000个字符",trigger:"blur"}]},actionUrl:"/proxy/report-business/booking/v2/api/goodsManager/uploadGoodsImg/",editorOption:{modules:{toolbar:{container:Sa}}},userId:"",goodsPhoto:[],fileList:[],isGoodsPhoto:!1,isLock:!1,goodsList:[{id:1,name:"全部"},{id:2,name:"图书"},{id:3,name:"绘本"},{id:4,name:"音像"},{id:5,name:"测评服务"}],effectiveList:[{id:1,name:"按年"},{id:2,name:"按月"},{id:3,name:"按周"},{id:4,name:"按天"},{id:5,name:"按小时"}]}},computed:{editor:function(){return this.$refs.myQuillEditor.quill},header:function(){return{Authorization:sessionStorage.getItem("token")}}},mounted:function(){this.userId=sessionStorage.getItem("userId")},methods:{onEditorReady:function(e){},submitForm:function(e){var t=this,a=t.form;a.goodsPrice=Number(a.goodsPrice),t.goodsPhoto=[],t.fileList.forEach(function(e){var a=e.response.data,o={};o.fileName=a.fileName,o.path=a.path,o.size=a.size,t.goodsPhoto.push(o)}),a.goodsPhoto=t.goodsPhoto,/<img(?:.|\s)*?>/g.test(t.form.describes)?t.$message.error("商品说明含有图片，请删除后从商品图片处上传图片！"):0!==a.goodsPhoto.length?t.isLock||t.$refs.form.validate(function(e){if(!e)return!1;t.isLock=!0,t.axios.post("/proxy/report-business/booking/v2/api/goodsManager/goods/"+t.userId,a).then(function(e){t.isLock=!1,e.data&&200==e.data.code?(t.$message.success(e.data.msg),t.$router.push({name:"goodsList"})):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})}):t.isGoodsPhoto=!0},handleSuccess:function(e,t,a){500!=e.code?this.fileList=a:this.$message.error(e.msg)},handleError:function(e){},beforeUpload:function(e){var t="image/jpg"==e.type,a="image/jpeg"==e.type,o=e.size/1024<300;return a||t||this.$message.error("上传图片只能是 jpg 、jpeg格式!"),o||this.$message.error("上传图片大小不能超过 300KB!"),(t||a)&&o},handleRemove:function(e,t){this.fileList=t},handleExceed:function(e,t){this.$message.error("最多只能上传3张图片！")},CtoH:function(e){for(var t=e,a="",o=0;o<t.length;o++)12288!=t.charCodeAt(o)?t.charCodeAt(o)>65280&&t.charCodeAt(o)<65375?a+=String.fromCharCode(t.charCodeAt(o)-65248):a+=String.fromCharCode(t.charCodeAt(o)):a+=String.fromCharCode(t.charCodeAt(o)-12256);return a}},watch:{fileList:{handler:function(e,t){this.isGoodsPhoto=0===e.length},deep:!0},"form.isbn":function(e,t){this.form.isbn=this.CtoH(e)},"form.goodsPrice":function(e,t){this.form.goodsPrice=this.CtoH(e)},"form.frequency":function(e,t){this.form.frequency=this.CtoH(e)}}},Da={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/products"}}},[e._v("商品管理主页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/goodsList"}}},[e._v("商品管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("添加商品")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("p",{staticClass:"container-title"},[e._v("添加商品")]),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rule,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.goodsName,callback:function(t){e.$set(e.form,"goodsName","string"==typeof t?t.trim():t)},expression:"form.goodsName"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",[a("i",{staticClass:"el-icon-warning"}),e._v("不超过40个字符")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"ISBN",prop:"isbn"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.isbn,callback:function(t){e.$set(e.form,"isbn",t)},expression:"form.isbn"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"isbn"},[a("i",{staticClass:"el-icon-warning"}),e._v("必须符合10位旧版或13位新版ISBN规则"),a("br"),a("samp",[e._v("如：7-309-04547-5（10位规则)，978-7-302-12260-9（13位规则）")])])])],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类型",prop:"goodsType"}},[a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择类型"},model:{value:e.form.goodsType,callback:function(t){e.$set(e.form,"goodsType",t)},expression:"form.goodsType"}},e._l(e.goodsList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"价格",prop:"goodsPrice"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.goodsPrice,callback:function(t){e.$set(e.form,"goodsPrice",t)},expression:"form.goodsPrice"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",[a("i",{staticClass:"el-icon-warning"}),e._v("支持整数长度6位，小数点后2位")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"可使用次数",prop:"frequency"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.frequency,callback:function(t){e.$set(e.form,"frequency",t)},expression:"form.frequency"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",[a("i",{staticClass:"el-icon-warning"}),e._v("支持整数长度4位")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"使用期限",prop:"effective"}},[a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择期限类型"},model:{value:e.form.effective,callback:function(t){e.$set(e.form,"effective",t)},expression:"form.effective"}},e._l(e.effectiveList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品图片",required:""}},[a("el-col",{attrs:{span:11}},[a("el-upload",{attrs:{action:e.actionUrl,headers:e.header,"on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeUpload,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"file-list":e.goodsPhoto,limit:3,"list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),e.isGoodsPhoto?a("div",{staticClass:"text-error"},[e._v("请上传商品图片")]):e._e()],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",[a("i",{staticClass:"el-icon-warning"}),e._v("至少上传一张图片")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"商品说明",prop:"describes"}},[a("el-col",{attrs:{span:22}},[a("quill-editor",{ref:"myQuillEditor",staticClass:"goods-editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.form.describes,callback:function(t){e.$set(e.form,"describes",t)},expression:"form.describes"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("router-link",{attrs:{to:"/goodsList"}},[a("span",{staticClass:"new-plain-button mr30"},[e._v("取消")])]),e._v(" "),a("span",{staticClass:"new-primary-button",on:{click:function(t){e.submitForm(e.form)}}},[e._v("保存")])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var Aa=a("VU/8")($a,Da,!1,function(e){a("rtbX")},null,null).exports,La=a("Pl95"),Pa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/products"}}},[e._v("商品管理主页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/goodsList"}}},[e._v("商品管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("编辑商品")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("p",{staticClass:"container-title"},[e._v("编辑商品")]),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rule,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.goodsName,callback:function(t){e.$set(e.form,"goodsName","string"==typeof t?t.trim():t)},expression:"form.goodsName"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",[a("i",{staticClass:"el-icon-warning"}),e._v("不超过40个字符")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"ISBN",prop:"isbn"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.isbn,callback:function(t){e.$set(e.form,"isbn",t)},expression:"form.isbn"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"isbn"},[a("i",{staticClass:"el-icon-warning"}),e._v("必须符合10位旧版或13位新版ISBN规则"),a("br"),a("samp",[e._v("如：7-309-04547-5（10位规则)，978-7-302-12260-9（13位规则）")])])])],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类型",prop:"goodsType",required:""}},[a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择类型"},model:{value:e.form.goodsType,callback:function(t){e.$set(e.form,"goodsType",e._n(t))},expression:"form.goodsType"}},e._l(e.goodsList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"价格",prop:"goodsPrice"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.goodsPrice,callback:function(t){e.$set(e.form,"goodsPrice",t)},expression:"form.goodsPrice"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",[a("i",{staticClass:"el-icon-warning"}),e._v("支持整数长度6位，小数点后2位")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"可使用次数",prop:"frequency"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text"},model:{value:e.form.frequency,callback:function(t){e.$set(e.form,"frequency",t)},expression:"form.frequency"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",[a("i",{staticClass:"el-icon-warning"}),e._v("支持整数长度4位")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"使用期限",prop:"effective"}},[a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择期限类型"},model:{value:e.form.effective,callback:function(t){e.$set(e.form,"effective",t)},expression:"form.effective"}},e._l(e.effectiveList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品图片",required:""}},[a("el-col",{attrs:{span:11}},[a("el-upload",{attrs:{id:"goods-pic-list",action:e.actionUrl,headers:e.header,"on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeUpload,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"file-list":e.fileList,limit:3,"list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),e.isGoodsPhoto?a("div",{staticClass:"text-error"},[e._v("请上传商品图片")]):e._e()],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",[a("i",{staticClass:"el-icon-warning"}),e._v("至少上传一张图片")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"商品说明",prop:"describes"}},[a("el-col",{attrs:{span:22}},[a("quill-editor",{ref:"myQuillEditor",staticClass:"goods-editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.form.describes,callback:function(t){e.$set(e.form,"describes",t)},expression:"form.describes"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("router-link",{attrs:{to:"/goodsList"}},[a("span",{staticClass:"new-plain-button mr30"},[e._v("取消")])]),e._v(" "),a("span",{staticClass:"new-primary-button",on:{click:function(t){e.submitForm(e.form)}}},[e._v("保存")])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var Ma=function(e){a("vXSA")},Ea=a("VU/8")(La.a,Pa,!1,Ma,null,null).exports,Fa={goodsName:"goodsDetail",components:{bFooter:h.a,bHeader:g.a,quillEditor:O.quillEditor},data:function(){return{form:{goodsName:"",goodsType:"",goodsPrice:"",isbn:"",frequency:"",effective:"",describes:""},userId:"",id:"",goodsPhoto:[],fileList:[],isGoodsPhoto:!1,dialogVisible:!1,goodsList:[{id:1,name:"全部"},{id:2,name:"图书"},{id:3,name:"绘本"},{id:4,name:"音像"},{id:5,name:"测评服务"}],effectiveList:[{id:1,name:"按年"},{id:2,name:"按月"},{id:3,name:"按周"},{id:4,name:"按天"},{id:5,name:"按小时"}]}},mounted:function(){this.userId=sessionStorage.getItem("userId");var e=this.getUrl(window.location.href);this.id=e.id,this.getGoods(this.id)},methods:{getUrl:function(e){for(var t=void 0,a={},o=e.slice(e.indexOf("?")+1).split("&"),s=0;s<o.length;s++)a[(t=o[s].split("="))[0]]=t[1];return a},getGoods:function(e){var t=this;t.axios.get("/proxy/report-business/booking/v2/api/goodsManager/goods/"+e).then(function(e){if(e.data&&200==e.data.code){var a=e.data.data;t.form.goodsName=a.goodsName,t.form.goodsType=a.goodsType,t.form.goodsPrice=a.goodsPrice.toFixed(2),t.form.isbn=a.isbn,t.form.frequency=a.frequency,t.form.effective=a.effective,t.form.describes=a.describes,t.goodsPhoto=a.goodsPhoto}else t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})}}},Ua={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/products"}}},[e._v("商品管理主页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/goodsList"}}},[e._v("商品管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品详情")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("p",{staticClass:"container-title"},[e._v("商品详情")]),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rule,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.form.goodsName,callback:function(t){e.$set(e.form,"goodsName",t)},expression:"form.goodsName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"ISBN",prop:"isbn"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.form.isbn,callback:function(t){e.$set(e.form,"isbn",t)},expression:"form.isbn"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类型",prop:"goodsType"}},[a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择类型",disabled:!0},model:{value:e.form.goodsType,callback:function(t){e.$set(e.form,"goodsType",e._n(t))},expression:"form.goodsType"}},e._l(e.goodsList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"价格",prop:"goodsPrice"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.form.goodsPrice,callback:function(t){e.$set(e.form,"goodsPrice",e._n(t))},expression:"form.goodsPrice"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"可使用次数",prop:"frequency"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.form.frequency,callback:function(t){e.$set(e.form,"frequency",e._n(t))},expression:"form.frequency"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"使用期限",prop:"effective"}},[a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择期限类型",disabled:!0},model:{value:e.form.effective,callback:function(t){e.$set(e.form,"effective",t)},expression:"form.effective"}},e._l(e.effectiveList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品图片"}},[a("el-col",{attrs:{span:12}},e._l(e.goodsPhoto,function(e){return a("div",{key:e.id,staticClass:"detail-pic"},[a("img",{attrs:{src:e.path,width:"148",height:"148"}})])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"商品说明"}},[a("el-col",{attrs:{span:22}},[a("div",{staticClass:"describes-box ql-editor",domProps:{innerHTML:e._s(e.form.describes)}})])],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("router-link",{attrs:{to:"/goodsList"}},[a("span",{staticClass:"new-plain-button"},[e._v("返回")])])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var Ra=a("VU/8")(Fa,Ua,!1,function(e){a("YTCB")},null,null).exports,Va=[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!0,"large","huge"]}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],["image","link"]],Oa={name:"packageEdit",components:{bHeader:g.a,bFooter:h.a,quillEditor:O.quillEditor},data:function(){return{editorOption:{modules:{toolbar:{container:Va}}},ruleForm:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}}},created:function(){this.getInfo()},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},methods:{onEditorReady:function(e){},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},getInfo:function(){}}},za={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/products"}},[e._v("商品管理")]),e._v(" > "),a("router-link",{attrs:{to:"/packageList"}},[e._v("套餐管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("添加套餐")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"form_content"},[a("p",{staticClass:"form_title"},[e._v("添加套餐")]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px"}},[a("el-row",[a("div",{staticClass:"product_section"},[a("el-form-item",{attrs:{label:"套餐名称",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主视图",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"套餐说明",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总价格（￥）",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠"}},[a("el-form-item",[a("el-radio-group",{model:{value:e.ruleForm.resource,callback:function(t){e.$set(e.ruleForm,"resource",t)},expression:"ruleForm.resource"}},[a("el-radio",{attrs:{label:"是"}}),e._v(" "),a("el-radio",{attrs:{label:"否"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{required:""}},[a("span",[e._v("优惠价")]),e._v(" "),a("span",{staticStyle:{display:"inline-block"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("span",[e._v("元")])]),e._v(" "),a("el-form-item",[a("span",[e._v("优惠期限")]),e._v(" "),a("span",{staticStyle:{display:"inline-block"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("span",[e._v("至")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"开售时间",prop:"name"}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",placeholder:"选择时间"},model:{value:e.ruleForm.date2,callback:function(t){e.$set(e.ruleForm,"date2",t)},expression:"ruleForm.date2"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"库存",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1)]),e._v(" "),a("el-row",[a("div",{staticClass:"product_section"},[a("span",[e._v("关联商品")]),e._v(" "),a("span",[e._v("添加商品")])]),e._v(" "),a("div",{staticClass:"product_section border_brown pdt10"},[a("el-form-item",{attrs:{label:"商品类型",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用次数",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用期限",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1)]),e._v(" "),a("el-row",[a("div",{staticClass:"product_section editor_container"},[a("el-form-item",{attrs:{label:"商品详情",prop:"name"}},[a("el-col",{attrs:{span:22}},[a("quill-editor",{ref:"myQuillEditor",staticClass:"editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}}})],1)],1)],1)]),e._v(" "),a("el-row",[a("div",{staticClass:"product_section ",staticStyle:{"text-align":"center","padding-bottom":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)])],1)],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[]};var Ba=a("VU/8")(Oa,za,!1,function(e){a("Sldx")},null,null).exports,ja={name:"packageDetail",components:{bHeader:g.a,bFooter:h.a},data:function(){return{}},created:function(){this.getInfo()},computed:{},methods:{getInfo:function(){}}},Ha={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/products"}},[e._v("商品管理")]),e._v(" > "),a("router-link",{attrs:{to:"/packageList"}},[e._v("套餐管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("套餐详情")]),e._v(" "),a("hr")],1),e._v(" "),e._m(0)]),e._v(" "),a("b-footer")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page_container"},[t("p",{staticClass:"form_title"}),this._v(" "),t("div",{staticClass:"form_content"}),this._v(" "),t("div",{staticClass:"clearfix"})])}]};var Ga=a("VU/8")(ja,Ha,!1,function(e){a("K8xS")},null,null).exports,Wa={name:"products-panel",data:function(){return{increasedNum:"",itemSumNum:"",approvedSumNum:"",unApprovedNum:"",ax:[]}},components:{bHeader:g.a,bFooter:h.a},created:function(){this.initData(),this.initData2(),this.ax=_.pluck(JSON.parse(sessionStorage.getItem("ax")),"url")},methods:{axs:function(e){return!!sessionStorage.getItem("isad")||this.ax.includes(e)},initData:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/goodsManager/itemStatistics").then(function(t){if(t&&"200"==t.status&&t.data&&t.data.data){var a=t.data.data;e.increasedNum=a.increasedNum,e.itemSumNum=a.itemSumNum}}).catch(function(e){console.log(e)})},initData2:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/goodsManager/bookListStatistics").then(function(t){if(t&&"200"==t.status&&t.data&&t.data.data){var a=t.data.data;e.approvedSumNum=a.approvedSumNum,e.unApprovedNum=a.unApprovedNum}}).catch(function(e){console.log(e)})}}},Qa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("图书管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"item_box"},[e.axs("spgl")?a("div",{staticClass:"item"},[a("h1",[e._v("图书管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.increasedNum))]),e._v(" "),a("p",[e._v("今日新增")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.itemSumNum))]),e._v(" "),a("p",[e._v("图书总数")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/bookList"}})],1):e._e(),e._v(" "),e.axs("spgl")?a("div",{staticClass:"item"},[a("h1",[e._v("阅读书单管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.unApprovedNum))]),e._v(" "),a("p",[e._v("待审批书单")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.approvedSumNum))]),e._v(" "),a("p",[e._v("有效书单总数")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/readList"}})],1):e._e()])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[]};var Ya=a("VU/8")(Wa,Qa,!1,function(e){a("QbCC")},null,null).exports,Ja={name:"bookList",components:{bFooter:h.a,bHeader:g.a},data:function(){return{searchForm:{type:"bookName",search:""},multipleSelection:[],tableData:[],pageInfo:{currPage:1,total:0},userId:""}},mounted:function(){this.userId=sessionStorage.getItem("userId"),this.getList()},methods:{getSearch:function(){this.pageInfo.currPage=1,this.getList()},getList:function(){var e=this,t={},a=this.pageInfo.currPage;this.searchForm.search.length>0&&("bookName"==this.searchForm.type?t.bookName=this.searchForm.search:t.isbn=this.searchForm.search),e.axios.post("/proxy/report-business/booking/v2/api/goodsManager/item/queyItemList/"+a+"/10",t).then(function(t){t.data&&200==t.data.code&&(e.tableData=t.data.data,e.pageInfo=t.data.pageInfo,e.pageInfo.total=t.data.pageInfo.total)}).catch(function(e){console.log(e)})},handleSelectionChange:function(e){this.multipleSelection=e},removeitem:function(){var e=this,t=[];0!==e.multipleSelection.length?(e.multipleSelection.forEach(function(e){t.push(e.id)}),e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.post("/proxy/report-business/booking/v2/api/goodsManager/item/deleteItem",t).then(function(t){t.data&&200==t.data.code?(e.$message.success("删除成功"),e.getList()):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除")})):e.$message.error("请选择要删除的图书！")},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getList()}}},Ka={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper goods-list-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/bookPanel"}}},[e._v("图书管理主页")]),e._v(" "),a("el-breadcrumb-item",[e._v("图书管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:2}},[a("span",{staticClass:"new-primary-button",on:{click:e.removeitem}},[e._v("删除")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("router-link",{attrs:{to:"/addBook"}},[a("span",{staticClass:"new-primary-button"},[e._v("添加")])])],1),e._v(" "),a("el-col",{staticClass:"right",attrs:{span:8}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"选择搜索类型"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"图书名称",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"ISBN",value:"ISBN"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{placeholder:"请输入关键字搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getSearch()}},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search","string"==typeof t?t.trim():t)},expression:"searchForm.search"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(t){e.getSearch()}},slot:"suffix"})])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"图书名称",prop:"bookName",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"出版社",prop:"publisher",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"ISBN",prop:"isbn",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"适读年龄",prop:"ageGroup",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"定价(元)",prop:"bookPrice",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.bookPrice?a("div",[e._v("￥"+e._s(t.row.bookPrice))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"作者",prop:"author",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.author))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上传时间",prop:"createTime",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("router-link",{attrs:{to:{name:"bookDetail",query:{id:t.row.id}}}},[a("span",{staticClass:"goods-operation-icon el-icon-view"})])],1),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("router-link",{attrs:{to:{name:"editBook",query:{id:t.row.id}}}},[a("span",{staticClass:"goods-operation-icon el-icon-edit-outline"})])],1)]}}])})],1),e._v(" "),a("div",[e.tableData&&e.tableData.length>0?a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pageInfo.currPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var Xa=a("VU/8")(Ja,Ka,!1,function(e){a("Ty9w")},null,null).exports,Za=a("o3dj"),eo={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/bookPanel"}}},[e._v("图书管理主页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/bookList"}}},[e._v("图书管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("编辑图书")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("p",{staticClass:"container-title"},[e._v("编辑图书")]),e._v(" "),a("div",{staticClass:"b-container-table booklist"},[a("el-form",{ref:"bookform",attrs:{model:e.bookform,rules:e.rule,"label-width":"120px"}},[a("el-form-item",{staticClass:"book_photo",attrs:{label:"图书封面",required:""}},[a("div",{staticClass:"photo"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.actionUrl,headers:e.header,"on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeUpload,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"show-file-list":!1}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"图书名称",prop:"bookName"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},on:{focus:function(t){e.focus(t)}},model:{value:e.bookform.bookName,callback:function(t){e.$set(e.bookform,"bookName","string"==typeof t?t.trim():t)},expression:"bookform.bookName"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("不超过40个字符")])]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"阅读类型",prop:"readType"}},[a("div",{staticClass:"book_txt"},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"选择阅读类型"},model:{value:e.bookform.readType,callback:function(t){e.$set(e.bookform,"readType",e._n(t))},expression:"bookform.readType"}},e._l(e.readTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"作者",prop:"author"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.author,callback:function(t){e.$set(e.bookform,"author","string"==typeof t?t.trim():t)},expression:"bookform.author"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("不超过40个字符")])]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"出版社",prop:"publisher"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.publisher,callback:function(t){e.$set(e.bookform,"publisher","string"==typeof t?t.trim():t)},expression:"bookform.publisher"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("不超过40个字符")])]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"译者",prop:"translator"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.translator,callback:function(t){e.$set(e.bookform,"translator",t)},expression:"bookform.translator"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("不超过40个字符")])]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"出版日期",prop:"publishDate"}},[a("div",{staticClass:"book_txt"},[a("el-date-picker",{attrs:{type:"month",placeholder:"选择出版年月",clearable:!1,"picker-options":e.pickerOptions},model:{value:e.bookform.publishDate,callback:function(t){e.$set(e.bookform,"publishDate",t)},expression:"bookform.publishDate"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"页数",prop:"page"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.page,callback:function(t){e.$set(e.bookform,"page",t)},expression:"bookform.page"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("支持整数长度4位")])]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"装帧类型",prop:"frame"}},[a("div",{staticClass:"book_txt"},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"选择类型"},model:{value:e.bookform.frame,callback:function(t){e.$set(e.bookform,"frame",t)},expression:"bookform.frame"}},e._l(e.frameList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"定价",prop:"bookPrice"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.bookPrice,callback:function(t){e.$set(e.bookform,"bookPrice",t)},expression:"bookform.bookPrice"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("支持整数长度6位，小数点后2位")])]),e._v(" "),a("el-form-item",{staticClass:"book_item last_item",attrs:{label:"ISBN",prop:"isbn"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.isbn,callback:function(t){e.$set(e.bookform,"isbn",t)},expression:"bookform.isbn"}})],1),e._v(" "),a("span",{staticClass:"isbn"},[a("i",{staticClass:"el-icon-warning"}),e._v("必须符合10位旧版或13位新版ISBN规则"),a("br"),a("samp",[e._v("如：7-309-04547-5（10位规则）")]),a("samp",[e._v("978-7-302-12260-9（13位规则）")])])]),e._v(" "),a("el-form-item",{staticClass:"book_item last_item",attrs:{label:"适读年龄",prop:"ageGroup"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text",maxlength:"10"},model:{value:e.bookform.ageGroup,callback:function(t){e.$set(e.bookform,"ageGroup","string"==typeof t?t.trim():t)},expression:"bookform.ageGroup"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("适读年龄不应超过10个字符")])]),e._v(" "),a("el-form-item",{attrs:{label:"导读",prop:"bookProfile"}},[a("el-col",{attrs:{span:22}},[a("quill-editor",{ref:"myQuillEditor",staticClass:"goods-editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.bookform.bookProfile,callback:function(t){e.$set(e.bookform,"bookProfile",t)},expression:"bookform.bookProfile"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"内容简介",prop:"bookContent"}},[a("el-col",{attrs:{span:22}},[a("quill-editor",{ref:"myQuillEditor1",staticClass:"goods-editer",attrs:{id:"editer1",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.bookform.bookContent,callback:function(t){e.$set(e.bookform,"bookContent",t)},expression:"bookform.bookContent"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"作者介绍",prop:"authorContent"}},[a("el-col",{attrs:{span:22}},[a("quill-editor",{ref:"myQuillEditor2",staticClass:"goods-editer",attrs:{id:"editer2",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.bookform.authorContent,callback:function(t){e.$set(e.bookform,"authorContent",t)},expression:"bookform.authorContent"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"章节目录",prop:"chapter"}},[a("el-col",{attrs:{span:22}},[a("quill-editor",{ref:"myQuillEditor3",staticClass:"goods-editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.bookform.chapter,callback:function(t){e.$set(e.bookform,"chapter",t)},expression:"bookform.chapter"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("router-link",{attrs:{to:"/bookList"}},[a("span",{staticClass:"new-plain-button mr30"},[e._v("取消")])]),e._v(" "),a("span",{staticClass:"new-primary-button",on:{click:function(t){e.submitForm(e.bookform)}}},[e._v("保存")])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var to=function(e){a("nrGU")},ao=a("VU/8")(Za.a,eo,!1,to,null,null).exports,oo=[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!0,"large","huge"]}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],["link"]],so={name:"addBook",components:{bFooter:h.a,bHeader:g.a,quillEditor:O.quillEditor},data:function(){return{imageUrl:"",bookform:{bookName:"",readType:"",author:"",publisher:"",translator:"",bookPrice:"",publishDate:"",page:"",frame:"",isbn:"",bookProfile:"",bookContent:"",authorContent:"",chapter:"",ageGroup:""},rule:{bookName:[{required:!0,message:"请输入图书名称",trigger:"blur"},{max:40,message:"不能超过40个字符",trigger:"blur"}],author:[{required:!0,message:"请输入作者姓名",trigger:"blur"},{max:40,message:"不能超过40个字符",trigger:"blur"}],publisher:[{required:!0,message:"请输入出版社名称",trigger:"blur"},{max:40,message:"不能超过40个字符",trigger:"blur"}],translator:[{message:"请输入译者姓名",trigger:"blur"},{max:40,message:"不能超过40个字符",trigger:"blur"}],isbn:[{required:!0,validator:function(e,t,a){t?!/^[\d\-]+$/.test(t)||17!=t.length&&13!=t.length?a(new Error("请输入正确的ISBN")):a():a(new Error("请输入ISBN"))},trigger:"blur"}],bookPrice:[{validator:function(e,t,a){!/^[0-9]+([.]{1}[0-9]{1,2})?$/.test(t)&&t?a(new Error("请输入保留两位小数的数字")):t>999999.99?a(new Error("不能超过999999.99")):a()},trigger:"blur"}],page:[{validator:function(e,t,a){!/^\d+$/.test(t)&&t?a(new Error("请输入整数")):t>9999?a(new Error("不能超过9999")):a()},trigger:"blur"}],readType:[{required:!0,message:"请选择阅读类型",trigger:"blur"}],bookProfile:[{required:!0,message:"请输入导读内容",trigger:"blur"},{max:4e3,message:"不能超过4000个字符",trigger:"blur"}],authorContent:[{max:4e3,message:"不能超过4000个字符",trigger:"blur"}],bookContent:[{max:4e3,message:"不能超过4000个字符",trigger:"blur"}],chapter:[{max:4e3,message:"不能超过4000个字符",trigger:"blur"}],ageGroup:[{required:!0,message:"请输入适读年龄",trigger:"blur"}]},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}},actionUrl:"/proxy/report-business/booking/v2/api/goodsManager/uploadGoodsImg/",editorOption:{modules:{toolbar:{container:oo}}},userId:"",goodsPhoto:[],fileList:[],isGoodsPhoto:!1,isLock:!1,frameList:[{id:"平装",name:"平装"},{id:"精装",name:"精装"}],readTypeList:[{id:1,name:"经典阅读"},{id:2,name:"双语阅读"},{id:3,name:"科普阅读"},{id:4,name:"绘本阅读"}]}},computed:{editor:function(){return this.$refs.myQuillEditor.quill},header:function(){return{Authorization:sessionStorage.getItem("token")}}},mounted:function(){this.userId=sessionStorage.getItem("userId")},methods:{onEditorReady:function(e){},submitForm:function(e){var t=this,a=t.bookform;t.goodsPhoto=[],t.fileList.forEach(function(e){var a={};a.fileName=e.response.data.fileName,a.path=e.response.data.path,a.size=e.response.data.size,t.goodsPhoto.push(a)}),a.goodsPhoto=t.goodsPhoto,/<img(?:.|\s)*?>/g.test(t.bookform.authorContent)?t.$message.error("商品说明含有图片，请删除后从商品图片处上传图片！"):0!==a.goodsPhoto.length?t.isLock||t.$refs.bookform.validate(function(e){if(!e)return!1;t.isLock=!0,t.axios.post("/proxy/report-business/booking/v2/api/goodsManager/item/saveOrUpdateItem",a).then(function(e){t.isLock=!1,e.data&&200==e.data.code?(t.$message.success(e.data.msg),t.$router.push({name:"bookList"})):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})}):t.isGoodsPhoto=!0},handleSuccess:function(e,t,a){this.imageUrl=URL.createObjectURL(t.raw),this.fileList=a},handleError:function(e){},beforeUpload:function(e){var t="image/jpg"==e.type,a="image/jpeg"==e.type,o=e.size/1024<300;return a||t||this.$message.error("上传图片只能是 jpg 、jpeg格式!"),o||this.$message.error("上传图片大小不能超过 300KB!"),(t||a)&&o},handleRemove:function(e,t){this.fileList=t},CtoH:function(e){for(var t=e,a="",o=0;o<t.length;o++)12288!=t.charCodeAt(o)?t.charCodeAt(o)>65280&&t.charCodeAt(o)<65375?a+=String.fromCharCode(t.charCodeAt(o)-65248):a+=String.fromCharCode(t.charCodeAt(o)):a+=String.fromCharCode(t.charCodeAt(o)-12256);return a}},watch:{fileList:{handler:function(e,t){this.isGoodsPhoto=0===e.length},deep:!0},"bookform.isbn":function(e,t){this.bookform.isbn=this.CtoH(e)},"bookform.bookPrice":function(e,t){this.bookform.bookPrice=this.CtoH(e)},"bookform.page":function(e,t){this.bookform.page=this.CtoH(e)}}},io={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/bookPanel"}}},[e._v("图书管理主页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/bookList"}}},[e._v("图书管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("添加图书")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("p",{staticClass:"container-title"},[e._v("添加图书")]),e._v(" "),a("div",{staticClass:"b-container-table booklist"},[a("el-form",{ref:"bookform",attrs:{model:e.bookform,rules:e.rule,"label-width":"120px"}},[a("el-form-item",{staticClass:"book_photo",attrs:{label:"图书封面",required:""}},[a("div",{staticClass:"photo"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.actionUrl,headers:e.header,"on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeUpload,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"show-file-list":!1}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),e.isGoodsPhoto?a("div",{staticClass:"text-error"},[e._v("请上传图书封面")]):e._e()],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"图书名称",prop:"bookName"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.bookName,callback:function(t){e.$set(e.bookform,"bookName","string"==typeof t?t.trim():t)},expression:"bookform.bookName"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("不超过40个字符")])]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"阅读类型",prop:"readType"}},[a("div",{staticClass:"book_txt"},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"选择阅读类型"},model:{value:e.bookform.readType,callback:function(t){e.$set(e.bookform,"readType",e._n(t))},expression:"bookform.readType"}},e._l(e.readTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"作者",prop:"author"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.author,callback:function(t){e.$set(e.bookform,"author","string"==typeof t?t.trim():t)},expression:"bookform.author"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("不超过40个字符")])]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"出版社",prop:"publisher"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.publisher,callback:function(t){e.$set(e.bookform,"publisher","string"==typeof t?t.trim():t)},expression:"bookform.publisher"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("不超过40个字符")])]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"译者",prop:"translator"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.translator,callback:function(t){e.$set(e.bookform,"translator",t)},expression:"bookform.translator"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("不超过40个字符")])]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"出版日期",prop:"publishDate"}},[a("div",{staticClass:"book_txt"},[a("el-date-picker",{attrs:{type:"month",placeholder:"选择出版年月",editable:!1,clearable:!1,"picker-options":e.pickerOptions},model:{value:e.bookform.publishDate,callback:function(t){e.$set(e.bookform,"publishDate",t)},expression:"bookform.publishDate"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"页数",prop:"page"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.page,callback:function(t){e.$set(e.bookform,"page",t)},expression:"bookform.page"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("支持整数长度4位")])]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"装帧类型",prop:"frame"}},[a("div",{staticClass:"book_txt"},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"选择装帧类型"},model:{value:e.bookform.frame,callback:function(t){e.$set(e.bookform,"frame",t)},expression:"bookform.frame"}},e._l(e.frameList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"定价",prop:"bookPrice"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.bookPrice,callback:function(t){e.$set(e.bookform,"bookPrice",t)},expression:"bookform.bookPrice"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("支持整数长度6位，小数点后2位")])]),e._v(" "),a("el-form-item",{staticClass:"book_item last_item",attrs:{label:"ISBN",prop:"isbn"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text"},model:{value:e.bookform.isbn,callback:function(t){e.$set(e.bookform,"isbn",t)},expression:"bookform.isbn"}})],1),e._v(" "),a("span",{staticClass:"isbn"},[a("i",{staticClass:"el-icon-warning"}),e._v("必须符合10位旧版或13位新版ISBN规则"),a("br"),a("samp",[e._v("如：7-309-04547-5（10位规则）")]),a("samp",[e._v("978-7-302-12260-9（13位规则）")])])]),e._v(" "),a("el-form-item",{staticClass:"book_item last_item",attrs:{label:"适读年龄",prop:"ageGroup"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text",maxlength:"10"},model:{value:e.bookform.ageGroup,callback:function(t){e.$set(e.bookform,"ageGroup","string"==typeof t?t.trim():t)},expression:"bookform.ageGroup"}})],1),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"}),e._v("适读年龄不应超过10个字符")])]),e._v(" "),a("el-form-item",{attrs:{label:"导读",prop:"bookProfile"}},[a("el-col",{attrs:{span:22}},[a("quill-editor",{ref:"myQuillEditor",staticClass:"goods-editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.bookform.bookProfile,callback:function(t){e.$set(e.bookform,"bookProfile",t)},expression:"bookform.bookProfile"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"内容简介",prop:"bookContent"}},[a("el-col",{attrs:{span:22}},[a("quill-editor",{ref:"myQuillEditor1",staticClass:"goods-editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.bookform.bookContent,callback:function(t){e.$set(e.bookform,"bookContent",t)},expression:"bookform.bookContent"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"作者介绍",prop:"authorContent"}},[a("el-col",{attrs:{span:22}},[a("quill-editor",{ref:"myQuillEditor2",staticClass:"goods-editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.bookform.authorContent,callback:function(t){e.$set(e.bookform,"authorContent",t)},expression:"bookform.authorContent"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"章节目录",prop:"chapter"}},[a("el-col",{attrs:{span:22}},[a("quill-editor",{ref:"myQuillEditor3",staticClass:"goods-editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.bookform.chapter,callback:function(t){e.$set(e.bookform,"chapter",t)},expression:"bookform.chapter"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("router-link",{attrs:{to:"/bookList"}},[a("span",{staticClass:"new-plain-button mr30"},[e._v("取消")])]),e._v(" "),a("span",{staticClass:"new-primary-button",on:{click:function(t){e.submitForm(e.bookform)}}},[e._v("保存")])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var ro=a("VU/8")(so,io,!1,function(e){a("NYJM")},null,null).exports,no={name:"bookDetail",components:{bFooter:h.a,bHeader:g.a,quillEditor:O.quillEditor},data:function(){var e;return{imageUrl:"",bookform:(e={bookName:"",author:"",publisher:"",translator:"",bookPrice:"",page:"",frame:"",readType:"",publishDate:""},f()(e,"bookPrice",""),f()(e,"isbn",""),f()(e,"bookProfile",""),f()(e,"bookContent",""),f()(e,"authorContent",""),f()(e,"chapter",""),f()(e,"ageGroup",""),e),userId:"",id:"",goodsPhoto:[],fileList:[],isGoodsPhoto:!1,isLock:!1,frameList:[{id:"平装",name:"平装"},{id:"精装",name:"精装"}],readTypeList:[{id:1,name:"经典阅读"},{id:2,name:"双语阅读"},{id:3,name:"科普阅读"},{id:4,name:"绘本阅读"}]}},mounted:function(){this.userId=sessionStorage.getItem("userId");var e=this.getUrl(window.location.href);this.id=e.id,this.$nextTick(function(){this.getItem(this.id)}),console.log(this.id)},methods:{onEditorReady:function(e){},getUrl:function(e){for(var t=void 0,a={},o=e.slice(e.indexOf("?")+1).split("&"),s=0;s<o.length;s++)a[(t=o[s].split("="))[0]]=t[1];return a},getItem:function(e){var t=this;t.axios.get("/proxy/report-business/booking/v2/api/goodsManager/item/findItem/"+e).then(function(e){if(e.data&&200==e.data.code){var a=e.data.data;t.bookform.bookName=a.bookName,t.bookform.readType=a.readType,t.bookform.author=a.author,t.bookform.publisher=a.publisher,t.bookform.translator=a.translator,t.bookform.bookPrice=a.bookPrice,t.bookform.page=a.page,t.bookform.frame=a.frame,t.bookform.publishDate=a.publishDate,t.bookform.isbn=a.isbn,t.bookform.age=a.age,t.bookform.bookProfile=a.bookProfile,t.bookform.bookContent=a.bookContent,t.bookform.authorContent=a.authorContent,t.bookform.chapter=a.chapter,t.bookform.goodsPhoto=a.goodsPhoto,t.imageUrl=a.goodsPhoto[0].path,t.bookform.ageGroup=a.ageGroup}else t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})}}},lo={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/bookPanel"}}},[e._v("图书管理主页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/bookList"}}},[e._v("图书管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("查看图书")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("p",{staticClass:"container-title"},[e._v("查看图书")]),e._v(" "),a("div",{staticClass:"b-container-table booklist"},[a("el-form",{ref:"bookform",attrs:{model:e.bookform,rules:e.rule,"label-width":"120px"}},[a("el-form-item",{staticClass:"book_photo",attrs:{label:"图书封面"}},[a("div",{staticClass:"photo"},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):e._e()])]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"图书名称",prop:"bookName"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.bookform.bookName,callback:function(t){e.$set(e.bookform,"bookName",t)},expression:"bookform.bookName"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"阅读类型",prop:"readType"}},[a("div",{staticClass:"book_txt"},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:" ",disabled:!0},model:{value:e.bookform.readType,callback:function(t){e.$set(e.bookform,"readType",e._n(t))},expression:"bookform.readType"}},e._l(e.readTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"作者",prop:"author"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.bookform.author,callback:function(t){e.$set(e.bookform,"author",t)},expression:"bookform.author"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"出版社",prop:"publisher"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.bookform.publisher,callback:function(t){e.$set(e.bookform,"publisher",t)},expression:"bookform.publisher"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"译者",prop:"translator"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.bookform.translator,callback:function(t){e.$set(e.bookform,"translator",t)},expression:"bookform.translator"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"出版日期",prop:"publishDate"}},[a("div",{staticClass:"book_txt"},[a("el-date-picker",{attrs:{type:"month",clearable:!1,"picker-options":e.pickerOptions,disabled:!0},model:{value:e.bookform.publishDate,callback:function(t){e.$set(e.bookform,"publishDate",t)},expression:"bookform.publishDate"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"页数",prop:"page"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.bookform.page,callback:function(t){e.$set(e.bookform,"page",t)},expression:"bookform.page"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"装帧类型",prop:"frame"}},[a("div",{staticClass:"book_txt"},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:" ",disabled:!0},model:{value:e.bookform.frame,callback:function(t){e.$set(e.bookform,"frame",t)},expression:"bookform.frame"}},e._l(e.frameList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"定价",prop:"bookPrice"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.bookform.bookPrice,callback:function(t){e.$set(e.bookform,"bookPrice",t)},expression:"bookform.bookPrice"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item",attrs:{label:"ISBN",prop:"isbn"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.bookform.isbn,callback:function(t){e.$set(e.bookform,"isbn",t)},expression:"bookform.isbn"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"book_item last_item",attrs:{label:"适读年龄",prop:"ageGroup"}},[a("div",{staticClass:"book_txt"},[a("el-input",{attrs:{type:"text",maxlength:"10",disabled:!0},model:{value:e.bookform.ageGroup,callback:function(t){e.$set(e.bookform,"ageGroup","string"==typeof t?t.trim():t)},expression:"bookform.ageGroup"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"导读",prop:"bookProfile"}},[a("el-col",{attrs:{span:22}},[a("div",{staticClass:"describes-box ql-editor",domProps:{innerHTML:e._s(e.bookform.bookProfile)}})])],1),e._v(" "),a("el-form-item",{attrs:{label:"内容简介",prop:"bookContent"}},[a("el-col",{attrs:{span:22}},[a("div",{staticClass:"describes-box ql-editor",domProps:{innerHTML:e._s(e.bookform.bookContent)}})])],1),e._v(" "),a("el-form-item",{attrs:{label:"作者介绍",prop:"authorContent"}},[a("el-col",{attrs:{span:22}},[a("div",{staticClass:"describes-box ql-editor",domProps:{innerHTML:e._s(e.bookform.authorContent)}})])],1),e._v(" "),a("el-form-item",{attrs:{label:"章节目录",prop:"chapter"}},[a("el-col",{attrs:{span:22}},[a("div",{staticClass:"describes-box ql-editor",domProps:{innerHTML:e._s(e.bookform.chapter)}})])],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("router-link",{attrs:{to:"/bookList"}},[a("span",{staticClass:"new-plain-button"},[e._v("返回")])])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var co=a("VU/8")(no,lo,!1,function(e){a("R2OK")},null,null).exports,uo=a("P+Qr"),po={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper goods-list-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/bookPanel"}}},[e._v("图书管理主页")]),e._v(" "),a("el-breadcrumb-item",[e._v("阅读书单管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:1}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{change:[function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s},e.checkedAll]}}),e._v(" "),a("span",{staticClass:"label-span"},[e._v("全选")])])]),e._v(" "),a("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:2}},[a("span",{staticClass:"new-primary-button",on:{click:e.removeitem}},[e._v("删除")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("router-link",{attrs:{to:"/readListEdit"}},[a("span",{staticClass:"new-primary-button"},[e._v("添加")])])],1),e._v(" "),a("el-col",{staticClass:"right",attrs:{span:8}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"选择搜索类型"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"书单名称",value:"bookListName"}}),e._v(" "),a("el-option",{attrs:{label:"归属机构",value:"organization"}}),e._v(" "),a("el-option",{attrs:{label:"书单发布者",value:"publisherdName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{placeholder:"请输入关键字搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getSearch()}},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search","string"==typeof t?t.trim():t)},expression:"searchForm.search"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(t){e.getSearch()}},slot:"suffix"})])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"b-container-table read-tb"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"cell-style":e.cellStyle}},[a("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.approvalStatus?a("ipnut",{staticClass:"container-checkbox",attrs:{type:"checkbox",value:t.row.id,disabled:""}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"container-checkbox",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"书单名称",prop:"bookListName",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"书单图书数量",prop:"bookIdsSize",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"阅读截止时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.timeLimit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"approvalStatus",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("approvalStatus")(t.row.approvalStatus)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"归属机构",prop:"organization",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"书单发布者",prop:"publisherdName",width:"140"}}),e._v(" "),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"发布时间",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.publishDate)))])]}}])}),e._v(" "),a("el-table-column",{staticClass:"icon-cell",attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("span",{staticClass:"goods-operation-icon el-icon-view",on:{click:function(a){e.viewNode(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:1==t.row.approvalStatus||3==t.row.approvalStatus?"审批":2==t.row.approvalStatus?"关闭":"发布",placement:"top"}},[1==t.row.approvalStatus||3==t.row.approvalStatus?a("span",{staticClass:"goods-operation-icon i-approve",on:{click:function(a){e.fnApprove(t.row)}}}):e._e(),e._v(" "),2==t.row.approvalStatus||4==t.row.approvalStatus&&t.row.myTime>e.currentdate?a("span",{staticClass:"goods-operation-icon i-opened",on:{click:function(a){e.fnChange(t.row)}}}):e._e()]),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"规则",placement:"top"}},[2==t.row.bookListType?a("router-link",{attrs:{to:{name:"readRules",query:{id:t.row.id}}}},[a("span",{staticClass:"i-rules",on:{click:function(a){e.fnRules(t.row)}}})]):e._e()],1)]}}])})],1),e._v(" "),a("div",[e.tableData&&e.tableData.length>0?a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pageInfo.currPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{staticClass:"ap-popup",attrs:{title:"审批",visible:e.dialogApproveVisible,"before-close":e.fnCancel},on:{"update:visible":function(t){e.dialogApproveVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"审批状态","label-width":e.formLabelWidth,prop:"approvalStatus"}},[a("el-radio-group",{model:{value:e.form.approvalStatus,callback:function(t){e.$set(e.form,"approvalStatus",t)},expression:"form.approvalStatus"}},[a("el-radio",{attrs:{label:2}},[e._v("批准")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("驳回")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"审批意见","label-width":e.formLabelWidth,prop:"opinion"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:""},model:{value:e.form.opinion,callback:function(t){e.$set(e.form,"opinion","string"==typeof t?t.trim():t)},expression:"form.opinion"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.fnCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.fnConfirm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var mo=function(e){a("w0+9")},vo=a("VU/8")(uo.a,po,!1,mo,null,null).exports,fo={name:"examPaperEdit",components:{bFooter:h.a,bHeader:g.a},data:function(){return{isNew:!0,titles:"新建书单",ruleId:"",bookId:"",bookIds:[],difficultyArr:[],readTypeList:[{label:"经典阅读",value:1},{label:"双语阅读",value:2},{label:"科普阅读",value:3},{label:"绘本阅读",value:4}],bookListTypeList:[{label:"导师",value:1},{label:"公共",value:2}],form:{rulesName:"",publisherdName:JSON.parse(sessionStorage.getItem("userData")).userName,publisherdId:JSON.parse(sessionStorage.getItem("userData")).userId,organization:JSON.parse(sessionStorage.getItem("userData")).schoolInfoName,readType:"",bookListType:"",bookListName:"",publishDate:"",bookListIntroduce:"",difficulty:"",bookName:"",pageInfo:{currPage:1,total:0},items:[]},rulesoptions:[],useroptions:[],bookoptions:[],list:[],loading:!1,states:[],rules:{readType:[{required:!0,message:"请选择阅读类型",trigger:"blur"}],bookListType:[{required:!0,message:"请选择书单类型",trigger:"blur"}],bookListName:[{required:!0,max:20,message:"请输入不超过20个字符的书单名称",trigger:"blur"}],timeLimit:[{required:!0,message:"请选择阅读时限",trigger:"blur"}],rulesName:[{required:!0,message:"请输入规则名称进行搜索",trigger:"blur"}],bookListIntroduce:[{required:!0,min:3,max:200,message:"请输入3-200个字符的书单介绍",trigger:"blur"}]},pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},mounted:function(){this.form.readOnly=this.$store.nodereadonly,this.$store.nodereadonly=!1,this.$store.nodeId&&(this.isNew=!1,this.form.readOnly?this.titles="查看书单":this.titles="编辑书单",this.nodeId=this.$store.nodeId,this.getNodeData(),this.$store.nodeId=!1)},methods:{changeRead:function(){this.form.items=[]},bookChange:function(e){""!=e&&(_.findWhere(this.form.items,{id:e.id})||this.form.items.push(JSON.parse(P()(e))))},addBook:function(e){var t=this;this.loading=!0,e&&0!=e.trim().length||(e=""),t.axios.get("/proxy/report-business/booking/v2/api/evaluate/bookAndRule/name/"+this.form.readType+"?itemName="+e.trim()).then(function(e){t.loading=!1,e&&e.data&&e.data.data?t.bookoptions=e.data.data.length?e.data.data:[]:e&&e.data&&0==e.data.data.length&&(t.bookoptions=[])}).catch(function(e){console.log(e)})},getNodeData:function(){var e=this;this.form.pageInfo.currPage;this.axios.get("/proxy/report-business/booking/v2/api/goodsManager/bookList/findBookList/"+this.nodeId+"/"+this.form.pageInfo.currPage+"/4").then(function(t){var a=t.data.data;C()(e.form,a)}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this,t=this;!this.form.items.length>0?t.$message.error("请搜索并选择图书"):this.$refs.form.validate(function(a){a&&e.isNew&&(t.$message.success("新建成功"),t.submits())})},getAvg:function(e){var t,a=0,o=e.length;for(t=0;t<o;t++)a+=e[t];return Math.round(a/o)},submits:function(){var e=this;this.form.bookIds=_.pluck(this.form.items,"bookId"),this.form.difficultyArr=_.pluck(this.form.items,"difficulty"),this.form.ruleId=this.ruleId,this.form.difficulty=this.getAvg(this.form.difficultyArr),delete this.form.items,this.axios.post("/proxy/report-business/booking/v2/api/goodsManager/bookList/creatBookList",this.form).then(function(t){e.$router.push({name:"readList"})}).catch(function(e){console.log(e)})},fndelete:function(e){this.form.items=_.without(this.form.items,e)},handleCurrentChange:function(e){this.form.pageInfo.currPage=e,this.getNodeData()}}},ho={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper  add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/bookPanel"}}},[e._v("图书管理主页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/readList"}}},[e._v("阅读书单管理")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(this.titles))])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("div",{staticClass:"b-container-table edit-col-2"},[a("el-form",{ref:"form",staticStyle:{"padding-left":"60px"},attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"书单发布者",prop:"publisherdName"}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.publisherdName,callback:function(t){e.$set(e.form,"publisherdName",t)},expression:"form.publisherdName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"归属机构",prop:"organization"}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.organization,callback:function(t){e.$set(e.form,"organization",t)},expression:"form.organization"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"阅读类型",prop:"readType"}},[a("el-col",{attrs:{span:22}},[a("el-select",{attrs:{disabled:e.form.readOnly},on:{change:e.changeRead},model:{value:e.form.readType,callback:function(t){e.$set(e.form,"readType",t)},expression:"form.readType"}},e._l(e.readTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),this.form.readOnly?a("el-form-item",{attrs:{label:"书单类型",prop:"bookListType"}},[a("el-col",{attrs:{span:22}},[a("el-select",{attrs:{disabled:e.form.readOnly,placeholder:"请选择"},model:{value:e.form.bookListType,callback:function(t){e.$set(e.form,"bookListType",t)},expression:"form.bookListType"}},e._l(e.bookListTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"书单名称",prop:"bookListName"}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{disabled:e.form.readOnly,placeholder:"请输入不超过20个字符的书单名称"},model:{value:e.form.bookListName,callback:function(t){e.$set(e.form,"bookListName","string"==typeof t?t.trim():t)},expression:"form.bookListName"}})],1)],1),e._v(" "),this.form.readOnly?a("el-form-item",{attrs:{label:"平均难度",prop:"difficulty"}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.difficulty,callback:function(t){e.$set(e.form,"difficulty",t)},expression:"form.difficulty"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"阅读时限",prop:"timeLimit"}},[a("el-col",{attrs:{span:15}},[a("el-date-picker",{attrs:{placeholder:"选择阅读截止时间",editable:!1,clearable:!1,"picker-options":e.pickerOptions,disabled:e.form.readOnly},model:{value:e.form.timeLimit,callback:function(t){e.$set(e.form,"timeLimit",t)},expression:"form.timeLimit"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("截止")])],1),e._v(" "),this.form.readOnly?a("el-form-item",{attrs:{label:"发布时间",prop:"publishDate"}},[a("el-col",{attrs:{span:22}},[a("el-date-picker",{attrs:{editable:!1,clearable:!1,"picker-options":e.pickerOptions,disabled:e.form.readOnly},model:{value:e.form.publishDate,callback:function(t){e.$set(e.form,"publishDate",t)},expression:"form.publishDate"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{staticClass:"wdform",attrs:{label:"书单介绍",prop:"bookListIntroduce"}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",row:3,disabled:e.form.readOnly,placeholder:"请输入3-200个字符的书单介绍"},model:{value:e.form.bookListIntroduce,callback:function(t){e.$set(e.form,"bookListIntroduce","string"==typeof t?t.trim():t)},expression:"form.bookListIntroduce"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"book-item",attrs:{label:"选择图书",prop:"bookName"}},[a("span",{staticClass:"required"},[e._v("*")]),e._v(" "),this.form.readOnly?e._e():a("el-row",[a("el-col",{staticStyle:{width:"348px"}},[a("div",{staticClass:"search_area"},[a("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请输入图书名称进行搜索","remote-method":e.addBook,loading:e.loading,disabled:e.form.readOnly},on:{change:e.bookChange}},e._l(e.bookoptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.bookName,value:t}},[a("span",[a("img",{attrs:{src:t.picUrl}})]),e._v(" "),a("span",{staticClass:"mgl20"},[a("samp",[e._v("书名："+e._s(t.bookName))]),e._v(" "),a("samp",[e._v("作者："+e._s(t.author))]),e._v(" "),a("samp",[e._v("ISBN："+e._s(t.isbn))]),e._v(" "),a("samp",[e._v("出版社："+e._s(t.publisher))])])])}))],1)])],1),e._v(" "),a("el-row",[this.form.items.length>0?a("div",{staticClass:"checked-list"},[e._l(e.form.items,function(t){return a("div",{key:t.id,staticClass:"checked-item"},[a("span",[a("img",{attrs:{src:t.picUrl}})]),e._v(" "),a("span",{staticClass:"mgl60 wd"},[a("samp",[e._v("书名："+e._s(t.bookName))]),e._v(" "),a("samp",[e._v("作者："+e._s(t.author))]),e._v(" "),a("samp",[e._v("ISBN："+e._s(t.isbn))]),e._v(" "),a("samp",[e._v("出版社："+e._s(t.publisher))])]),e._v(" "),a("span",{staticClass:"wd"},[a("div",{staticClass:"title"},[e._v("测评难度：")]),e._v(" "),a("el-rate",{attrs:{disabled:!0},model:{value:t.difficulty,callback:function(a){e.$set(t,"difficulty",a)},expression:"item.difficulty"}})],1),e._v(" "),e.form.readOnly?e._e():a("span",{staticClass:"i-delete",on:{click:function(a){e.fndelete(t)}}})])}),e._v(" "),this.form.readOnly?a("div",{staticStyle:{"text-align":"center",position:"relative",bottom:"0"}},[a("el-pagination",{attrs:{"current-page":e.form.pageInfo.currPage,"page-size":e.form.pageInfo.pageSize,layout:"total, prev, pager, next",total:e.form.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1):e._e()],2):e._e()])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"40px"}},[a("router-link",{attrs:{to:"/readList"}},[a("span",{staticClass:"new-plain-button mr30"},[e._v("关闭")])]),e._v(" "),this.form.readOnly?e._e():a("span",{staticClass:"new-primary-button",on:{click:e.onSubmit,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.onSubmit(t):null}}},[e._v("保存")])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var go=a("VU/8")(fo,ho,!1,function(e){a("wZYJ")},null,null).exports,_o={name:"readRules",components:{bFooter:h.a,bHeader:g.a},data:function(){return{form:{rate1:"",rate2:"",rate3:"",rate4:"",quantity1:"",quantity2:"",quantity3:"",quantity4:"",quality1:"",quality2:"",quality3:"",quality4:"",bookSize:0}}},mounted:function(){if(JSON.parse(sessionStorage.getItem("rowData")).ruleMap){this.form=JSON.parse(sessionStorage.getItem("rowData")).ruleMap;for(var e=1;e<=4;e++)this.form["rate"+e]=this.form.rate[e-1].threshold,this.form["quantity"+e]=this.form.quantity[e-1].threshold,this.form["quality"+e]=this.form.quality[e-1].threshold}JSON.parse(sessionStorage.getItem("rowData")).bookIdsSize&&(this.form.bookSize=JSON.parse(sessionStorage.getItem("rowData")).bookIdsSize),this.form.disabled1=!0,this.form.disabled2=!0,this.form.disabled3=!0,this.form.disabled4=!0,this.form.bookSize>=1&&(this.form.disabled1=!1),this.form.bookSize>=2&&(this.form.disabled2=!1),this.form.bookSize>=3&&(this.form.disabled3=!1),this.form.bookSize>=4&&(this.form.disabled4=!1)},methods:{checkInt:function(e){return!/^\d+$/.test(e)&&e?"阅读数量维度请输入整数":!e&&"阅读数量维度评分规则不能为空"},checkFloat1:function(e){return!/^\d+(\.\d{1,1})?$/.test(e)&&e?"阅读速度维度请输入最多保留一位小数的数字":!e&&"阅读速度维度评分规则不能为空"},checkFloat2:function(e){return!/^\d+(\.\d{1,2})?$/.test(e)&&e?"阅读质量维度请输入最多保留两位小数的数字":!e&&"阅读质量维度评分规则不能为空"},onSubmit:function(e){for(var t=this,a=1;a<=4;a++){if(t.checkFloat1(this.form["rate"+a]))return void this.$message(t.checkFloat1(this.form["rate"+a]));if(t.checkFloat2(this.form["quality"+a]))return void this.$message(t.checkFloat2(this.form["quality"+a]))}if(1==this.form.bookSize){for(var o=1;o<=1;o++)if(t.checkInt(this.form["quantity"+o]))return void this.$message(t.checkInt(this.form["quantity"+o]))}else if(2==this.form.bookSize){for(var s=1;s<=2;s++)if(t.checkInt(this.form["quantity"+s]))return void this.$message(t.checkInt(this.form["quantity"+s]))}else if(3==this.form.bookSize){for(var i=1;i<=3;i++)if(t.checkInt(this.form["quantity"+i]))return void this.$message(t.checkInt(this.form["quantity"+i]))}else for(var r=1;r<=4;r++)if(t.checkInt(this.form["quantity"+r]))return void this.$message(t.checkInt(this.form["quantity"+r]));this.$refs.form.validate(function(e){e?t.submits():t.$message.error("请检查数据")})},submits:function(){for(var e=this,t={ruleMap:{rate:[],quantity:[],quality:[]}},a=1;a<=4;a++)t.ruleMap.rate.push({gradeId:a,threshold:this.form["rate"+a]}),t.ruleMap.quantity.push({gradeId:a,threshold:this.form["quantity"+a]}),t.ruleMap.quality.push({gradeId:a,threshold:this.form["quality"+a]});this.axios.post("/proxy/report-business/booking/v2/api/goodsManager/bookList/setRule/"+JSON.parse(sessionStorage.getItem("rowData")).id,t).then(function(t){e.$router.push({name:"readList"}),e.$message.success("编辑成功")}).catch(function(e){console.log(e)})}}},bo={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper  add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/bookPanel"}}},[e._v("图书管理主页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/readList"}}},[e._v("阅读书单管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("书单评分规则")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("div",{staticClass:"b-container-table rulemap"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"阅读速度维度",prop:"rate"}},[a("span",{staticClass:"required"},[e._v("*")]),e._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"headline"},[e._v("当阅读任务提交时，且参与过的书单内的阅读测评不小于一次时进行统计，用时越少评价越高，超出最低评价用时为最低评价。")]),e._v(" "),a("div",[a("div",[e._v("评价A:"),a("el-input",{model:{value:e.form.rate1,callback:function(t){e.$set(e.form,"rate1","string"==typeof t?t.trim():t)},expression:"form.rate1"}}),e._v("天完成")],1),e._v(" "),a("div",[e._v("评价B:"),a("el-input",{model:{value:e.form.rate2,callback:function(t){e.$set(e.form,"rate2","string"==typeof t?t.trim():t)},expression:"form.rate2"}}),e._v("天完成")],1),e._v(" "),a("div",[e._v("评价C:"),a("el-input",{model:{value:e.form.rate3,callback:function(t){e.$set(e.form,"rate3","string"==typeof t?t.trim():t)},expression:"form.rate3"}}),e._v("天完成")],1),e._v(" "),a("div",[e._v("评价D:"),a("el-input",{model:{value:e.form.rate4,callback:function(t){e.$set(e.form,"rate4","string"==typeof t?t.trim():t)},expression:"form.rate4"}}),e._v("天完成")],1)])])],1),e._v(" "),a("el-form-item",{attrs:{label:"阅读数量维度",prop:"quantity"}},[a("span",{staticClass:"required"},[e._v("*")]),e._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"headline"},[e._v("当阅读任务提交时，且参与过的书单内的阅读测评不小于一次时进行统计，参与的书单内的测评越多评价越高，本书单共有"),a("strong",[e._v(e._s(e.form.bookSize))]),e._v("本图书，当不足4本时评价D不填，当不足3本时评价C不填，当不足2本时评价B不填。")]),e._v(" "),a("div",[a("div",[e._v("评价A:"),a("el-input",{attrs:{disabled:e.form.disabled1},model:{value:e.form.quantity1,callback:function(t){e.$set(e.form,"quantity1","string"==typeof t?t.trim():t)},expression:"form.quantity1"}}),e._v("本书完成测评")],1),e._v(" "),a("div",[e._v("评价B:"),a("el-input",{attrs:{disabled:e.form.disabled2},model:{value:e.form.quantity2,callback:function(t){e.$set(e.form,"quantity2","string"==typeof t?t.trim():t)},expression:"form.quantity2"}}),e._v("本书完成测评")],1),e._v(" "),a("div",[e._v("评价C:"),a("el-input",{attrs:{disabled:e.form.disabled3},model:{value:e.form.quantity3,callback:function(t){e.$set(e.form,"quantity3","string"==typeof t?t.trim():t)},expression:"form.quantity3"}}),e._v("本书完成测评")],1),e._v(" "),a("div",[e._v("评价D:"),a("el-input",{attrs:{disabled:e.form.disabled4},model:{value:e.form.quantity4,callback:function(t){e.$set(e.form,"quantity4","string"==typeof t?t.trim():t)},expression:"form.quantity4"}}),e._v("本书完成测评")],1)])])],1),e._v(" "),a("el-form-item",{attrs:{label:"阅读质量维度",prop:"quality"}},[a("span",{staticClass:"required"},[e._v("*")]),e._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"headline"},[e._v("当阅读任务提交时，且参与过的书单内的阅读测评不小于一次时进行统计，参与的书单内的测评得分越高评价越高。")]),e._v(" "),a("div",[e._v("本书单共有"),a("strong",[e._v(e._s(e.form.bookSize))]),e._v("本图书")]),e._v(" "),a("div",[a("div",[e._v("评价A: 全部测评平均分为"),a("el-input",{model:{value:e.form.quality1,callback:function(t){e.$set(e.form,"quality1","string"==typeof t?t.trim():t)},expression:"form.quality1"}})],1),e._v(" "),a("div",[e._v("评价B: 全部测评平均分为"),a("el-input",{model:{value:e.form.quality2,callback:function(t){e.$set(e.form,"quality2","string"==typeof t?t.trim():t)},expression:"form.quality2"}})],1),e._v(" "),a("div",[e._v("评价C: 全部测评平均分为"),a("el-input",{model:{value:e.form.quality3,callback:function(t){e.$set(e.form,"quality3","string"==typeof t?t.trim():t)},expression:"form.quality3"}})],1),e._v(" "),a("div",[e._v("评价D: 全部测评平均分为"),a("el-input",{model:{value:e.form.quality4,callback:function(t){e.$set(e.form,"quality4","string"==typeof t?t.trim():t)},expression:"form.quality4"}})],1)])])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"40px"}},[a("router-link",{attrs:{to:"/readList"}},[a("span",{staticClass:"new-plain-button mr30"},[e._v("取消")])]),e._v(" "),a("span",{staticClass:"new-primary-button",on:{click:function(t){e.onSubmit(e.form)},keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.onSubmit(e.form)}}},[e._v("保存")])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var ko=a("VU/8")(_o,bo,!1,function(e){a("IDDl")},null,null).exports,yo={name:"evaluationPanel",data:function(){return{usedRuleTotal:"",ruleTotal:"",templateTotal:"",usedTemplateTotal:"",existsIntroNum:"",noExistsIntroNum:"",ax:[]}},components:{bHeader:g.a,bFooter:h.a},created:function(){this.initData(),this.ax=_.pluck(JSON.parse(sessionStorage.getItem("ax")),"url")},methods:{axs:function(e){return!!sessionStorage.getItem("isad")||this.ax.includes(e)},initData:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/evaluate/statistics").then(function(t){if(t&&"200"==t.status&&t.data&&t.data.data){var a=t.data.data;e.usedRuleTotal=a.usedRuleTotal,e.ruleTotal=a.ruleTotal,e.templateTotal=a.templateTotal,e.usedTemplateTotal=a.usedTemplateTotal,e.existsIntroNum=a.existsIntroNum,e.noExistsIntroNum=a.noExistsIntroNum}}).catch(function(e){console.log(e)})}}},xo={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("测评管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"item_box"},[e.axs("spgl")?a("div",{staticClass:"item"},[a("h1",[e._v("测评规则管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.usedRuleTotal))]),e._v(" "),a("p",[e._v("已使用规则总数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.ruleTotal))]),e._v(" "),a("p",[e._v("测评规则总数")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/evaRulesList"}})],1):e._e(),e._v(" "),e.axs("spgl")?a("div",{staticClass:"item"},[a("h1",[e._v("测评模板管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.templateTotal))]),e._v(" "),a("p",[e._v("模板总数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.usedTemplateTotal))]),e._v(" "),a("p",[e._v("已使用模板数")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/evaTemplateList"}})],1):e._e(),e._v(" "),e.axs("spgl")?a("div",{staticClass:"item"},[a("h1",[e._v("测评简介管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.existsIntroNum))]),e._v(" "),a("p",[e._v("已有简介图书总数")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.noExistsIntroNum))]),e._v(" "),a("p",[e._v("待填写简介图书")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/evaIntroList"}})],1):e._e()])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[]};var Co=a("VU/8")(yo,xo,!1,function(e){a("9k1R")},null,null).exports,wo={name:"evaRulesList",components:{bFooter:h.a,bHeader:g.a},data:function(){return{searchForm:{search:""},multipleSelection:[],tableData:[],pageInfo:{currPage:1,total:0},userId:""}},mounted:function(){this.userId=sessionStorage.getItem("userId"),this.getList()},methods:{editNode:function(e){this.$store.nodeId=e.id,this.$store.nodereadonly=!1,this.$router.push({name:"evaruleEdit"})},viewNode:function(e){this.$store.nodeId=e.id,this.$store.nodereadonly=!0,this.$router.push({name:"evaruleEdit"})},getSearch:function(){this.pageInfo.currPage=1,this.getList()},getList:function(){var e=this,t="",a=this.pageInfo.currPage;""!=this.searchForm.search&&(t="?name="+this.searchForm.search),e.axios.get("/proxy/report-business/booking/v2/api/evaluate/rules/"+a+"/10"+t).then(function(t){t.data&&200==t.data.code&&(e.tableData=t.data.datas,e.pageInfo=t.data.pageInfo,e.pageInfo.total=t.data.pageInfo.total)}).catch(function(e){console.log(e)})},handleSelectionChange:function(e){this.multipleSelection=e},removeitem:function(){var e=this,t=[];0!==e.multipleSelection.length?(e.multipleSelection.forEach(function(e){t.push(e.id)}),e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/evaluate/rules",{data:t,headers:{"content-type":"application/json"}}).then(function(t){t.data&&200==t.data.code?(e.$message.success("删除成功"),e.getList()):e.$message.error("有关联关系的规则不能删除，请重新选择！")}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除")})):e.$message.error("请选择要删除的测评规则！")},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getList()}}},Io={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper goods-list-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/evaluationPanel"}}},[e._v("测评管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("测评规则管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"new-primary-button",on:{click:e.removeitem}},[e._v("删除")])],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("router-link",{attrs:{to:"/evaruleEdit"}},[a("span",{staticClass:"new-primary-button"},[e._v("添加")])])],1),e._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入规则名称搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getSearch()}},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search","string"==typeof t?t.trim():t)},expression:"searchForm.search"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(t){e.getSearch()}},slot:"suffix"})])],1)],1)],1),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"规则名称",prop:"rulesName",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{label:"出题维度",prop:"dimensions",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{label:"题目总数",prop:"dimensionTotalNum",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{label:"关联图书数量",prop:"booksNum",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creatorName",label:"创建人",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",staticStyle:{"margin-right":"10px"},attrs:{effect:"dark",content:"查看",placement:"top"}},[a("span",{staticClass:"goods-operation-icon el-icon-view",on:{click:function(a){e.viewNode(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"scope.row",staticStyle:{"margin-right":"10px"},attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("span",{staticClass:"goods-operation-icon el-icon-edit-outline",on:{click:function(a){e.editNode(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"关联",placement:"top"}},[a("router-link",{attrs:{to:{name:"evaRelateList",query:{evaluationRulesId:t.row.id,rulesName:t.row.rulesName}}}},[a("span",{staticClass:"i-relate"})])],1)]}}])})],1),e._v(" "),a("div",[e.tableData&&e.tableData.length>0?a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pageInfo.currPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var qo=a("VU/8")(wo,Io,!1,function(e){a("Cc/l")},null,null).exports,No={name:"evaTemplateList",components:{bFooter:h.a,bHeader:g.a},data:function(){return{selectUserVisible:!1,dlgTitle:this.$route.query.rulesName+"  关联图书",searchForm:{search:""},evaluationRulesId:"",userDefaultProps:{children:"children",label:"bookName"},ugrpDatas:[],ugrpResults:[],oldData:[],filterstr:"",rulesName:this.$route.query.rulesName,multipleSelection:[],tableData:[],changeNameVisible:!1,form:{relName:""},currentId:"",pageInfo:{currPage:1,total:0},userId:"",rules:{relName:[{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}]}}},mounted:function(){this.userId=sessionStorage.getItem("userId");var e=this.getUrl(window.location.href);this.evaluationRulesId=e.evaluationRulesId,this.getList()},methods:{showgl:function(){this.selectUserVisible=!0},changeName:function(e){this.form.relName=e.relationName,this.changeNameVisible=!0,this.currentId=e.id},postName:function(){var e=this,t=!0;this.$refs.form.validate(function(a){a||(e.$message.error("请检查数据"),t=!1)}),t&&(this.changeNameVisible=!1,null!=this.form.relName?e.axios.put("/proxy/report-business/booking/v2/api/evaluate/bookAndRule/name/"+this.userId+"/"+this.currentId+"?relationName="+this.form.relName).then(function(t){t.data&&200==t.data.code&&(e.$message.success("编辑成功"),e.getList())}).catch(function(e){console.log(e)}):e.relationName="")},postRelate:function(){var e=this,t=this.ugrpResults,a=!1;this.selectUserVisible=!1,this.oldData.length==this.ugrpDatas.length?_.each(this.oldData,function(t){_.findWhere(e.ugrpDatas,{bookId:t.bookId})||(a=!0)}):a=!0,a&&e.axios.post("/proxy/report-business/booking/v2/api/evaluate/bookAndRule/"+this.userId+"/"+this.evaluationRulesId,t).then(function(t){t.data&&200==t.data.code&&(0==e.ugrpResults.length?e.$message.success("取消关联成功"):e.$message.success("关联成功"),e.getList())}).catch(function(e){console.log(e)})},addUgrp:function(){var e=this;e.userCheckList=e.$refs.userTree.getCheckedNodes(),e.ugrpDatas=_.compact(_.map(e.ugrpDatas,function(t){return _.findWhere(e.userCheckList,t)?null:t})),e.ugrpResults=e.ugrpResults.concat(e.userCheckList)},addAllUgrp:function(){this.ugrpResults=this.ugrpResults.concat(this.ugrpDatas),this.ugrpDatas=[]},removeUgrp:function(){var e=this;e.userCheckList=e.$refs.userTreeRes.getCheckedNodes(),e.ugrpResults=_.compact(_.map(e.ugrpResults,function(t){return _.findWhere(e.userCheckList,t)?null:t})),e.ugrpDatas=e.ugrpDatas.concat(e.userCheckList)},removeAllUgrp:function(){this.ugrpDatas=this.ugrpDatas.concat(this.ugrpResults),this.ugrpResults=[]},getUrl:function(e){for(var t=void 0,a={},o=e.slice(e.indexOf("?")+1).split("&"),s=0;s<o.length;s++)a[(t=o[s].split("="))[0]]=t[1];return a},getSearch:function(){this.pageInfo.currPage=1,this.getList()},getList:function(){var e=this,t="",a=this.pageInfo.currPage;this.searchForm.search.length>0&&(t="?name="+this.searchForm.search),e.axios.get("/proxy/report-business/booking/v2/api/evaluate/bookAndRule/"+a+"/10/"+this.evaluationRulesId+t).then(function(t){t.data&&200==t.data.code&&(e.tableData=t.data.datas,e.pageInfo=t.data.pageInfo,e.pageInfo.total=t.data.pageInfo.total)}).catch(function(e){console.log(e)}),e.axios.get("/proxy/report-business/booking/v2/api/evaluate/bookAndRule/"+this.evaluationRulesId).then(function(t){t&&t.data&&(e.ugrpDatas=t.data.data.noRelation,e.oldData=t.data.data.noRelation,e.ugrpResults=t.data.data.alreadyRelation)}).catch(function(e){console.log(e)})},filterData:function(){var e=this.filterstr.trim();0==e.length?this.ugrpDatas=this.oldData:this.ugrpDatas=_.filter(this.oldData,function(t){return t.bookName.indexOf(e)>=0})},alertmsg:function(){this.$message.error("请先填写关联名称和测评简介再开启")},changeStatus:function(e){var t=this,a=1==e.relationStatus?2:1;t.axios.put("/proxy/report-business/booking/v2/api/evaluate/bookAndRule/status/"+t.userId+"/"+e.id+"?relationStatus="+a).then(function(a){if(a.data&&200==a.data.code){var o=1==e.relationStatus?"关闭成功":"开启成功";t.$message.success(o),t.getList()}else t.$message.error("开启失败")}).catch(function(e){console.log(e)})},handleSelectionChange:function(e){this.multipleSelection=e},deleteItem:function(e){var t=this;t.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.delete("/proxy/report-business/booking/v2/api/evaluate/bookAndRule",{data:[e.id],headers:{"content-type":"application/json"}}).then(function(e){e.data&&200==e.data.code?(t.$message.success("删除成功"),t.getList()):t.$message.error("删除失败")}).catch(function(e){console.log(e)})}).catch(function(){t.$message.info("已取消删除")})},removeitem:function(){var e=this,t=[];0!==e.multipleSelection.length?(e.multipleSelection.forEach(function(e){t.push(e.id)}),e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/evaluate/bookAndRule",{data:t,headers:{"content-type":"application/json"}}).then(function(t){t.data&&200==t.data.code?(e.$message.success("删除成功"),e.getList()):e.$message.error("删除失败")}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除")})):e.$message.error("请选择要删除的图书！")},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getList()}}},To={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper goods-list-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/evaluationPanel"}}},[e._v("测评管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/evaRulesList"}}},[e._v("测评规则管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("关联图书")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:2}},[a("span",{staticClass:"new-primary-button",on:{click:e.removeitem}},[e._v("删除")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",{staticClass:"new-primary-button",on:{click:e.showgl}},[e._v("关联")])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:14}},[a("span",{staticClass:"current-rule"},[e._v("当前规则："+e._s(e.rulesName))])]),e._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入图书名称搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getSearch()}},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search","string"==typeof t?t.trim():t)},expression:"searchForm.search"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(t){e.getSearch()}},slot:"suffix"})])],1)],1)],1),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"图书名称",prop:"bookName",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{label:"关联名称",prop:"relationName",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"关联图书",prop:"relationStatus",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(1==t.row.relationStatus?"开启":"关闭"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"测评简介",prop:"hasIntro",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"关联时间",prop:"createTime",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",staticStyle:{"margin-right":"10px"},attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("span",{staticClass:"goods-operation-icon el-icon-edit-outline",on:{click:function(a){e.changeName(t.row)}}})]),e._v(" "),t.row.relationName&&t.row.relationName.length>0&&"有"==t.row.hasIntro?a("el-tooltip",{staticClass:"scope.row",staticStyle:{"margin-right":"10px"},attrs:{effect:"dark",content:1==t.row.relationStatus?"关闭":"开启",placement:"top"}},[a("span",{staticClass:"i-opened",on:{click:function(a){e.changeStatus(t.row)}}})]):e._e(),e._v(" "),t.row.relationName&&"无"!=t.row.hasIntro?e._e():a("el-tooltip",{staticClass:"scope.row",staticStyle:{"margin-right":"10px"},attrs:{effect:"dark",content:1==t.row.relationStatus?"关闭":"开启",placement:"top"}},[a("span",{staticClass:"i-opened i-disabled",on:{click:function(a){e.alertmsg(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("span",{staticClass:"goods-operation-icon el-icon-delete",on:{click:function(a){e.deleteItem(t.row)}}})])]}}])})],1),e._v(" "),a("div",[e.tableData&&e.tableData.length>0?a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pageInfo.currPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{attrs:{title:e.dlgTitle,visible:e.selectUserVisible},on:{"update:visible":function(t){e.selectUserVisible=t}}},[a("div",[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",[a("h1",{staticStyle:{float:"left","margin-right":"20px"}},[e._v("可关联")]),e._v(" "),a("el-col",{staticClass:"postrelate",staticStyle:{float:"left","margin-top":"-5px"},attrs:{span:19}},[a("el-input",{attrs:{placeholder:"请输入图书名称搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.filterData()}},model:{value:e.filterstr,callback:function(t){e.filterstr="string"==typeof t?t.trim():t},expression:"filterstr"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(t){e.filterData()}},slot:"suffix"})])],1),e._v(" "),a("div",{staticClass:"clearfix"})],1),e._v(" "),a("div",{staticClass:"user-left-content"},[a("el-tree",{ref:"userTree",attrs:{data:e.ugrpDatas,props:e.userDefaultProps,"show-checkbox":""}})],1)]),e._v(" "),a("el-col",{staticClass:"middle-content",attrs:{span:6}},[a("div",{staticClass:"btn_group",staticStyle:{"padding-top":"15px"}},[a("ul",[a("li",[a("span",{on:{click:function(t){e.addAllUgrp()}}},[e._v("全部右移 "),a("i",{staticClass:"el-icon-d-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.addUgrp()}}},[e._v("右移 "),a("i",{staticClass:"el-icon-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.removeUgrp()}}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v(" 撤销")])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.removeAllUgrp()}}},[a("i",{staticClass:"el-icon-d-arrow-left"}),e._v(" 全部撤销")])])])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("h1",[e._v("已关联")]),e._v(" "),a("div",{staticClass:"user-right-content"},[a("el-tree",{ref:"userTreeRes",attrs:{data:e.ugrpResults,props:e.userDefaultProps,"show-checkbox":""}})],1)])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.postRelate}},[e._v("确 认")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"编辑关联名称",visible:e.changeNameVisible},on:{"update:visible":function(t){e.changeNameVisible=t}}},[a("div",[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"关联名称",prop:"relName"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过15个字符!",placement:"right"}},[a("el-col",{attrs:{span:18}},[a("el-input",{model:{value:e.form.relName,callback:function(t){e.$set(e.form,"relName","string"==typeof t?t.trim():t)},expression:"form.relName"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.postName}},[e._v("确 认")])],1)])],1)},staticRenderFns:[]};var So=a("VU/8")(No,To,!1,function(e){a("kbN9")},null,null).exports,$o={name:"evaTemplateList",components:{bFooter:h.a,bHeader:g.a},data:function(){return{searchForm:{type:"bookName",search:""},multipleSelection:[],tableData:[],pageInfo:{currPage:1,total:0},options:[{label:"全部测评",value:0},{label:"公共测评",value:1},{label:"导师测评",value:2}],userId:""}},mounted:function(){this.userId=sessionStorage.getItem("userId"),this.getList()},methods:{editNode:function(e){this.$store.nodeId=e.id,this.$store.nodereadonly=!1,this.$router.push({name:"evamodalEdit"})},viewNode:function(e){this.$store.nodeId=e.id,this.$store.nodereadonly=!0,this.$router.push({name:"evamodalEdit"})},getSearch:function(){this.pageInfo.currPage=1,this.getList()},getList:function(){var e=this,t="",a=this.pageInfo.currPage;this.searchForm.search.length>0&&(t="?name="+this.searchForm.search),e.axios.get("/proxy/report-business/booking/v2/api/evaluate/evaluateTemplate/"+a+"/10"+t).then(function(t){t.data&&200==t.data.code&&(_.each(t.data.datas,function(t){t.applyscope>=0&&(t.applyscopes=_.findWhere(e.options,{value:t.applyscope}).label),t.disabled=!t.deletabel}),e.tableData=t.data.datas,e.pageInfo=t.data.pageInfo,e.pageInfo.total=t.data.pageInfo.total)}).catch(function(e){console.log(e)})},handleSelectionChange:function(e){this.multipleSelection=e},removeitem:function(){var e=this,t="",a=[];0!==e.multipleSelection.length?(e.multipleSelection.forEach(function(e){e.deletabel?a.push(e.id):t=e.templateName}),t?e.$message.error(t+" 已使用，请勿删除！"):e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/evaluate/evaluateTemplate",{data:a,headers:{"content-type":"application/json"}}).then(function(t){t.data&&200==t.data.code?(e.$message.success("删除成功"),e.getList()):e.$message.error("删除失败，选择的记录中有已被测评规则关联的数据，请重新选择!")}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除")})):e.$message.error("请选择要删除的模板！")},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getList()}}},Do={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper goods-list-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/evaluationPanel"}}},[e._v("测评管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("评价模板管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:2}},[a("span",{staticClass:"new-primary-button",on:{click:e.removeitem}},[e._v("删除")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("router-link",{attrs:{to:"/evamodalEdit"}},[a("span",{staticClass:"new-primary-button"},[e._v("添加")])])],1),e._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入评价模板名称搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getSearch()}},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search","string"==typeof t?t.trim():t)},expression:"searchForm.search"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(t){e.getSearch()}},slot:"suffix"})])],1)],1)],1),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",disabled:"disabled",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"评价模板名称",prop:"templateName",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{label:"适用说明",prop:"applyscopes",width:"340"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建人",prop:"creatorName",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("span",{staticClass:"goods-operation-icon el-icon-view",on:{click:function(a){e.viewNode(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("span",{staticClass:"goods-operation-icon el-icon-edit-outline",on:{click:function(a){e.editNode(t.row)}}})])]}}])})],1),e._v(" "),a("div",[e.tableData&&e.tableData.length>0?a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pageInfo.currPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var Ao=a("VU/8")($o,Do,!1,function(e){a("h/4n")},null,null).exports,Lo=[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!0,"large","huge"]}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],["link"]],Po={name:"evaIntroList",components:{bFooter:h.a,bHeader:g.a,quillEditor:O.quillEditor},data:function(){return{searchForm:{search:""},userDefaultProps:{children:"children",label:"rulesName"},ugrpDatas:[],ugrpResults:[],oldData:[],selectUserVisible:!1,dlgTitle:"",introDlgTitle:"",multipleSelection:[],tableData:[],pageInfo:{currPage:1,total:0},userId:"",editIntroDialog:!1,curRow:{assessProfile:""},evaluateType:"",evaoptions:[{label:"公共测评规则",value:1},{label:"导师测评规则",value:2}],editorOption:{modules:{toolbar:{container:Lo}}},rules:{assessProfile:[{required:!0,message:"请输入内容",trigger:"blur"},{min:2,max:200,message:"长度在 2 到 200 个字符",trigger:"blur"}]}}},mounted:function(){this.userId=sessionStorage.getItem("userId"),this.getList()},methods:{changeRel:function(e){var t=this;this.curRow=e,this.dlgTitle=e.bookName+"  关联测评规则",t.axios.get("/proxy/report-business/booking/v2/api/evaluate/evaluateIntro/"+e.id).then(function(e){e&&e.data&&(t.selectUserVisible=!0,t.ugrpDatas=e.data.data.noRelation,t.oldData=e.data.data.noRelation,t.ugrpResults=e.data.data.alreadyRelation)}).catch(function(e){console.log(e)})},filterData:function(){var e=this.evaluateType;""==e?this.ugrpDatas=this.oldData:1==e?this.ugrpDatas=_.filter(this.oldData,function(e){return 1==e.evaluateType}):2==e&&(this.ugrpDatas=_.filter(this.oldData,function(e){return 2==e.evaluateType}))},postRelate:function(){var e=this,t=this.ugrpResults,a=!1;this.oldData.length==this.ugrpDatas.length?_.each(this.oldData,function(t){_.findWhere(e.ugrpDatas,{bookId:t.bookId})||(a=!0)}):a=!0,a?e.axios.post("/proxy/report-business/booking/v2/api/evaluate/evaluateIntro/"+this.userId+"/"+this.curRow.id,t).then(function(t){t.data&&200==t.data.code?(e.selectUserVisible=!1,e.evaluateType="",e.$message.success("关联成功"),e.getList()):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)}):this.selectUserVisible=!1},addUgrp:function(){var e=this;e.userCheckList=e.$refs.userTree.getCheckedNodes(),e.ugrpDatas=_.compact(_.map(e.ugrpDatas,function(t){return _.findWhere(e.userCheckList,t)?null:t})),e.ugrpResults=e.ugrpResults.concat(e.userCheckList)},addAllUgrp:function(){this.ugrpResults=this.ugrpResults.concat(this.ugrpDatas),this.ugrpDatas=[]},removeUgrp:function(){var e=this;e.userCheckList=e.$refs.userTreeRes.getCheckedNodes(),e.ugrpResults=_.compact(_.map(e.ugrpResults,function(t){return _.findWhere(e.userCheckList,t)?null:t})),e.ugrpDatas=e.ugrpDatas.concat(e.userCheckList)},removeAllUgrp:function(){this.ugrpDatas=this.ugrpDatas.concat(this.ugrpResults),this.ugrpResults=[]},getSearch:function(){this.pageInfo.currPage=1,this.getList()},getList:function(){var e=this,t="",a=this.pageInfo.currPage;this.searchForm.search.length>0&&(t="?name="+this.searchForm.search),e.axios.get("/proxy/report-business/booking/v2/api/evaluate/evaluateIntro/"+a+"/10"+t).then(function(t){t.data&&200==t.data.code&&(e.tableData=t.data.datas,e.pageInfo=t.data.pageInfo,e.pageInfo.total=t.data.pageInfo.total)}).catch(function(e){console.log(e)})},handleSelectionChange:function(e){this.multipleSelection=e},editIntro:function(e){this.curRow=e,this.introDlgTitle=e.bookName+"测评简介",this.editIntroDialog=!0},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getList()},onEditorReady:function(e){},submitForm:function(e){var t=this,a=this,o=!1,s=a.curRow;s.fileInfo=a.fileInfo,s.creator=a.userId,/<img(?:.|\s)*?>/g.test(s.assessProfile)?a.$message.error("正文内容含有图片，请从添加图片处上传图片！"):a.$refs.editIntroForm.validate(function(e){if(!e)return!1;o||(o=!0,a.axios.put("/proxy/report-business/booking/v2/api/evaluate/evaluateIntro/intro/"+sessionStorage.getItem("userId")+"/"+t.curRow.id+"?assessProfile="+s.assessProfile).then(function(e){o=!1,200==e.data.code?(a.editIntroDialog=!1,a.$message.success(e.data.msg),a.getList()):a.$message.error(e.data.msg)}).catch(function(e){o=!1,console.log(e)}))})},resetForm:function(e){this.$refs.editIntroForm.resetFields(),this.editIntroDialog=!1},closeDialog:function(e){this.$refs.editIntroForm.resetFields()}}},Mo={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper goods-list-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/evaluationPanel"}}},[e._v("测评管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("测评简介管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("el-row",{attrs:{span:24}},[a("el-col",{staticClass:"right",attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入图书名称搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getSearch()}},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search","string"==typeof t?t.trim():t)},expression:"searchForm.search"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(t){e.getSearch()}},slot:"suffix"})])],1)],1)],1),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"图书名称",prop:"bookName",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{label:"ISBN",prop:"isbn",width:"210"}}),e._v(" "),a("el-table-column",{attrs:{label:"关联试题数量",prop:"relationQuestionNum",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"测评简介",prop:"hasIntro",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"测评规则",prop:"evaluateRuleNum",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{label:"上传时间",prop:"createTime",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",staticStyle:{"margin-right":"10px"},attrs:{effect:"dark",content:"关联规则",placement:"top"}},[a("span",{staticClass:"i-relate",on:{click:function(a){e.changeRel(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"有"==t.row.hasIntro?"修改简介":"添加简介",placement:"top"}},[a("span",{staticClass:"goods-operation-icon el-icon-edit-outline",on:{click:function(a){e.editIntro(t.row)}}})])]}}])})],1),e._v(" "),a("div",[e.tableData&&e.tableData.length>0?a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pageInfo.currPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)])]),e._v(" "),a("bFooter"),e._v(" "),a("el-dialog",{attrs:{title:e.dlgTitle,visible:e.selectUserVisible},on:{"update:visible":function(t){e.selectUserVisible=t}}},[a("div",[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("h1",{staticStyle:{float:"left","margin-right":"20px"}},[e._v("可关联")]),e._v(" "),a("el-col",{staticClass:"postrelate",staticStyle:{float:"left","margin-top":"-5px"},attrs:{span:19}},[a("el-select",{on:{change:e.filterData},model:{value:e.evaluateType,callback:function(t){e.evaluateType=t},expression:"evaluateType"}},e._l(e.evaoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"clearfix"})],1),e._v(" "),a("div",{staticClass:"user-left-content"},[a("el-tree",{ref:"userTree",attrs:{data:e.ugrpDatas,props:e.userDefaultProps,"show-checkbox":""}})],1)]),e._v(" "),a("el-col",{staticClass:"middle-content",attrs:{span:6}},[a("div",{staticClass:"btn_group",staticStyle:{"padding-top":"15px"}},[a("ul",[a("li",[a("span",{on:{click:function(t){e.addAllUgrp()}}},[e._v("全部右移 "),a("i",{staticClass:"el-icon-d-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.addUgrp()}}},[e._v("右移 "),a("i",{staticClass:"el-icon-arrow-right"})])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.removeUgrp()}}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v(" 撤销")])]),e._v(" "),a("li",[a("span",{on:{click:function(t){e.removeAllUgrp()}}},[a("i",{staticClass:"el-icon-d-arrow-left"}),e._v(" 全部撤销")])])])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("h1",{staticStyle:{"margin-bottom":"10px"}},[e._v("已关联")]),e._v(" "),a("div",{staticClass:"user-right-content"},[a("el-tree",{ref:"userTreeRes",attrs:{data:e.ugrpResults,props:e.userDefaultProps,"show-checkbox":""}})],1)])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.postRelate}},[e._v("确 认")])],1)]),e._v(" "),a("el-dialog",{staticClass:"new-dialog",attrs:{title:e.introDlgTitle,visible:e.editIntroDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editIntroDialog=t},close:function(t){e.closeDialog(e.editIntroForm)}}},[a("div",[a("el-form",{ref:"editIntroForm",attrs:{rules:e.rules,model:e.curRow,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"测评简介",prop:"assessProfile"}},[a("quill-editor",{ref:"myQuillEditor",staticClass:"editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.curRow.assessProfile,callback:function(t){e.$set(e.curRow,"assessProfile",t)},expression:"curRow.assessProfile"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetForm(e.curRow)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitForm(e.curRow)}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Eo=a("VU/8")(Po,Mo,!1,function(e){a("lAnt")},null,null).exports,Fo={name:"evaruleEdit",components:{bFooter:h.a,bHeader:g.a},mounted:function(){this.form.readOnly=this.$store.nodereadonly,this.$store.nodereadonly=!1,this.$store.nodeId&&(this.isNew=!1,this.form.readOnly?this.titles="查看测评规则":this.titles="编辑测评规则",this.getNodeData(),this.$store.nodeId=!1)},methods:{getqData:function(e){if(e){var t=this;t.axios.get("/proxy/report-business/booking/v2/api/evaluate/evaluateTemplate/getAllName/"+e).then(function(e){e&&e.data&&(t.options=e.data.data)}).catch(function(e){console.log(e)})}},getNodeData:function(){var e=this;this.axios.get("/proxy/report-business/booking/v2/api/evaluate/rules/"+this.$store.nodeId).then(function(t){var a=t.data.data;_.each(a.evaluationClassifications,function(e){}),a.dimensions=_.map(a.dimension,function(t){return _.findWhere(e.dimensions,{key:t}).name}),C()(e.form,a),e.getqData(a.evaluateType)}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this,t=!0;_.each(this.form.evaluationClassifications,function(e){e.evaluationTemplateId&&e.evaluate.trim()&&e.threshold&&e.judge||(t=!1)}),t?(this.form.dimension=_.map(this.form.dimensions,function(t){return _.findWhere(e.dimensions,{name:t}).key}),this.$refs.form.validate(function(t){t?e.submits():e.$message.error("请检查数据")})):e.$message.error("请正确维护评价分级！")},submits:function(){var e=this;this.form.advancedOptions=_.map(this.form.advancedOptionss,function(t){return _.findWhere(e.advancedOptions,{name:t}).key}),delete this.form.advancedOptionss,delete this.form.dimensions,this.isNew?this.axios.post("/proxy/report-business/booking/v2/api/evaluate/rules/"+sessionStorage.getItem("userId"),this.form).then(function(t){e.$router.push({name:"evaRulesList"})}).catch(function(e){console.log(e)}):this.axios.put("/proxy/report-business/booking/v2/api/evaluate/rules/"+sessionStorage.getItem("userId"),this.form).then(function(t){500==t.data.code&&e.$message.error(t.data.msg),e.$router.push({name:"evaRulesList"})}).catch(function(e){console.log(e)})},removeOp:function(e){this.form.evaluationClassifications.length>2?this.form.evaluationClassifications.splice(_.findIndex(this.form.evaluationClassifications,e),1):this.$message.error("至少留两个")},addOp:function(e){this.form.evaluationClassifications.length<=4&&this.form.evaluationClassifications.push({noticeGroups:[],operaGroups:[],url:"",operationAction:"",operationtype:""})}},data:function(){return{isNew:!0,options:[],titles:"添加测评规则",evaoptions:[{label:"公共测评",value:1},{label:"导师测评",value:2}],stoptions:[{label:"匹配(难度一至)",value:1},{label:"不匹配(任意难度)",value:2}],form:{evaluationClassifications:[{threshold:"",judge:"",evaluate:"",evaluationTemplateId:""},{threshold:"",judge:"",evaluate:"",evaluationTemplateId:""}],advancedOptionss:[],dimensions:[],matchDiff:"",difficulty:"",evaluateType:""},qlist:[{label:"大于",value:1},{label:"小于",value:2}],advancedOptions:[{name:"尽量不从该用户近次（3次）答题的题目中组卷",key:1},{name:"尽量使用组卷次数最少的题目进行组卷",key:2},{name:"尽量使用组卷次数最多的题目进行组卷（与最少互斥，同时选择最少生效）",key:3},{name:"尽量使用最新上传的题目进行组卷",key:4}],dimensions:[{name:"记忆维度",key:1},{name:"理解维度",key:2},{name:"运用维度",key:3},{name:"拓展维度",key:4}],rules:{rulesName:[{required:!0,message:"请输入规则名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],evaluateType:[{required:!0,message:"请选择规则适用范围",trigger:"blur"}],rulesDescription:[{required:!0,message:"请输入测评规则说明",trigger:"blur"},{min:3,max:200,message:"长度在 3 到 200 个字符",trigger:"blur"}],evaluationClassifications:[{required:!0,message:"请输入评价分级",trigger:"blur"}],difficulty:[{type:"number",min:1,required:!0,message:"请输入测评难度",trigger:"blur"}],dimension:[{required:!0,message:"请选择维度",trigger:"blur"}],dimensionNum:[{validator:function(e,t,a){!/^\d+$/.test(t)&&t?a(new Error("请输入整数")):t>99?a(new Error("不能超过99")):t?a():a(new Error("请输入题目数"))},required:!0,trigger:"blur"}],dimensionScore:[{validator:function(e,t,a){!/^\d+$/.test(t)&&t?a(new Error("请输入整数")):t>999?a(new Error("不能超过999")):t?a():a(new Error("请输入分数"))},required:!0,trigger:"blur"}],matchDiff:[{required:!0,message:"请输入严格匹配试题难度",trigger:"blur"}]}}}},Uo={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper  add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/evaluationPanel"}}},[e._v("测评管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/evaRulesList"}}},[e._v("测评规则管理")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(this.titles))])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("div",{staticClass:"b-container-table"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"规则名称",prop:"rulesName"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过20个字符!",placement:"right"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.rulesName,callback:function(t){e.$set(e.form,"rulesName","string"==typeof t?t.trim():t)},expression:"form.rulesName"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"规则适用范围",prop:"evaluateType"}},[a("el-col",{attrs:{span:14}},[a("el-select",{attrs:{disabled:e.form.readOnly},on:{change:e.getqData},model:{value:e.form.evaluateType,callback:function(t){e.$set(e.form,"evaluateType",t)},expression:"form.evaluateType"}},e._l(e.evaoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"测评难度选择",prop:"difficulty"}},[a("el-col",{attrs:{span:14}},[a("el-rate",{attrs:{disabled:e.form.readOnly},model:{value:e.form.difficulty,callback:function(t){e.$set(e.form,"difficulty",t)},expression:"form.difficulty"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"维度选择",prop:"dimension"}},[a("el-col",{attrs:{span:14}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"至少选择一个维度!",placement:"right"}},[a("el-checkbox-group",{attrs:{disabled:e.form.readOnly},model:{value:e.form.dimensions,callback:function(t){e.$set(e.form,"dimensions",t)},expression:"form.dimensions"}},[a("el-checkbox",{key:"1",attrs:{label:"记忆维度",name:"ngroup"}}),e._v(" "),a("el-checkbox",{key:"2",attrs:{label:"理解维度",name:"ngroup"}}),e._v(" "),a("el-checkbox",{key:"3",attrs:{label:"运用维度",name:"ngroup"}}),e._v(" "),a("el-checkbox",{key:"4",attrs:{label:"拓展维度",name:"ngroup"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"测评规则说明",prop:"rulesDescription"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{type:"textarea",disabled:e.form.readOnly},model:{value:e.form.rulesDescription,callback:function(t){e.$set(e.form,"rulesDescription","string"==typeof t?t.trim():t)},expression:"form.rulesDescription"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"每维度题目数",prop:"dimensionNum"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.dimensionNum,callback:function(t){e.$set(e.form,"dimensionNum","string"==typeof t?t.trim():t)},expression:"form.dimensionNum"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"每维度分数",prop:"dimensionScore"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.dimensionScore,callback:function(t){e.$set(e.form,"dimensionScore","string"==typeof t?t.trim():t)},expression:"form.dimensionScore"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"严格匹配试题难度",prop:"matchDiff"}},[a("el-col",{attrs:{span:14}},[a("el-select",{attrs:{disabled:e.form.readOnly},model:{value:e.form.matchDiff,callback:function(t){e.$set(e.form,"matchDiff",t)},expression:"form.matchDiff"}},e._l(e.stoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"评价分级",prop:"evaluationClassifications"}},[e._l(e.form.evaluationClassifications,function(t){return a("el-form-item",{key:t.id},[e.form.readOnly?e._e():a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过五个步骤，最少一个!",placement:"right"}}),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:1.6}},[a("span",[e._v("当得到分数")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{attrs:{disabled:e.form.readOnly},model:{value:t.judge,callback:function(a){e.$set(t,"judge",a)},expression:"op.judge"}},e._l(e.qlist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:t.threshold,callback:function(a){e.$set(t,"threshold",a)},expression:"op.threshold"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",[e._v("%时，评价为")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:t.evaluate,callback:function(a){e.$set(t,"evaluate",a)},expression:"op.evaluate"}})],1),e._v(" "),a("el-col",{attrs:{span:2,offset:"1"}},[a("span",[e._v("评价模板选择")])]),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-select",{attrs:{disabled:e.form.readOnly},model:{value:t.evaluationTemplateId,callback:function(a){e.$set(t,"evaluationTemplateId",a)},expression:"op.evaluationTemplateId"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.templateName,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[e.form.readOnly?e._e():a("span",{staticClass:"i-minus",attrs:{disabled:e.form.readOnly},on:{click:function(a){a.preventDefault(),e.removeOp(t)}}})])],1)],1)}),e._v(" "),e.form.readOnly?e._e():a("span",{staticClass:"i-add",attrs:{disabled:e.form.readOnly},on:{click:function(t){t.preventDefault(),e.addOp()}}})],2),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("router-link",{attrs:{to:"/evaRulesList"}},[a("span",{staticClass:"new-plain-button mr30"},[e._v("关闭")])]),e._v(" "),this.form.readOnly?e._e():a("span",{staticClass:"new-primary-button",on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var Ro,Vo=a("VU/8")(Fo,Uo,!1,function(e){a("3FkA")},"data-v-e90fad94",null).exports,Oo=[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!0,"large","huge"]}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],["link"]],zo={name:"evaruleEdit",components:{bFooter:h.a,bHeader:g.a,quillEditor:O.quillEditor},mounted:function(){this.form.readOnly=this.$store.nodereadonly,this.$store.nodereadonly=!1,this.$store.nodeId&&(this.isNew=!1,this.form.readOnly?this.titles="查看评价模板":this.titles="编辑评价模板",this.getNodeData(),this.$store.nodeId=!1)},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},methods:(Ro={onEditorReady:function(e){},insertTag:function(e){this.form.evaluationContent=this.form.evaluationContent+e},getNodeData:function(){var e=this;this.axios.get("/proxy/report-business/booking/v2/api/evaluate/evaluateTemplate/"+this.$store.nodeId).then(function(t){var a=t.data.data;C()(e.form,a)}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){t&&e.submits()})}},f()(Ro,"onEditorReady",function(e){}),f()(Ro,"submits",function(){var e=this;this.isNew?this.axios.post("/proxy/report-business/booking/v2/api/evaluate/evaluateTemplate/"+sessionStorage.getItem("userId"),this.form).then(function(t){500!=t.data.code?(e.$router.push({name:"evaTemplateList"}),e.$message.success("添加成功")):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)}):this.axios.put("/proxy/report-business/booking/v2/api/evaluate/evaluateTemplate/"+sessionStorage.getItem("userId"),this.form).then(function(t){500==t.data.code&&e.$message.error(t.data.msg),e.$router.push({name:"evaTemplateList"})}).catch(function(e){console.log(e)})}),Ro),data:function(){return{isNew:!0,titles:"添加评价模板",options:[{label:"公共测评",value:1},{label:"导师测评",value:2}],form:{operaTypes:[{noticeGroups:[],operaGroups:[],url:"",operationAction:"",operationtype:""}],evaluationContent:"",applyscope:""},editorOption:{modules:{toolbar:{container:Oo}}},rules:{templateName:[{required:!0,message:"请输入模板名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],applyscope:[{required:!0,message:"请选择模板适用范围",trigger:"blur"}],evaluationContent:[{required:!0,message:"请输入评价内容",trigger:"blur"},{min:3,max:4e3,message:"长度在 3 到 4000 个字符",trigger:"blur"}]}}}},Bo={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper  add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/evaluationPanel"}}},[e._v("测评管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/evaTemplateList"}}},[e._v("评价模板管理")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(this.titles))])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("div",{staticClass:"b-container-table"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"templateName"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过20个字符!",placement:"right"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.templateName,callback:function(t){e.$set(e.form,"templateName","string"==typeof t?t.trim():t)},expression:"form.templateName"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"模板适用范围",prop:"applyscope"}},[a("el-col",{attrs:{span:14}},[a("el-select",{attrs:{disabled:e.form.readOnly},model:{value:e.form.applyscope,callback:function(t){e.$set(e.form,"applyscope",t)},expression:"form.applyscope"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-form-item",{staticClass:"eva-btns",attrs:{label:"评价内容",prop:"evaluationContent"}},[e.form.readOnly?e._e():a("span",{staticClass:"new-plain-button gray-btn mr10",on:{click:function(t){t.preventDefault(),e.insertTag("{userId}")}}},[e._v("插入用户姓名")]),e._v(" "),e.form.readOnly?e._e():a("span",{staticClass:"new-plain-button gray-btn mr10",on:{click:function(t){t.preventDefault(),e.insertTag("{orgName}")}}},[e._v("插入机构名")]),e._v(" "),e.form.readOnly?e._e():a("span",{staticClass:"new-plain-button gray-btn",on:{click:function(t){t.preventDefault(),e.insertTag("{yuedudaoshi}")}}},[e._v("插入阅读导师(当前阅读类型)")]),e._v(" "),a("el-col",{attrs:{span:22}},[e.form.readOnly?a("div",{staticClass:"describes-box ql-editor",domProps:{innerHTML:e._s(e.form.evaluationContent)}}):e._e(),e._v(" "),e.form.readOnly?e._e():a("quill-editor",{ref:"myQuillEditor",staticClass:"goods-editer",attrs:{id:"editer",options:e.editorOption},on:{ready:function(t){e.onEditorReady(t)}},model:{value:e.form.evaluationContent,callback:function(t){e.$set(e.form,"evaluationContent",t)},expression:"form.evaluationContent"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("router-link",{attrs:{to:"/evaTemplateList"}},[a("span",{staticClass:"new-plain-button mr30"},[e._v("关闭")])]),e._v(" "),this.form.readOnly?e._e():a("span",{staticClass:"new-primary-button",on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var jo=a("VU/8")(zo,Bo,!1,function(e){a("6BYZ")},null,null).exports,Ho={name:"products-panel",data:function(){return{titleTypeNum:"",findTitleNum:"",ax:[]}},components:{bHeader:g.a,bFooter:h.a},created:function(){this.initData(),this.ax=_.pluck(JSON.parse(sessionStorage.getItem("ax")),"url")},methods:{axs:function(e){return!!sessionStorage.getItem("isad")||this.ax.includes(e)},initData:function(){var e=this;e.axios.post("/proxy/report-business/booking/v2/api/title/findTitleCount",{}).then(function(t){if(t&&"200"==t.status&&t.data&&t.data.data){var a=t.data.data;e.titleTypeNum=a.titleTypeNum,e.findTitleNum=a.findTitleNum}}).catch(function(e){console.log(e)})}}},Go={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("试题管理主页")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"item_box"},[e.axs("tdjgl.wjgl")?a("div",{staticClass:"item fl mgr50 col_purple paper_info"},[a("h1",[e._v("试题管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.titleTypeNum))]),e._v(" "),a("p",[e._v("试题类型")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.findTitleNum))]),e._v(" "),a("p",[e._v("试题数量")])])])]),e._v(" "),a("router-link",{attrs:{to:"/examPaperlist"}})],1):e._e(),e._v(" "),e.axs("tdjgl.wjgl")?a("div",{staticClass:"item fl mgr50 col_purple paper_info"},[a("h1",[e._v("标签管理")]),e._v(" "),e._m(0),e._v(" "),a("router-link",{attrs:{to:""}})],1):e._e()])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("标签数量")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v("0")]),e._v(" "),a("p",[e._v("标签分类")])])])])}]};var Wo=a("VU/8")(Ho,Go,!1,function(e){a("xvqJ")},null,null).exports,Qo={name:"examPaperList",components:{bFooter:h.a,bHeader:g.a},data:function(){return{searchForm:{searchType:"code",search:""},multipleSelection:[],tableData:[],pageInfo:{currPage:1,total:0},userId:"",readTypes:[{value:"经典阅读",key:"1"},{value:"双语阅读",key:"2"},{value:"科普阅读",key:"3"},{value:"绘本阅读",key:"4"}],titleTypes:[{value:"单项选择题",key:"1"},{value:"多项选择题",key:"2"},{value:"填空题",key:"3"},{value:"调查题",key:"4"},{value:"问答题",key:"5"}],readTypeList:[{label:"经典阅读",value:1},{label:"双语阅读",value:2},{label:"科普阅读",value:3},{label:"绘本阅读",value:4}],titleTypeList:[{label:"单项选择题",value:1},{label:"多项选择题",value:2},{label:"填空题",value:3},{label:"调查题",value:4},{label:"问答题",value:5}]}},filters:{readType:function(e){var t=e;switch(t){case 1:t="经典阅读";break;case 2:t="双语阅读";break;case 3:t="科普阅读";break;case 4:t="绘本阅读"}return t},titleType:function(e){var t=e;switch(t){case 1:t="单项选择题";break;case 2:t="多项选择题";break;case 3:t="填空题";break;case 4:t="调查题";break;case 5:t="问答题"}return t}},mounted:function(){this.userId=sessionStorage.getItem("userId");var e=this.getUrl(window.location.href);this.evaluationRulesId=e.evaluationRulesId,sessionStorage.getItem("List_page")&&(this.pageInfo=JSON.parse(sessionStorage.getItem("List_page")),sessionStorage.removeItem("List_page")),this.getList()},methods:{editPaper:function(e){this.$store.nodeId=e.id,this.$store.nodereadonly=!1,sessionStorage.setItem("timu",P()(e)),this.$router.push({name:"examPaperEdit"})},editAnswer:function(e){this.$store.nodeId=e.id,this.$store.nodereadonly=!1,sessionStorage.setItem("timu",P()(e)),sessionStorage.setItem("List_page",P()(this.pageInfo)),this.$router.push({name:"examAnswerEdit"})},getUrl:function(e){for(var t=void 0,a={},o=e.slice(e.indexOf("?")+1).split("&"),s=0;s<o.length;s++)a[(t=o[s].split("="))[0]]=t[1];return a},getList:function(){var e=this,t={},a=e.searchForm.search,o=e.searchForm.searchType,s=this.pageInfo.currPage;t={},a&&("readType"==o?t.readType=a:"titleType"==o?t.titleType=a:"code"==o?t.code=a:t.bookName=a),e.axios.post("/proxy/report-business/booking/v2/api/title/findTitleList/"+s+"/10",t).then(function(t){t.data&&200==t.data.code&&(e.tableData=t.data.data,e.pageInfo=t.data.pageInfo,e.pageInfo.total=t.data.pageInfo.total)}).catch(function(e){console.log(e)})},setNull:function(){this.searchForm.search=""},alertmsg1:function(e){this.$message.error("请先下架再进行编辑!")},alertmsg:function(e){this.$message.error("请先添加答案！")},changeStatus:function(e){var t=this,a=1==e.status?2:1,o=[];o.push(e.id),t.axios.post("/proxy/report-business/booking/v2/api/title/update/"+a,o).then(function(a){if(a.data&&200==a.data.code){var o=1==e.status?"下架成功":"上架成功";t.$message.success(o),t.getList()}else t.$message.error(a.data.msg)}).catch(function(e){console.log(e)})},handleSelectionChange:function(e){this.multipleSelection=e},removeitem:function(){var e=this,t=!1,a=[];0!==e.multipleSelection.length?(e.multipleSelection.forEach(function(o){if(1===o.status)return e.$message.error("上架的试题不能删除，请重新选择！"),void(t=!0);a.push(o.id)}),t||e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.post("/proxy/report-business/booking/v2/api/title/update/0",a).then(function(t){t.data&&200==t.data.code?(e.$message.success("删除成功"),e.getList()):e.$message.error("删除失败")}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除")})):e.$message.error("请选择要删除的试题！")},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getList()}}},Yo={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper goods-list-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/examPaperPanel"}}},[e._v("试题管理主页")]),e._v(" "),a("el-breadcrumb-item",[e._v("试题管理")])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container"},[a("div",{staticClass:"container-head clearfix"},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:2}},[a("span",{staticClass:"new-primary-button",on:{click:e.removeitem}},[e._v("删除")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("router-link",{attrs:{to:"/examPaperEdit"}},[a("span",{staticClass:"new-primary-button"},[e._v("新建")])])],1),e._v(" "),a("el-col",{staticClass:"right",attrs:{span:8}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"选择搜索类型"},on:{change:e.setNull},model:{value:e.searchForm.searchType,callback:function(t){e.$set(e.searchForm,"searchType",t)},expression:"searchForm.searchType"}},[a("el-option",{attrs:{label:"试题号",value:"code"}}),e._v(" "),a("el-option",{attrs:{label:"图书名称",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"阅读类型",value:"readType"}}),e._v(" "),a("el-option",{attrs:{label:"试题类型",value:"titleType"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},["readType"==e.searchForm.searchType?a("el-select",{on:{change:function(t){e.getList()}},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search",t)},expression:"searchForm.search"}},e._l(e.readTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):e._e(),e._v(" "),"titleType"==e.searchForm.searchType?a("el-select",{on:{change:function(t){e.getList()}},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search",t)},expression:"searchForm.search"}},e._l(e.titleTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):e._e(),e._v(" "),"code"==e.searchForm.searchType?a("el-input",{attrs:{placeholder:"请输入关键字搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getList()}},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search","string"==typeof t?t.trim():t)},expression:"searchForm.search"}}):e._e(),e._v(" "),"bookName"==e.searchForm.searchType?a("el-input",{attrs:{placeholder:"请输入关键字搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getList()}},model:{value:e.searchForm.search,callback:function(t){e.$set(e.searchForm,"search","string"==typeof t?t.trim():t)},expression:"searchForm.search"}}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticStyle:{"margin-top":"15px",padding:"8px 10px",height:"30px"},attrs:{icon:"el-icon-search"},on:{click:function(t){e.getList()}}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"b-container-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"试题号",prop:"code",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"题目内容",prop:"context",width:"210"}}),e._v(" "),a("el-table-column",{attrs:{label:"试题难度",prop:"degree",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-rate",{attrs:{disabled:""},model:{value:t.row.degree,callback:function(a){e.$set(t.row,"degree",a)},expression:"scope.row.degree"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"阅读类型",prop:"readType",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("readType")(t.row.readType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"试题类型",prop:"titleType",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("titleType")(t.row.titleType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"关联图书",prop:"bookName",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"status",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(1==t.row.status?"上架":"下架"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"绑定教师",prop:"teacherName",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"scope.row",staticStyle:{"margin-right":"10px"},attrs:{effect:"dark",content:"修改试题",placement:"top"}},[2==t.row.status?a("span",{staticClass:"goods-operation-icon el-icon-edit-outline",on:{click:function(a){e.editPaper(t.row)}}}):a("span",{staticClass:"goods-operation-icon el-icon-edit-outline i-disabled",on:{click:function(a){e.alertmsg1(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"scope.row",staticStyle:{"margin-right":"10px"},attrs:{effect:"dark",content:1==t.row.status?"下架":"上架",placement:"top"}},[2==t.row.status&&""==t.row.itemList?a("span",{staticClass:"goods-operation-icon i-disabled",class:[1==t.row.status?"off-shelf":" on-shelf"],on:{click:function(a){e.alertmsg(t.row)}}}):e._e(),e._v(" "),a("span",{staticClass:"goods-operation-icon",class:[1==t.row.status?"off-shelf":" on-shelf"],on:{click:function(a){e.changeStatus(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"scope.row",attrs:{effect:"dark",content:"管理答案",placement:"top"}},[a("span",{staticClass:"i-manage",on:{click:function(a){e.editAnswer(t.row)}}})])]}}])})],1),e._v(" "),a("div",[e.tableData&&e.tableData.length>0?a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pageInfo.currPage,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var Jo=a("VU/8")(Qo,Yo,!1,function(e){a("BVMP")},null,null).exports,Ko={name:"examPaperEdit",components:{bFooter:h.a,bHeader:g.a},mounted:function(){this.form.readOnly=this.$store.nodereadonly,this.$store.nodereadonly=!1,this.$store.nodeId&&(this.form=JSON.parse(sessionStorage.getItem("timu")),this.isNew=!1,this.form.readOnly?this.titles="查看试题":this.titles="编辑试题",this.$store.nodeId=!1),this.list=this.states.map(function(e){return{value:e,label:e}})},methods:{changeRead:function(){this.form.bookName=""},bookChange:function(e){this.form.bookId=e.id,this.form.bookName=e.bookName},userChange:function(e){this.form.teacherId=e.id,this.form.teacherName=e.userName},addTeacher:function(e){if(e&&0!=e.trim().length){var t=this;this.loading=!0,t.axios.get("/proxy/report-business/booking/v2/api/title/queryUser"+(e?"?keywords="+e:"")).then(function(e){t.loading=!1,e&&e.data&&e.data.data?t.teacheroptions=e.data.data.length?e.data.data:[]:e&&e.data&&0==e.data.data.length&&(t.teacheroptions=[])}).catch(function(e){console.log(e)})}},addBook:function(e){if(e&&0!=e.trim().length){var t=this;this.loading=!0,t.axios.get("/proxy/report-business/booking/v2/api/title/queryBook?readType="+this.form.readType+(e?"&keywords="+e:"")).then(function(e){t.loading=!1,e&&e.data&&e.data.data?t.bookoptions=e.data.data.length?e.data.data:[]:e&&e.data&&0==e.data.data.length&&(t.bookoptions=[])}).catch(function(e){console.log(e)})}},onSubmit:function(){var e=this,t=this;this.$refs.form.validate(function(a){a&&(e.isNew?(""==e.form.teacherName?t.$message.success("新建公共试题成功"):t.$message.success("新建导师试题成功"),t.submits()):(""!=e.form.teacherName&&e.form.teacherName?t.$message.success("编辑导师试题成功"):t.$message.success("编辑公共试题成功"),t.submits()))})},submits:function(){var e=this;delete this.form.itemList,this.axios.post("/proxy/report-business/booking/v2/api/title/saveOrupdate",this.form).then(function(t){e.$router.push({name:"examPaperList"})}).catch(function(e){console.log(e)})}},data:function(){return{isNew:!0,titles:"新建试题",readTypeList:[{label:"经典阅读",value:1},{label:"双语阅读",value:2},{label:"科普阅读",value:3},{label:"绘本阅读",value:4}],titleTypeList:[{label:"单项选择题",value:1},{label:"多项选择题",value:2}],dimensionList:[{label:"记忆维度",value:1},{label:"理解维度",value:2},{label:"运用维度",value:3},{label:"拓展维度",value:4}],form:{teacherName:"",context:"",readType:"",titleType:1,degree:"",dimension:"",bookName:""},teacheroptions:[],bookoptions:[],list:[],loading:!1,states:[],rules:{context:[{required:!0,message:"请输入题目内容",trigger:"blur"},{min:2,max:200,message:"长度在 2 到 200 个字符",trigger:"blur"}],readType:[{required:!0,message:"请选择阅读类型",trigger:"blur"}],titleType:[{required:!0,message:"请选择试题类型",trigger:"blur"}],degree:[{type:"number",min:1,required:!0,message:"请选择试题难度",trigger:"blur"}],dimension:[{required:!0,message:"请选择试题维度",trigger:"blur"}],bookName:[{required:!0,message:"请搜索输入图书名称",trigger:"blur"}]}}}},Xo={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper  add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/examPaperPanel"}}},[e._v("试题管理主页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/examPaperList"}}},[e._v("试题管理")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(this.titles))])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("div",{staticClass:"b-container-table"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"关联教师账号",prop:"teacherName"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不关联为公共试题",placement:"right"}},[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"search_area"},[a("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请输入教师名字或账号进行搜索","remote-method":e.addTeacher,loading:e.loading,disabled:e.form.readOnly},on:{change:e.userChange},model:{value:e.form.teacherName,callback:function(t){e.$set(e.form,"teacherName",t)},expression:"form.teacherName"}},e._l(e.teacheroptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.userName,value:t}},[a("span",{staticStyle:{float:"left","min-width":"100px"}},[e._v(e._s(t.userName))]),e._v(" "),a("span",{staticStyle:{float:"left",color:"#999"}},[e._v(e._s(t.schoolInfoName))])])}))],1)])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"题目内容",prop:"context"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{type:"textarea",rows:4,disabled:e.form.readOnly},model:{value:e.form.context,callback:function(t){e.$set(e.form,"context","string"==typeof t?t.trim():t)},expression:"form.context"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"阅读类型",prop:"readType"}},[a("el-col",{attrs:{span:14}},[a("el-select",{attrs:{disabled:e.form.readOnly},on:{change:e.changeRead},model:{value:e.form.readType,callback:function(t){e.$set(e.form,"readType",t)},expression:"form.readType"}},e._l(e.readTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"试题类型",prop:"titleType"}},[a("el-col",{attrs:{span:14}},[a("el-select",{attrs:{disabled:e.form.readOnly},model:{value:e.form.titleType,callback:function(t){e.$set(e.form,"titleType",t)},expression:"form.titleType"}},e._l(e.titleTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"试题难度",prop:"degree"}},[a("el-col",{attrs:{span:14}},[a("el-rate",{attrs:{disabled:e.form.readOnly},model:{value:e.form.degree,callback:function(t){e.$set(e.form,"degree",t)},expression:"form.degree"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"试题维度",prop:"dimension"}},[a("el-col",{attrs:{span:14}},[a("el-select",{attrs:{disabled:e.form.readOnly},model:{value:e.form.dimension,callback:function(t){e.$set(e.form,"dimension",t)},expression:"form.dimension"}},e._l(e.dimensionList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联图书",prop:"bookName"}},[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"search_area"},[a("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请输入图书名字进行搜索","remote-method":e.addBook,loading:e.loading,disabled:e.form.readOnly},on:{change:e.bookChange},model:{value:e.form.bookName,callback:function(t){e.$set(e.form,"bookName",t)},expression:"form.bookName"}},e._l(e.bookoptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.bookName,value:t}},[a("span",{staticStyle:{float:"left","margin-right":"40px",width:"140px"}},[e._v(e._s(t.bookName))]),e._v(" "),a("span",{staticStyle:{float:"left",color:"#999"}},[e._v(e._s(t.author))])])}))],1)])],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("router-link",{attrs:{to:"/examPaperList"}},[a("span",{staticClass:"new-plain-button mr30"},[e._v("取消")])]),e._v(" "),this.form.readOnly?e._e():a("span",{staticClass:"new-primary-button",on:{click:e.onSubmit,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.onSubmit(t):null}}},[e._v("保存")])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var Zo=a("VU/8")(Ko,Xo,!1,function(e){a("5WOQ")},null,null).exports,es={name:"examAnswerEdit",components:{bFooter:h.a,bHeader:g.a},mounted:function(){if(this.form.readOnly=this.$store.nodereadonly,this.$store.nodereadonly=!1,this.$store.nodeId){var e=this;this.isNew=!1,this.form.readOnly?this.titles="查看测评规则":this.titles="管理答案";var t=JSON.parse(sessionStorage.getItem("timu"));t.itemList&&t.itemList.length>0&&_.each(t.itemList,function(e){e.checked=!1}),this.form=t,this.form.itemList&&0!=this.form.itemList.length||(this.form.itemList=[{id:1,itemText:"",checked:!1},{id:2,itemText:"",checked:!1},{id:3,itemText:"",checked:!1},{id:4,itemText:"",checked:!1}]),this.form.answer&&this.form.answer.length>0&&_.each(this.form.answer,function(t){_.findWhere(e.form.itemList,{id:t})&&(_.findWhere(e.form.itemList,{id:t}).checked=!0)}),this.$store.nodeId=!1}},methods:{onSubmit:function(){var e=this,t=!0,a=void 0;_.each(this.form.itemList,function(e){if(!e.itemText.trim()||e.itemText.trim().length>100)return t=!1,void(a=e.itemText.trim()?"备选答案不超过100字符！":"请输入备选答案！")}),t?this.$refs.form.validate(function(t){t?e.submits():e.$message.error("请检查数据")}):e.$message.error(a)},submits:function(){var e=this;this.form.answer=_.compact(_.map(this.form.itemList,function(e){return e.checked?e.id:null})),this.form.answer&&0!=this.form.answer.length?this.isNew?this.axios.post("/proxy/report-business/booking/v2/api/title/saveOrupdate",this.form).then(function(t){e.$router.push({name:"examPaperList"})}).catch(function(e){console.log(e)}):this.axios.post("/proxy/report-business/booking/v2/api/title/saveOrupdate",this.form).then(function(t){500==t.data.code&&e.$message.error(t.data.msg),e.$router.push({name:"examPaperList"})}).catch(function(e){console.log(e)}):e.$message.error("请选择正确答案！")},removeOp:function(e){if(this.form.itemList.length>4){this.form.itemList.splice(_.findIndex(this.form.itemList,e),1);for(var t=0;t<this.form.itemList.length;t++)this.form.itemList[t].id=t+1}else this.$message.error("至少留四个")},addOp:function(e){if(!(this.form.itemList.length>10)){this.form.itemList.push({itemText:""});for(var t=0;t<this.form.itemList.length;t++)this.form.itemList[t].id=t+1}},chooseExam:function(e,t){var a=this;2==this.form.titleType?this.$set(e,"checked",!e.checked):(t.forEach(function(e){a.$set(e,"checked",!1)}),this.$set(e,"checked",!0))}},data:function(){return{isNew:!0,options:[],titles:"管理答案",form:{itemList:[]},rules:{itemList:[{itemText:[{min:1,max:10,message:"长度在 1 到 10个字符",trigger:"blur"}]}]}}}},ts={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg b-new-wrapper  add-goods-wrapper"},[a("bHeader"),e._v(" "),a("div",{staticClass:"container mb30"},[a("div",{staticClass:"b-page-breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/examPaperPanel"}}},[e._v("试题管理主页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/examPaperList"}}},[e._v("试题管理")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(this.titles))])],1)],1),e._v(" "),a("div",{staticClass:"b-page-container add-goods-container"},[a("div",{staticClass:"b-container-table"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"题目内容"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{type:"textarea",disabled:!0},model:{value:e.form.context,callback:function(t){e.$set(e.form,"context","string"==typeof t?t.trim():t)},expression:"form.context"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"试题号"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code","string"==typeof t?t.trim():t)},expression:"form.code"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"试题难度",prop:"degree"}},[a("el-col",{attrs:{span:14}},[a("el-rate",{attrs:{disabled:!0},model:{value:e.form.degree,callback:function(t){e.$set(e.form,"degree",t)},expression:"form.degree"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联图书"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{type:"textarea",disabled:!0},model:{value:e.form.bookName,callback:function(t){e.$set(e.form,"bookName","string"==typeof t?t.trim():t)},expression:"form.bookName"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"label-lg",attrs:{"label-width":"100%;",label:"请添加备选答案(至少要添加四个备选答案，其中包含一个正确答案)",prop:"items"}},[a("span",{staticClass:"required"},[e._v("*")]),e._v(" "),a("el-col",{staticStyle:{"margin-left":"80px"},attrs:{span:24}},[e._l(e.form.itemList,function(t){return a("el-col",{key:t.id},[e.form.readOnly?e._e():a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"不超过十个选项，最少四个!",placement:"right"}}),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:1}},[a("div",{staticClass:"exam_question"},[a("span",{staticClass:"exmam_checkbox"},[a("input",{staticClass:"exam_input",attrs:{type:"radio",name:t.id},domProps:{value:t.id},on:{click:function(a){e.chooseExam(t,e.form.itemList)}}}),e._v(" "),a("span",{class:{examchecked:t.checked,exam_checkbox_bg:!t.checked},on:{click:function(a){e.chooseExam(t,e.form.itemList)}}})])])]),e._v(" "),a("el-col",{attrs:{span:1}},[a("el-input",{attrs:{disabled:!0},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"op.id"}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:t.itemText,callback:function(a){e.$set(t,"itemText",a)},expression:"op.itemText"}})],1),e._v(" "),a("el-col",{attrs:{span:3,offset:"1"}},[e.form.readOnly?e._e():a("span",{staticClass:"i-minus",attrs:{disabled:e.form.readOnly},on:{click:function(a){a.preventDefault(),e.removeOp(t)}}})])],1)],1)}),e._v(" "),e.form.readOnly?e._e():a("span",{staticClass:"i-add",attrs:{disabled:e.form.readOnly},on:{click:function(t){t.preventDefault(),e.addOp()}}})],2)],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("router-link",{attrs:{to:"/examPaperList"}},[a("span",{staticClass:"new-plain-button mr30"},[e._v("关闭")])]),e._v(" "),this.form.readOnly?e._e():a("span",{staticClass:"new-primary-button",on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)])]),e._v(" "),a("bFooter")],1)},staticRenderFns:[]};var as=a("VU/8")(es,ts,!1,function(e){a("dqxZ")},"data-v-057dd8e9",null).exports,os={name:"thirdPartyPanel",data:function(){return{ax:[],applicationCount:0,applicationOpenCount:0,interfaceCount:0,interfaceOpenCount:0}},components:{bHeader:g.a,bFooter:h.a},created:function(){this.ax=_.pluck(JSON.parse(sessionStorage.getItem("ax")),"url")},mounted:function(){this.getInfo()},methods:{axs:function(e){return!!sessionStorage.getItem("isad")||this.ax.includes(e)},getInfo:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/application/getPanelInfo").then(function(t){if(t.data&&200==t.data.code){var a=t.data.data;e.applicationCount=a.applicationCount,e.applicationOpenCount=a.applicationOpenCount,e.interfaceCount=a.interfaceCount,e.interfaceOpenCount=a.interfaceOpenCount}}).catch(function(e){console.log(e)})}}},ss={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("第三方应用管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"item_box"},[e.axs("xxgl.znxx")?a("div",{staticClass:"item col_green"},[a("h1",[e._v("应用管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.applicationCount))]),e._v(" "),a("p",[e._v("第三方应用数量")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.applicationOpenCount))]),e._v(" "),a("p",[e._v("已启用应用数量")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/applicationlist"}})],1):e._e(),e._v(" "),e.axs("xxgl.znxx")?a("div",{staticClass:"item col_green"},[a("h1",[e._v("调用管理")]),e._v(" "),a("div",{staticClass:"mid"},[a("span",{staticClass:"mid_icon i_msg"}),e._v(" "),a("div",{staticClass:"mid_list fl"},[a("div",{staticClass:"list mgb20"},[a("span",[e._v(e._s(e.interfaceCount))]),e._v(" "),a("p",[e._v("接口调用数量")])]),e._v(" "),a("div",{staticClass:"list"},[a("span",[e._v(e._s(e.interfaceOpenCount))]),e._v(" "),a("p",[e._v("已启用接口数量")])])])]),e._v(" "),a("a",{attrs:{href:"#"}}),e._v(" "),a("router-link",{attrs:{to:"/openapilist"}})],1):e._e()])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[]};var is=a("VU/8")(os,ss,!1,function(e){a("c4U4")},null,null).exports,rs=a("AQq2"),ns={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/thirdparty"}},[e._v("第三方应用管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("应用管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search"},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"check_all_item dib",staticStyle:{top:"0","margin-right":"10px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"check_box_all",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{click:e.checkedAll,change:function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s}}}),a("span",[e._v("全选")])]),e._v(" "),a("div",{staticClass:"dib"},[a("button",{staticClass:"sx_btn_orange",on:{click:e.batchDelete}},[e._v("删除应用")]),e._v(" "),a("button",{staticClass:"sx_btn_orange ml5",on:{click:e.createService}},[e._v("新建应用")])])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"请输入名称进行搜索"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name","string"==typeof t?t.trim():t)},expression:"query.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[2!==t.row.newsStatus?a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"sx_input_b",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}}):a("input",{staticClass:"sx_input_b",attrs:{type:"checkbox",disabled:""},domProps:{value:t.row.id}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"applicationName",label:"应用名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"client_id",label:"CLIENT-ID",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"注册邮箱",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{label:"注册时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.hasuse?"使用中":"停止使用"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.viewService(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.editService(t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible,"before-close":e.serviceFormExit},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"serviceForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth,prop:"applicationName"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"",maxlength:e.formLength.applicationName},model:{value:e.form.applicationName,callback:function(t){e.$set(e.form,"applicationName","string"==typeof t?t.trim():t)},expression:"form.applicationName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"email","label-width":e.formLabelWidth,prop:"email"}},[a("el-input",{class:[e.validEmail?"valid-error":""],attrs:{"auto-complete":"off",placeholder:"",maxlength:e.formLength.email},on:{blur:e.checkEmail},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"==typeof t?t.trim():t)},expression:"form.email"}}),e._v(" "),e.validEmail?a("div",{staticClass:"el-form-item__error"},[e._v("邮箱已注册!")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"有效期","label-width":e.formLabelWidth,prop:"effectiveType"}},[a("el-select",{attrs:{placeholder:"请选择有效期类型"},model:{value:e.form.effectiveType,callback:function(t){e.$set(e.form,"effectiveType",t)},expression:"form.effectiveType"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"回调地址","label-width":e.formLabelWidth,prop:"callbackAddress"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入回调地址",maxlength:e.formLength.callbackAddress},model:{value:e.form.callbackAddress,callback:function(t){e.$set(e.form,"callbackAddress","string"==typeof t?t.trim():t)},expression:"form.callbackAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否启用","label-width":e.formLabelWidth,prop:"hasuse"}},[a("el-radio-group",{model:{value:e.form.hasuse,callback:function(t){e.$set(e.form,"hasuse",t)},expression:"form.hasuse"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"应用图标","label-width":e.formLabelWidth}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.actionUrl,headers:e.header,"on-success":e.handleAvatarSuccess,"on-error":e.handlerError,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,limit:1,"list-type":"picture-card","before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"应用说明","label-width":e.formLabelWidth,prop:"describes"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容，200字符以内",maxlength:e.formLength.describes},model:{value:e.form.describes,callback:function(t){e.$set(e.form,"describes",t)},expression:"form.describes"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.serviceFormExit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveHandle}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"应用详情",visible:e.dialogDetailVisible,width:"40%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogDetailVisible=t}}},[a("div",{staticClass:"detail_dialog"},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("名称")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.detailData.thirdPartApplication.applicationName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("email")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.detailData.thirdPartApplication.email))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("有效期")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[1==e.detailData.thirdPartApplication.effectiveType?a("div",{},[e._v("三个月")]):e._e(),e._v(" "),2==e.detailData.thirdPartApplication.effectiveType?a("div",{},[e._v("半年")]):e._e(),e._v(" "),3==e.detailData.thirdPartApplication.effectiveType?a("div",{},[e._v("一年")]):e._e(),e._v(" "),4==e.detailData.thirdPartApplication.effectiveType?a("div",{},[e._v("两年")]):e._e(),e._v(" "),5==e.detailData.thirdPartApplication.effectiveType?a("div",{},[e._v("三年")]):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("回调地址")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.detailData.thirdPartApplication.callbackAddress))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("是否启用")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},["1"==e.detailData.thirdPartApplication.hasuse?a("div",{},[e._v("是")]):e._e(),e._v(" "),"0"==e.detailData.thirdPartApplication.hasuse?a("div",{},[e._v("否")]):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("应用图标")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},e._l(e.detailData.images,function(e){return a("a",{attrs:{href:"javascript:void(0)"}},[a("img",{staticClass:"app_icon_shot",attrs:{src:e.url,alt:""}})])}))])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("应用说明")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.detailData.thirdPartApplication.describes?e.detailData.thirdPartApplication.describes:"----"))])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogDetailVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var ls=function(e){a("aSjl")},cs=a("VU/8")(rs.a,ns,!1,ls,null,null).exports,ds=a("3k9V"),us={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/thirdparty"}},[e._v("第三方应用管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("调用管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"sx_tab ",staticStyle:{"margin-bottom":"10px"}},[a("router-link",{attrs:{to:"/openapilist"}},[a("div",{staticClass:"sx_tab_item active"},[e._v("\n                        接口视角\n                    ")])]),e._v(" "),a("router-link",{attrs:{to:"/applicationapilist"}},[a("div",{staticClass:"sx_tab_item"},[e._v("\n                        应用视角\n                    ")])])],1),e._v(" "),a("div",{staticClass:"page_search"},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"check_all_item dib",staticStyle:{top:"0","margin-right":"10px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"check_box_all",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{click:e.checkedAll,change:function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s}}}),a("span",[e._v("全选")])]),e._v(" "),a("div",{staticClass:"dib"},[a("button",{staticClass:"sx_btn_orange",on:{click:e.batchDelete}},[e._v("删除接口")]),e._v(" "),a("button",{staticClass:"sx_btn_orange ml5",on:{click:e.createService}},[e._v("新建接口")])])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"请输入接口名称进行搜索"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name","string"==typeof t?t.trim():t)},expression:"query.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[2!==t.row.deletable?a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"sx_input_b",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}}):a("input",{staticClass:"sx_input_b",attrs:{type:"checkbox",disabled:""},domProps:{value:t.row.id}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"interfaceName",label:"接口名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"interfaceURL",label:"URL",width:"520"}}),e._v(" "),a("el-table-column",{attrs:{prop:"requestMethod",label:"请求方法",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.interfaceStatus?a("span",[e._v("关闭")]):e._e(),e._v(" "),1==t.row.interfaceStatus?a("span",[e._v("开放")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.viewService(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.editService(t.row)}}},[e._v("编辑")]),e._v(" "),1==t.row.interfaceStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.changeInterfaceStatus(t.row.id,0)}}},[e._v("关闭")]):e._e(),e._v(" "),0==t.row.interfaceStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.changeInterfaceStatus(t.row.id,1)}}},[e._v("开放")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible,"before-close":e.serviceFormExit},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"serviceForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"接口名称","label-width":e.formLabelWidth,prop:"interfaceName"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"",maxlength:e.formLength.interfaceName},model:{value:e.form.interfaceName,callback:function(t){e.$set(e.form,"interfaceName","string"==typeof t?t.trim():t)},expression:"form.interfaceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"URL","label-width":e.formLabelWidth,prop:"interfaceURL"}},[a("el-input",{class:[e.validUrl?"valid-error":""],attrs:{"auto-complete":"off",placeholder:"请输入URL",maxlength:e.formLength.interfaceURL},on:{blur:e.checkUrl},model:{value:e.form.interfaceURL,callback:function(t){e.$set(e.form,"interfaceURL","string"==typeof t?t.trim():t)},expression:"form.interfaceURL"}}),e._v(" "),e.validUrl?a("div",{staticClass:"el-form-item__error"},[e._v("该URL已存在!")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"请求方法","label-width":e.formLabelWidth,prop:"requestMethod"}},[a("el-select",{attrs:{placeholder:"选择"},model:{value:e.form.requestMethod,callback:function(t){e.$set(e.form,"requestMethod",t)},expression:"form.requestMethod"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth,prop:"interfaceStatus"}},[a("el-radio-group",{model:{value:e.form.interfaceStatus,callback:function(t){e.$set(e.form,"interfaceStatus",t)},expression:"form.interfaceStatus"}},[a("el-radio",{attrs:{label:1}},[e._v("开放")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("关闭")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.serviceFormExit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveHandle}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"服务详情",visible:e.dialogDetailVisible,width:"40%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogDetailVisible=t}}},[a("div",{staticClass:"detail_dialog"},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("接口名称")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.detailData.interfaceName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("URL")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.detailData.interfaceURL))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("请求方法")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},["POST"==e.detailData.requestMethod?a("div",{},[e._v("POST")]):e._e(),e._v(" "),"GET"==e.detailData.requestMethod?a("div",{},[e._v("GET")]):e._e(),e._v(" "),"PUT"==e.detailData.requestMethod?a("div",{},[e._v("PUT")]):e._e(),e._v(" "),"DELETE"==e.detailData.requestMethod?a("div",{},[e._v("DELETE")]):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("状态")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},["1"==e.detailData.interfaceStatus?a("div",{},[e._v("开放")]):e._e(),e._v(" "),"0"==e.detailData.interfaceStatus?a("div",{},[e._v("关闭")]):e._e()])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogDetailVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var ps=function(e){a("H3RX")},ms=a("VU/8")(ds.a,us,!1,ps,null,null).exports,vs=a("rkM4"),fs={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/thirdparty"}},[e._v("第三方应用管理")]),e._v(" > "),a("router-link",{attrs:{to:"/openapilist"}},[e._v("调用管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("接口视角")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search"},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"check_all_item dib",staticStyle:{top:"0","margin-right":"10px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"check_box_all",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{click:e.checkedAll,change:function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s}}}),a("span",[e._v("全选")])]),e._v(" "),a("div",{staticClass:"dib"},[a("button",{staticClass:"sx_btn_orange",on:{click:e.batchDelete}},[e._v("删除应用")]),e._v(" "),a("button",{staticClass:"sx_btn_orange ml5",on:{click:e.createService}},[e._v("新建应用")])])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"应用名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name","string"==typeof t?t.trim():t)},expression:"query.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"sx_input_b",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"applicationName",label:"应用名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"interfaceName",label:"接口名称",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"maxCount",label:"限制次数",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"限制时间单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.effectiveType?a("span",[e._v("关闭")]):e._e(),e._v(" "),1==t.row.effectiveType?a("span",[e._v("开放")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"currentCount",label:"当前剩余",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.interfaceStatus?a("span",[e._v("关闭")]):e._e(),e._v(" "),1==t.row.interfaceStatus?a("span",[e._v("开放")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.viewService(t.row)}}},[e._v("查看")]),e._v(" "),1==t.row.interfaceStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.changeInterfaceStatus(t.row.id,0)}}},[e._v("关闭")]):e._e(),e._v(" "),0==t.row.interfaceStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.changeInterfaceStatus(t.row.id,1)}}},[e._v("开放")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible,"before-close":e.serviceFormExit},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"serviceForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"应用名称","label-width":e.formLabelWidth,prop:"applicationName"}},[a("el-autocomplete",{class:[e.validName?"valid-error":""],attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入内容","suffix-icon":"el-icon-search"},on:{select:e.handleSelect,blur:e.checkName},model:{value:e.form.applicationName,callback:function(t){e.$set(e.form,"applicationName",t)},expression:"form.applicationName"}}),e._v(" "),e.validName?a("div",{staticClass:"el-form-item__error"},[e._v("该应用名称已存在!")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"限制次数","label-width":e.formLabelWidth,prop:"maxCount"}},[a("el-input",{staticClass:"max_count_input",attrs:{"auto-complete":"off",placeholder:"请输入限制次数",maxlength:e.formLength.maxCount},on:{blur:e.formatInputNumber,keyup:e.formatInputNumber},model:{value:e.form.maxCount,callback:function(t){e.$set(e.form,"maxCount","string"==typeof t?t.trim():t)},expression:"form.maxCount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"限制时间单位","label-width":e.formLabelWidth,prop:"effectiveType"}},[a("el-select",{attrs:{placeholder:"选择"},model:{value:e.form.effectiveType,callback:function(t){e.$set(e.form,"effectiveType",t)},expression:"form.effectiveType"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth,prop:"interfaceStatus"}},[a("el-radio-group",{model:{value:e.form.interfaceStatus,callback:function(t){e.$set(e.form,"interfaceStatus",t)},expression:"form.interfaceStatus"}},[a("el-radio",{attrs:{label:1}},[e._v("开放")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("关闭")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.serviceFormExit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveHandle}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"应用详情",visible:e.dialogDetailVisible,width:"40%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogDetailVisible=t}}},[a("div",{staticClass:"detail_dialog"},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("应用名称")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.detailData.applicationName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("限制次数")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.detailData.maxCount))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("限制时间单位")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[1==e.detailData.effectiveType?a("div",{},[e._v("年")]):e._e(),e._v(" "),2==e.detailData.effectiveType?a("div",{},[e._v("月")]):e._e(),e._v(" "),3==e.detailData.effectiveType?a("div",{},[e._v("日")]):e._e(),e._v(" "),4==e.detailData.effectiveType?a("div",{},[e._v("天")]):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("状态")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},["1"==e.detailData.interfaceStatus?a("div",{},[e._v("开放")]):e._e(),e._v(" "),"0"==e.detailData.interfaceStatus?a("div",{},[e._v("关闭")]):e._e()])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogDetailVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var hs=function(e){a("RfEj")},gs=a("VU/8")(vs.a,fs,!1,hs,null,null).exports,_s=a("Sc+K"),bs={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/thirdparty"}},[e._v("第三方应用管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("调用管理")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"sx_tab ",staticStyle:{"margin-bottom":"10px"}},[a("router-link",{attrs:{to:"/openapilist"}},[a("div",{staticClass:"sx_tab_item "},[e._v("\n                        接口视角\n                    ")])]),e._v(" "),a("router-link",{attrs:{to:"/applicationapilist"}},[a("div",{staticClass:"sx_tab_item active"},[e._v("\n                        应用视角\n                    ")])])],1),e._v(" "),a("div",{staticClass:"page_search"},[a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"请输入应用名称进行搜索"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name","string"==typeof t?t.trim():t)},expression:"query.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[2!==t.row.newsStatus?a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"sx_input_b",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}}):a("input",{staticClass:"sx_input_b",attrs:{type:"checkbox",disabled:""},domProps:{value:t.row.id}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"applicationName",label:"应用名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"client_id",label:"CLIENT-ID",width:"320"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"注册邮箱",width:"320"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.hasuse?a("span",[e._v("停止使用")]):e._e(),e._v(" "),1==t.row.hasuse?a("span",[e._v("使用中")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.viewService(t.row)}}},[e._v("查看")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer")],1)},staticRenderFns:[]};var ks=function(e){a("i9lA")},ys=a("VU/8")(_s.a,bs,!1,ks,null,null).exports,xs=a("wqG9"),Cs={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper bg"},[a("b-header"),e._v(" "),a("div",{staticClass:"container mgb0",attrs:{id:"container_1"}},[a("div",{staticClass:"menu_bar"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),e._v(" > "),a("router-link",{attrs:{to:"/thirdparty"}},[e._v("第三方应用管理")]),e._v(" > "),a("router-link",{attrs:{to:"/applicationapilist"}},[e._v("调用管理")]),e._v(" > "),a("a",{attrs:{href:"javascript:void(0);"}},[e._v("应用视角")]),e._v(" "),a("hr")],1),e._v(" "),a("div",{staticClass:"page_container"},[a("div",{staticClass:"page_search"},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"check_all_item dib",staticStyle:{top:"0","margin-right":"10px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],staticClass:"check_box_all",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{click:e.checkedAll,change:function(t){var a=e.isCheckedAll,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.isCheckedAll=a.concat([null])):i>-1&&(e.isCheckedAll=a.slice(0,i).concat(a.slice(i+1)))}else e.isCheckedAll=s}}}),a("span",[e._v("全选")])]),e._v(" "),a("div",{staticClass:"dib"},[a("button",{staticClass:"sx_btn_orange",on:{click:e.batchDelete}},[e._v("删除接口")]),e._v(" "),a("button",{staticClass:"sx_btn_orange ml5",on:{click:e.createService}},[e._v("新建接口")])])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"title_search",attrs:{placeholder:"接口名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInfo(t):null}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name","string"==typeof t?t.trim():t)},expression:"query.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchInfo},slot:"suffix"})])],1)],1),e._v(" "),a("div",{staticClass:"page_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxModel,expression:"checkboxModel"}],staticClass:"sx_input_b",attrs:{type:"checkbox"},domProps:{value:t.row.id,checked:Array.isArray(e.checkboxModel)?e._i(e.checkboxModel,t.row.id)>-1:e.checkboxModel},on:{change:function(a){var o=e.checkboxModel,s=a.target,i=!!s.checked;if(Array.isArray(o)){var r=t.row.id,n=e._i(o,r);s.checked?n<0&&(e.checkboxModel=o.concat([r])):n>-1&&(e.checkboxModel=o.slice(0,n).concat(o.slice(n+1)))}else e.checkboxModel=i}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"interfaceName",label:"接口名称",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applicationName",label:"应用名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"maxCount",label:"限制次数",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"限制时间单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.effectiveType?a("span",[e._v("关闭")]):e._e(),e._v(" "),1==t.row.effectiveType?a("span",[e._v("开放")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"currentCount",label:"当前剩余",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.interfaceStatus?a("span",[e._v("关闭")]):e._e(),e._v(" "),1==t.row.interfaceStatus?a("span",[e._v("开放")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.viewService(t.row)}}},[e._v("查看")]),e._v(" "),1==t.row.interfaceStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.changeInterfaceStatus(t.row.id,0)}}},[e._v("关闭")]):e._e(),e._v(" "),0==t.row.interfaceStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.changeInterfaceStatus(t.row.id,1)}}},[e._v("开放")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page_pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"clearfix"})])]),e._v(" "),a("b-footer"),e._v(" "),a("el-dialog",{attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible,"before-close":e.serviceFormExit},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"serviceForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"接口名称","label-width":e.formLabelWidth,prop:"interfaceName"}},[a("el-autocomplete",{class:[e.validName?"valid-error":""],attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入内容","suffix-icon":"el-icon-search"},on:{select:e.handleSelect,blur:e.checkName},model:{value:e.form.interfaceName,callback:function(t){e.$set(e.form,"interfaceName",t)},expression:"form.interfaceName"}}),e._v(" "),e.validName?a("div",{staticClass:"el-form-item__error"},[e._v("该接口名称已存在!")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"限制次数","label-width":e.formLabelWidth,prop:"maxCount"}},[a("el-input",{staticClass:"max_count_input",attrs:{"auto-complete":"off",placeholder:"请输入限制次数",maxlength:e.formLength.maxCount},on:{blur:e.formatInputNumber,keyup:e.formatInputNumber},model:{value:e.form.maxCount,callback:function(t){e.$set(e.form,"maxCount","string"==typeof t?t.trim():t)},expression:"form.maxCount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"限制时间单位","label-width":e.formLabelWidth,prop:"effectiveType"}},[a("el-select",{attrs:{placeholder:"选择"},model:{value:e.form.effectiveType,callback:function(t){e.$set(e.form,"effectiveType",t)},expression:"form.effectiveType"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth,prop:"interfaceStatus"}},[a("el-radio-group",{model:{value:e.form.interfaceStatus,callback:function(t){e.$set(e.form,"interfaceStatus",t)},expression:"form.interfaceStatus"}},[a("el-radio",{attrs:{label:1}},[e._v("开放")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("关闭")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.serviceFormExit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveHandle}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"接口详情",visible:e.dialogDetailVisible,width:"40%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogDetailVisible=t}}},[a("div",{staticClass:"detail_dialog"},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("接口名称")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.detailData.interfaceName))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("限制次数")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[a("div",{},[e._v(e._s(e.detailData.maxCount))])])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("限制时间单位")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},[1==e.detailData.effectiveType?a("div",{},[e._v("年")]):e._e(),e._v(" "),2==e.detailData.effectiveType?a("div",{},[e._v("季")]):e._e(),e._v(" "),3==e.detailData.effectiveType?a("div",{},[e._v("月")]):e._e(),e._v(" "),4==e.detailData.effectiveType?a("div",{},[e._v("天")]):e._e()])],1),e._v(" "),a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"dialog_label"},[e._v("状态")])]),e._v(" "),a("el-col",{attrs:{span:12,offset:2}},["1"==e.detailData.interfaceStatus?a("div",{},[e._v("开放")]):e._e(),e._v(" "),"0"==e.detailData.interfaceStatus?a("div",{},[e._v("关闭")]):e._e()])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogDetailVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var ws=function(e){a("icOJ")},Is=a("VU/8")(xs.a,Cs,!1,ws,null,null).exports;l.a.use(m.a);var qs,Ns=new m.a({routes:[{path:"/",name:"index",component:ue},{path:"/login",name:"login",component:fe},{path:"/info",name:"info-panel",component:_e},{path:"/info/sitemsg",name:"siteMsgList",component:xe},{path:"/user",name:"userPanel",component:Ie},{path:"/userlist",name:"userList",component:Se},{path:"/weekList",name:"weekList",component:Ae},{path:"/rolelist",name:"roleList",component:Ee},{path:"/usergrouplist",name:"userGroupList",component:Ve},{path:"/usergroupdetaillist",name:"userGroupDetailList",component:Be},{path:"/apilist",name:"apiList",component:et},{path:"/nodeList",name:"nodeList",component:y},{path:"/nodeEdit",name:"nodeEdit",component:q},{path:"/orderList",name:"orderList",component:Rt},{path:"/actplEdit",name:"actplEdit",component:S},{path:"/activeList",name:"activeList",component:F},{path:"/noticeIndex",name:"noticeIndex",component:K},{path:"/noticeList",name:"noticeList",component:V},{path:"/addActivityInfo",name:"addActivityInfo",component:te},{path:"/policy",name:"policy",component:le},{path:"/newsList",name:"newsList",component:We},{path:"/actplList",name:"actplList",component:A},{path:"/activityList",name:"activityList",component:Je},{path:"/unopened",name:"unopened",component:at},{path:"/bPrivacy",name:"bPrivacy",component:it},{path:"/bService",name:"bService",component:lt},{path:"/bDisclaimer",name:"bDisclaimer",component:ut},{path:"/orgIndex",name:"orgIndex",component:vt},{path:"/educationManagement",name:"educationManagement",component:_t},{path:"/authorityManagement",name:"authorityManagement",component:yt},{path:"/exam",name:"examPanel",component:wt},{path:"/questionnairelist",name:"questionnaireList",component:Et},{path:"/paperlist",name:"paperList",component:Tt},{path:"/cExamstudent",name:"cExamstudent",component:Yt},{path:"/cExamschool",name:"cExamschool",component:Xt},{path:"/cExamKindergarten",name:"cExamKindergarten",component:ta},{path:"/cExamKindergartenTeacher",name:"cExamKindergartenTeacher",component:sa},{path:"/cExamKindergartenParents",name:"cExamKindergartenParents",component:na},{path:"/cExamParents",name:"cExamParents",component:da},{path:"/cExamteacher",name:"cExamteacher",component:ma},{path:"/paper/:id",name:"paperDetail",component:At},{path:"/systemIndex",name:"systemIndex",component:ha},{path:"/sysAdmin",name:"sysAdmin",component:se},{path:"/systemFile",name:"systemFile",component:ba},{path:"/products",name:"productsPanel",component:xa},{path:"/packageList",name:"packageList",component:Ia},{path:"/goodsList",name:"goodsList",component:Ta},{path:"/addGoods",name:"addGoods",component:Aa},{path:"/goodsEdit",name:"goodsEdit",component:Ea},{path:"/goodsDetail",name:"goodsDetail",component:Ra},{path:"/bookPanel",name:"bookPanel",component:Ya},{path:"/bookList",name:"bookList",component:Xa},{path:"/editBook",name:"editBook",component:ao},{path:"/addBook",name:"addBook",component:ro},{path:"/bookDetail",name:"bookDetail",component:co},{path:"/readList",name:"readList",component:vo},{path:"/readListEdit",name:"readListEdit",component:go},{path:"/readRules",name:"readRules",component:ko},{path:"/evaluationPanel",name:"evaluationPanel",component:Co},{path:"/evaRulesList",name:"evaRulesList",component:qo},{path:"/evaRelateList",name:"evaRelateList",component:So},{path:"/evaruleEdit",name:"evaruleEdit",component:Vo},{path:"/evamodalEdit",name:"evamodalEdit",component:jo},{path:"/evaTemplateList",name:"evaTemplateList",component:Ao},{path:"/evaIntroList",name:"evaIntroList",component:Eo},{path:"/examPaperPanel",name:"examPaperPanel",component:Wo},{path:"/examPaperList",name:"examPaperList",component:Jo},{path:"/examAnswerEdit",name:"examAnswerEdit",component:as},{path:"/examPaperEdit",name:"examPaperEdit",component:Zo},{path:"/packageEdit",name:"packageEdit",component:Ba},{path:"/packageDetail",name:"packageDetail",component:Ga},{path:"/thirdparty",name:"thirdPartyPanel",component:is},{path:"/applicationlist",name:"applicationList",component:cs},{path:"/openapilist",name:"openApiList",component:ms},{path:"/apiview",name:"apiViewList",component:gs},{path:"/applicationapilist",name:"applicationApiList",component:ys},{path:"/applicationview",name:"applicationViewList",component:Is},{path:"/evaluationNotice",name:"evaluationNotice",component:H},{path:"/evaluationCategory",name:"evaluationCategory",component:Q}],scrollBehavior:function(e,t,a){return{x:0,y:0}}}),Ts=a("//Fk"),Ss=a.n(Ts),$s=a("OMN4"),Ds=a.n($s),As=a("SJI6"),Ls=a.n(As),Ps="login",Ms="logout",Es="title",Fs="setUserInfo";l.a.use(Ls.a);var Us=new Ls.a.Store({state:{token:null,user:{},title:"",userInfo:{},rolNotice:{},accountNo:null},mutations:(qs={},f()(qs,Ps,function(e,t){console.log(t),sessionStorage.token=t.token,sessionStorage.expireDate=t.expireDate,sessionStorage.userId=t.userId,e.token=t,e.user.userId=t.userId}),f()(qs,Ms,function(e){sessionStorage.removeItem("token"),sessionStorage.removeItem("expireDate"),sessionStorage.removeItem("userId"),sessionStorage.removeItem("accountNo"),e.token=null,e.user={},e.title={},e.userInfo={},e.rolNotice={}}),f()(qs,Es,function(e,t){e.title=t}),f()(qs,Fs,function(e,t){e.userInfo=t,console.log(Fs),sessionStorage.userInfo=P()(t)}),f()(qs,"getRolNotice",function(e,t){e.rolNotice=t}),f()(qs,"headInfo",function(e,t){e.headInfo=t}),f()(qs,"setAccountNo",function(e,t){e.accountNo=t,sessionStorage.accountNo=t}),qs)});Ds.a.interceptors.request.use(function(e){return sessionStorage.getItem("token")&&(e.headers.Authorization=sessionStorage.getItem("token")),e},function(e){return Ss.a.reject(e)}),Ds.a.interceptors.response.use(function(e){return e},function(e){if(e.response)switch(e.response.status){case 401:Us.commit(Ms),Ns.replace({path:"/login",query:{redirect:Ns.currentRoute.fullPath}})}return Ss.a.reject(e.response.data)});var Rs=Ds.a,Vs=function(e){return""!=e&&e?moment(e).format("YYYY-MM-DD HH:mm:ss"):"--"},Os=function(e){return""!=e&&e?moment(e).format("YYYY-MM-DD"):"--"};r()(s).forEach(function(e){l.a.filter(e,s[e])}),l.a.config.productionTip=!1,l.a.prototype.axios=Rs,l.a.prototype._const=o,window._=d.a,l.a.use(O.quillEditor),window.filterSearchName=function(e){return e.replace(/([\^\$\(\)\`\*\+\?\.\\\|\[\]\{\}])/g,"")},new l.a({el:"#app",router:Ns,store:Us,components:{App:p},template:"<App/>"})},NYJM:function(e,t){},NsXF:function(e,t){},OMN4:function(e,t){e.exports=axios},OP9t:function(e,t,a){"use strict";(function(e){var o=a("mvHQ"),s=a.n(o),i=a("XUl8"),r=a("FVP3");t.a={name:"login",components:{bHeader:r.a,bFooter:i.a},data:function(){return{loginForm:{accountNum:"",password:"",catpcha:"",flag:""},catpchaUrl:"",isFetchImg:!1,rules:{accountNum:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"change"}],catpcha:[{required:!0,message:"请输入验证码",trigger:"change"}]},loginAnimation:null}},created:function(){this.getCaptcha()},methods:{submitForm:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.login()})},freshCatpcha:function(){this.getCaptcha()},getCaptcha:function(){var e=this;if(e.isFetchImg)return!1;e.isFetchImg=!0,e.axios.get("/proxy/uc/getCaptcha").then(function(t){e.isFetchImg=!1,t&&"200"==t.status&&t.data&&t.data.data&&(e.catpchaUrl="data:image/png;base64,"+t.data.data.img,e.loginForm.flag=t.data.data.flag)}).catch(function(t){e.isFetchImg=!1,console.log(t)})},login:function(){var t=this,a=e.extend(!0,{},t.loginForm);delete a.catpcha,delete a.flag,t.loginAnimation=this.$loading({lock:!0,text:"正在登录，请稍后...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.6)"}),t.axios.post("/proxy/uc/login?catpcha="+t.loginForm.catpcha+"&flag="+t.loginForm.flag,a).then(function(e){if(e&&e.data&&"200"==e.data.code&&"0"==e.data.bizCode){var a=e.data.data;if(t.loginAnimation.close(),t.$store.commit(t._const.LOGIN,{token:a.token,expireDate:a.expireDate,userId:a.userId}),t.$store.commit("setAccountNo",a.accountNo),t.routerRedirect(),sessionStorage.removeItem("ax"),sessionStorage.removeItem("isad"),sessionStorage.setItem("userData",s()(a)),"admin"==a.accountNo)return void sessionStorage.setItem("isad",!0);sessionStorage.setItem("ax",s()(_.map(a.rolePermissionRelations[0].listPermission,function(e){return _.pick(e,["url","type"])})))}else e&&"200"==e.data.code&&"1"==e.data.bizCode&&e.data.msg?(t.loginAnimation.close(),t.freshCatpcha(),t.$message.error(e.data.msg)):e&&e.data&&"500"==e.data.code?(t.loginAnimation.close(),t.freshCatpcha(),e.data.msg&&t.$message({showClose:!0,message:e.data.msg,type:"error"})):(t.loginAnimation.close(),t.freshCatpcha(),e&&e.data&&e.data.msg&&t.$message({showClose:!0,message:e.data.msg,type:"error"}))}).catch(function(e){t.freshCatpcha(),t.loginAnimation.close(),console.log(e)})},routerRedirect:function(){var e="/",t=this.$route.query.redirect;t&&-1==t.indexOf("login")&&(e=t);var a=decodeURIComponent(e);this.$router.push({path:a})}}}}).call(t,a("0iPh"))},"P+Qr":function(e,t,a){"use strict";(function(e){var o=a("mvHQ"),s=a.n(o),i=a("XUl8"),r=a("FVP3");t.a={name:"bookList",components:{bFooter:i.a,bHeader:r.a},data:function(){return{currentdate:(new Date).getTime(),isCheckedAll:!1,checkboxModel:[],searchForm:{type:"bookListName",search:""},multipleSelection:[],tableData:[],pageInfo:{currPage:1,total:0},userId:"",cid:"",rowData:"",bookIds:[],dialogApproveVisible:!1,form:{approvalStatus:2,opinion:""},rules:{approvalStatus:[{required:!0,message:"审批状态不能为空",trigger:"blur"}]}}},filters:{approvalStatus:function(e){var t=e;switch(t){case 1:t="待审批";break;case 2:t="发布";break;case 3:t="驳回";break;case 4:t="系统关闭";break;case 5:t="关闭";break;case 6:t="编辑"}return t}},mounted:function(){this.userId=sessionStorage.getItem("userId"),sessionStorage.getItem("List_page")&&(this.pageInfo=JSON.parse(sessionStorage.getItem("List_page")),sessionStorage.removeItem("List_page")),this.getList()},methods:{getSearch:function(){this.pageInfo.currPage=1,this.getList()},getList:function(){var e=this,t={},a=this.pageInfo.currPage;this.searchForm.search.length>0&&("bookListName"==this.searchForm.type?t.bookListName=this.searchForm.search:"organization"==this.searchForm.type?t.organization=this.searchForm.search:t.publisherdName=this.searchForm.search),e.axios.post("/proxy/report-business/booking/v2/api/goodsManager/bookList/queyBookList/"+a+"/10",t).then(function(t){t.data&&200==t.data.code&&(e.tableData=t.data.data,_.each(e.tableData,function(e){e.bookIds&&(e.bookIdsSize=e.bookIds.length),e.timeLimit=moment(e.timeLimit).format("YYYY-MM-DD HH:mm:ss"),e.dateM=new Date(e.timeLimit.replace(/-/g,"/")),e.myTime=e.dateM.getTime()}),e.pageInfo=t.data.pageInfo,e.pageInfo.total=t.data.pageInfo.total)}).catch(function(e){console.log(e)})},fnChange:function(e){var t=this,a={approvalStatus:e.approvalStatus};this.cid=e.id,2==a.approvalStatus?a.approvalStatus=4:a.approvalStatus=2,t.axios.post("/proxy/report-business/booking/v2/api/goodsManager/bookList/approveBookList/"+this.cid,a).then(function(e){if(e.data&&200==e.data.code){var o=2==a.approvalStatus?"发布成功":"关闭成功";t.$message.success(o),t.getList()}else t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},schanged:function(){var e=this;this.$refs.multipleTable.clearSelection(),this.multipleSelection.length>0&&this.multipleSelection.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)})},checkedAll:function(e){var t=this;t.isCheckedAll?(t.checkboxModel=[],t.tableData.forEach(function(e,a){2!=e.approvalStatus&&t.checkboxModel.push(e.id)})):t.checkboxModel=[]},removeitem:function(){var e=this,t=this.checkboxModel;0!=e.checkboxModel.length?e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.post("/proxy/report-business/booking/v2/api/goodsManager/bookList/deleteBookList",t).then(function(t){t.data&&200==t.data.code?(e.$message.success("删除成功"),e.getList(),e.isCheckedAll=!1,e.checkboxModel=[]):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}).catch(function(){e.$message.info("已取消删除"),e.isCheckedAll=!1,e.checkboxModel=[]}):e.$message.error("请选择要删除的书单！")},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getList()},fnRules:function(e){sessionStorage.setItem("rowData",s()(e)),sessionStorage.setItem("List_page",s()(this.pageInfo))},fnApprove:function(e){this.dialogApproveVisible=!0,this.cid=e.id},fnCancel:function(){this.dialogApproveVisible=!1},fnConfirm:function(){var t=this,a=e.extend(!0,{},t.form);t.axios.post("/proxy/report-business/booking/v2/api/goodsManager/bookList/approveBookList/"+this.cid,a).then(function(e){e&&e.data&&"200"==e.data.code?(2==a.approvalStatus?t.$message({type:"success",message:"审批通过!"}):t.$message({type:"error",message:"审批不通过!"}),t.dialogApproveVisible=!1,t.getList()):t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},viewNode:function(e){this.$store.nodeId=e.id,this.$store.nodereadonly=!0,sessionStorage.setItem("List_page",s()(this.pageInfo)),this.$router.push({name:"readListEdit"})}}}}).call(t,a("0iPh"))},PBWd:function(e,t){},Pl95:function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3"),i=a("G0J2"),r=(a.n(i),[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!0,"large","huge"]}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],["link"]]);t.a={goodsName:"goodsEdit",components:{bFooter:o.a,bHeader:s.a,quillEditor:i.quillEditor},data:function(){return{form:{goodsName:"",goodsType:"",goodsPrice:"",isbn:"",frequency:"",effective:"",describes:""},rule:{goodsName:[{required:!0,message:"请输入商品名称",trigger:"blur"},{max:40,message:"不能超过40个字符",trigger:"blur"}],goodsType:[{required:!0,message:"请选择商品类型",trigger:"blur"}],isbn:[{validator:function(e,t,a){!/^[\d\-]+$/.test(t)||17!=t.length&&13!=t.length?a(new Error("请输入正确的ISBN")):t?a():a(new Error("请输入ISBN"))},required:!0,trigger:"blur"}],goodsPrice:[{validator:function(e,t,a){!/^[0-9]+([.]{1}[0-9]{1,2})?$/.test(t)&&t?a(new Error("请输入保留两位小数的数字")):t>999999.99?a(new Error("不能超过999999.99")):""===t?a(new Error("请输入价格")):a()},required:!0,trigger:"blur"}],frequency:[{validator:function(e,t,a){!/^\d+$/.test(t)&&t?a(new Error("请输入整数")):t>9999?a(new Error("不能超过9999")):t?a():a(new Error("请输入可使用次数"))},required:!0,trigger:"blur"}],effective:[{required:!0,message:"请选择使用期限",trigger:"blur"}],describes:[{max:2e3,message:"不能超过2000个字符",trigger:"blur"}]},actionUrl:"/proxy/report-business/booking/v2/api/goodsManager/uploadGoodsImg/",editorOption:{modules:{toolbar:{container:r}}},userId:"",id:"",goodsPhoto:[],fileList:[],isGoodsPhoto:!1,dialogVisible:!1,isLock:!1,goodsList:[{id:1,name:"全部"},{id:2,name:"图书"},{id:3,name:"绘本"},{id:4,name:"音像"},{id:5,name:"测评服务"}],effectiveList:[{id:1,name:"按年"},{id:2,name:"按月"},{id:3,name:"按周"},{id:4,name:"按天"},{id:5,name:"按小时"}]}},computed:{editor:function(){return this.$refs.myQuillEditor.quill},header:function(){return{Authorization:sessionStorage.getItem("token")}}},mounted:function(){this.userId=sessionStorage.getItem("userId");var t=this.getUrl(window.location.href);this.id=t.id,e("html,body").animate({scrollTop:0},500),this.$nextTick(function(){this.getGoods(this.id)})},methods:{onEditorReady:function(e){},getUrl:function(e){for(var t=void 0,a={},o=e.slice(e.indexOf("?")+1).split("&"),s=0;s<o.length;s++)a[(t=o[s].split("="))[0]]=t[1];return a},getGoods:function(e){var t=this;t.axios.get("/proxy/report-business/booking/v2/api/goodsManager/goods/"+e).then(function(e){if(e.data&&200==e.data.code){var a=e.data.data,o=[];t.form.goodsName=a.goodsName,t.form.goodsType=a.goodsType,t.form.goodsPrice=a.goodsPrice.toFixed(2),t.form.isbn=a.isbn,t.form.frequency=a.frequency,t.form.effective=a.effective,t.form.describes=a.describes,a.goodsPhoto.forEach(function(e){var t={};t.fileName=e.fileName,t.url=e.path,t.path=e.path,t.size=e.size,e.id&&(t.id=e.id),o.push(t)}),t.fileList=o}else t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},submitForm:function(e){var t=this,a=t.form;a.goodsPrice=Number(a.goodsPrice),t.goodsPhoto=[],t.fileList.forEach(function(e){var a={};if(e.response){var o=e.response.data;a.fileName=o.fileName,a.path=o.path,a.size=o.size}else a.fileName=e.fileName,a.path=e.path,a.size=e.size,a.id=e.id;t.goodsPhoto.push(a)}),a.goodsPhoto=t.goodsPhoto,a.id=t.id,/<img(?:.|\s)*?>/g.test(t.form.describes)?t.$message.error("商品说明含有图片，请删除后从商品图片处上传图片！"):0!==a.goodsPhoto.length?t.isLock||t.$refs.form.validate(function(e){if(!e)return!1;t.isLock=!0,t.axios.put("/proxy/report-business/booking/v2/api/goodsManager/goods/"+t.userId,a).then(function(e){t.isLock=!1,e.data&&200==e.data.code?(t.$message.success("编辑商品成功"),t.$router.push({name:"goodsList"})):t.$message.error(e.data.msg)}).catch(function(e){t.isLock=!1,console.log(e)})}):t.isGoodsPhoto=!0},handleSuccess:function(e,t,a){500!=e.code?this.fileList=a:this.$message.error(e.msg)},handleError:function(e,t,a){console.log(e,t,a)},beforeUpload:function(e){var t="image/jpg"==e.type,a="image/jpeg"==e.type,o=e.size/1024<300;return a||t||this.$message.error("上传图片只能是 jpg 、jpeg格式!"),o||this.$message.error("上传图片大小不能超过 300KB!"),(t||a)&&o},handleRemove:function(e,t){this.fileList=t},handleExceed:function(e,t){this.$message.error("最多只能上传3张图片！")},CtoH:function(e){for(var t=e,a="",o=0;o<t.length;o++)12288!=t.charCodeAt(o)?t.charCodeAt(o)>65280&&t.charCodeAt(o)<65375?a+=String.fromCharCode(t.charCodeAt(o)-65248):a+=String.fromCharCode(t.charCodeAt(o)):a+=String.fromCharCode(t.charCodeAt(o)-12256);return a}},watch:{fileList:{handler:function(e,t){this.isGoodsPhoto=0===e.length},deep:!0},"form.isbn":function(e,t){this.form.isbn=this.CtoH(e)},"form.goodsPrice":function(e,t){this.form.goodsPrice=this.CtoH(e)},"form.frequency":function(e,t){e&&!t?e=e:this.form.frequency=this.CtoH(e)}}}}).call(t,a("0iPh"))},Q5gy:function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"siteMsgList",components:{bHeader:s.a,bFooter:o.a},data:function(){return{pageInfo:{total:0,currPage:1,pageSize:10},query:{newsStatus:"null",newsTitle:""},list:[],schoolTyperef:[{label:"中专",key:"1"},{label:"初中",key:"2"},{label:"高中",key:"3"},{label:"工读",key:"4"},{label:"九年一贯",key:"5"},{label:"其他中职",key:"6"},{label:"十二年一贯",key:"7"},{label:"调整中职",key:"8"},{label:"完全中学",key:"9"},{label:"小学",key:"10"},{label:"小教点",key:"11"},{label:"幼儿园",key:"12"},{label:"职高",key:"13"},{label:"中技",key:"14"},{label:"中师",key:"15"}],form:{areasInfoId:"",cityInifoId:"",createUserId:"",newsContent:"",newsTitle:"",provinceInfoId:"",sendTime:"",sendType:[],userType:[],schoolTypes:[],schoolType:null},rules:{newsTitle:[{required:!0,message:"消息标题不能为空",trigger:"blur"}],newsContent:[{required:!0,message:"消息内容不能为空",trigger:"blur"}],userType:[{required:!0,message:"用户组不能为空",trigger:"blur"}],schoolTypes:[{required:!0,message:"学校类别不能为空",trigger:"blur"}],areasInfoId:[{required:!0,message:"发送区域不能为空",trigger:"blur"}],sendTime:[{required:!0,message:"发送时间不能为空",trigger:"blur"}],sendType:[{required:!0,message:"传递渠道不能为空",trigger:"blur"}]},formLength:{newsTitle:50,newsContent:200},formType:"new",dialogFormVisible:!1,formLabelWidth:"120px",deleteDialogVisible:!1,deployDialogVisible:!1,checkboxModel:[],isCheckedAll:!1,dialogDetailVisible:!1,detailData:{},reclaimDialogVisible:!1,citySelect:{provinces:[],cities:[],areas:[],selectedProvince:"",selectedCity:"",selectedArea:""}}},created:function(){this.getInfo(),this.getProvince()},watch:{checkboxModel:{handler:function(e,t){var a=[];this.list.forEach(function(e){2!==e.newsStatus&&a.push(e)}),this.checkboxModel.length===a.length&&this.checkboxModel.length>0?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0},"form.provinceInfoId":{handler:function(e,t){console.log(e),e&&this.getCities(e)},deep:!0},"form.cityInifoId":{handler:function(e,t){console.log(e),e&&this.getArea(e)},deep:!0},"form.areasInfoId":{handler:function(e,t){console.log(e)},deep:!0}},methods:{msgFormExit:function(e){void 0!==this.$refs.msgForm&&this.$refs.msgForm.resetFields(),this.dialogFormVisible=!1},getLoginId:function(){var e=sessionStorage.getItem("userId");return e||""},batchDelete:function(){var t=this,a=t.checkboxModel;if(0==a.length)return t.$confirm("请至少选中一条你要删除的消息！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){}),!1;var o=t.list,s=!1;if(e.each(a,function(t,a){e.each(o,function(e,t){if(t.id==a&&(2==t.newsStatus||"2"==t.newsStatus))return s=!0,!1})}),s)return t.$confirm("已发送的消息无法删除，请取消其选中状态","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){}),!1;t.$confirm("此操作将永久删除选中的消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.delete("/proxy/report-business/booking/v2/api/stattionNews/delete",{data:a}).then(function(e){e&&e.data&&"200"==e.data.code&&t.$message({type:"success",message:"删除成功!"}),setTimeout(function(){window.location.reload()},3e3)}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getProvince:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/regionService/getAll").then(function(t){t&&t.data&&t.data.data&&(e.citySelect.provinces=t.data.data,e.form.provinceInfoId||(e.form.provinceInfoId=t.data.data[0].id))}).catch(function(e){console.log(e)})},getCities:function(t){var a=this;a.axios.get("/proxy/report-business/booking/v2/api/regionService/getCityByName/"+t+"/null").then(function(t){if(t&&t.data&&t.data.data){a.citySelect.cities=t.data.data;var o=t.data.data,s=!1;a.form.cityInifoId?(e.each(o,function(e,t){if(t.id==a.form.cityInifoId)return s=!0,!1}),s||(a.form.cityInifoId=t.data.data[0].id)):a.form.cityInifoId=t.data.data[0].id}}).catch(function(e){console.log(e)})},getArea:function(t){var a=this;a.axios.get("/proxy/report-business/booking/v2/api/regionService/getArea/"+t+"/null").then(function(t){if(t&&t.data&&t.data.data){a.citySelect.areas=t.data.data;var o=t.data.data,s=!1;a.form.areasInfoId?(e.each(o,function(e,t){if(t.id==a.form.areasInfoId)return s=!0,!1}),s||(a.form.areasInfoId=t.data.data[0].id)):a.form.areasInfoId=t.data.data[0].id}}).catch(function(e){console.log(e)})},checkedAll:function(){var e=this;console.log(e.checkboxModel),this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){2!==t.newsStatus&&e.checkboxModel.push(t.id)}))},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageInfo.currPage=e,this.getInfo()},searchInfo:function(){this.getInfo()},getInfo:function(){var t=this,a={};a=e.extend(!0,{},t.query),""==e.trim(t.query.newsTitle)&&(a.newsTitle="null");var o=e.param(a);t.axios.get("/proxy/report-business/booking/v2/api/stattionNews/getAll/"+t.pageInfo.currPage+"/"+t.pageInfo.pageSize+"?"+o).then(function(e){if(e&&e.data&&e.data.datas){var a=e.data.datas,o={0:"编辑中",1:"待发送",2:"已发送"};a.forEach(function(e){void 0!==e.newsStatus&&void 0!==o[e.newsStatus]?e.statusTxt=o[e.newsStatus]:e.statusTxt="--"}),t.list=a,t.pageInfo=e.data.pageInfo,t.checkboxModel=[]}}).catch(function(e){console.log(e)})},createMsg:function(){this.formType="new",this.form={areasInfoId:"",cityInifoId:"",createUserId:"",newsContent:"",newsTitle:"",provinceInfoId:"",sendTime:"",sendType:[],userType:[],schoolTypes:[],schoolType:null},this.dialogFormVisible=!0},saveMsgHandle:function(){var e=this;e.$refs.msgForm.validate(function(t){if(!t)return!1;e.saveMsg()})},saveMsg:function(){for(var t=this,a={},o=(a=e.extend(!0,{},t.form)).sendType,s=[],i={"站内":"0","邮件":"1"},r=0;r<o.length;r++){void 0!==(d=o[r]&&i[o[r]])&&s.push(parseInt(d))}a.sendType=s;var n=a.userType,l=[],c={"教育局":"1","学校":"2","老师":"3","家长":"4","学生":"5"};for(r=0;r<n.length;r++){var d;void 0!==(d=n[r]&&c[n[r]])&&l.push(parseInt(d))}a.userType=l,a.schoolType=_.compact(_.map(a.schoolTypes,function(e){return _.findWhere(t.schoolTyperef,{label:e}).key})).join(","),a.schoolTypes=a.schoolTypes.join(","),a.createUserId=t.getLoginId(),delete a.areasInfoName,delete a.cityInifoName,delete a.provinceInfoName,"new"==t.formType?t.axios.post("/proxy/report-business/booking/v2/api/stattionNews/insert",a).then(function(e){e&&e.data&&(console.log(e),window.location.reload())}).catch(function(e){console.log(e)}):"edit"==t.formType&&t.axios.put("/proxy/report-business/booking/v2/api/stattionNews/update",a).then(function(e){e&&e.data&&(console.log(e),window.location.reload())}).catch(function(e){console.log(e)}),t.dialogFormVisible=!1},editMsg:function(t){var a=this,o=t.id;if(!o)return!1;a.axios.get("/proxy/report-business/booking/v2/api/stattionNews/query/"+o).then(function(t){if(t&&t.data&&t&&t.data&&t.data.data){for(var o={},s=(o=e.extend(!0,{},t.data.data)).userType,i=[],r={1:"教育局",2:"学校",3:"老师",4:"家长",5:"学生"},n=0;n<s.length;n++){void 0!==(u=s[n]&&r[s[n]])&&i.push(u)}var l=o.sendType,c=[],d={0:"站内",1:"邮件"};for(n=0;n<l.length;n++){var u;void 0!==(u=s[n]&&d[l[n]])&&c.push(u)}o.schoolTypes&&(o.schoolTypes=o.schoolTypes.split(",")),o.sendType=c,o.userType=i,a.form=o}}).catch(function(e){console.log(e)}),a.formType="edit",a.dialogFormVisible=!0},deleteMsg:function(e){var t=this;t.$confirm("此操作将永久删除选中的消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteData=e,t.confirmDeleteMsg()}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},reclaimMsg:function(e){this.reclaimDialogVisible=!0,this.reclaimData=e},confirmDeleteMsg:function(){var e=this,t=this.deleteData.id;if(!t)return!1;e.axios.put("/proxy/report-business/booking/v2/api/stattionNews/update/"+t+"/-1").then(function(t){t&&t.data&&(console.log(t),e.getInfo())}).catch(function(e){console.log(e)}),this.deleteDialogVisible=!1},confirmDeployMsg:function(){var e=this,t=e.deployData.id;e.axios.put("/proxy/report-business/booking/v2/api/stattionNews/update/"+t+"/1").then(function(t){e.deployDialogVisible=!1,t&&t.data&&"200"==t.data.code?(e.$message({showClose:!0,message:"消息发布成功！",type:"success"}),setTimeout(function(){e.getInfo()},3e3)):t&&t.data&&"500"==t.data.code&&e.$message({showClose:!0,message:t.data.msg,type:"error"})}).catch(function(t){console.log(t),e.deployDialogVisible=!1})},confirmReclaimMsgMsg:function(){var e=this,t=e.reclaimData.id;e.axios.put("/proxy/report-business/booking/v2/api/stattionNews/update/"+t+"/0").then(function(t){e.reclaimDialogVisible=!1,t&&t.data&&"200"==t.data.code?(e.$message({showClose:!0,message:"消息收回成功！",type:"success"}),setTimeout(function(){e.getInfo()},3e3)):t&&t.data&&"500"==t.data.code&&e.$message({showClose:!0,message:t.data.msg,type:"error"})}).catch(function(t){e.reclaimDialogVisible=!1,console.log(t)})},viewMsg:function(e){var t=this,a=e.id;if(!a)return!1;t.axios.get("/proxy/report-business/booking/v2/api/stattionNews/query/"+a).then(function(e){if(e&&e.data&&(console.log(e),e&&e.data&&e.data.data)){for(var a=e.data.data,o={0:"站内消息",1:"电子邮箱",2:"微信",3:"短信"},s=e.data.data.sendType,i=[],r=0;r<s.length;r++){var n=o[s[r]];void 0!==n&&i.push(n)}a.sendTypeNames=i;var l=e.data.data.userType,c=[],d={1:"教育局",2:"学校",3:"老师",4:"家长",5:"学生"};for(r=0;r<l.length;r++){var u=void 0!==l[r]&&d[l[r]];void 0!==u&&c.push(u)}a.userTypeNames=c.join(","),t.detailData=a,t.dialogDetailVisible=!0}}).catch(function(e){console.log(e)})},deployMsg:function(e){this.deployDialogVisible=!0,this.deployData=e}}}}).call(t,a("0iPh"))},QEZS:function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"roleList",components:{bHeader:s.a,bFooter:o.a},data:function(){return{query:{keyword:""},pageInfo:{total:0,currPage:1,pageSize:10},list:[],isCheckedAll:!1,checkboxModel:[],formTitle:"新建角色",dialogVisible:!1,form:{roleName:"",roleDescription:"",id:""},title:"新建角色",visible:!1,formLength:{roleName:15,roleDescription:100},formLabelWidth:"100px",rules:{roleName:[{required:!0,message:"角色名不能为空",trigger:"blur"},{validator:function(e,t,a){var o=new RegExp(/^[\u4E00-\u9FA5a-zA-Z]+$/);if(""!==t&&t){if(t&&""!==t){var s=o.test(t);s?s&&a():a(new Error("角色名必须由汉字或者英文字母组成"))}}else a(new Error("角色名不能为空"))},trigger:"blur"}],roleDescription:[{required:!0,message:"角色说明不能为空",trigger:"blur"}]},permissionsDialogVisible:!1,permissions:{value:"",options:[],allList:[],list:[],roleId:"",detial:{}}}},created:function(){this.getInfo()},computed:{},watch:{checkboxModel:{handler:function(e,t){this.checkboxModel.length===this.list.length?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{selectLeftRole:function(e){this.permissions.allList[e].isActive=!this.permissions.allList[e].isActive},selectRightRole:function(e){this.permissions.list[e].isActive=!this.permissions.list[e].isActive},shiftToRight:function(t){var a=this.permissions.allList,o=this.permissions.list;"ALL"===t?a.forEach(function(t){var a=e.extend(!0,{},t);o.push(a)}):"ALL"!==t&&a.forEach(function(t){if(t.isActive){var a=e.extend(!0,{},t);o.push(a)}});var s=_(o).uniq("id");this.permissions.list=s},shiftToLeft:function(t){var a=this.permissions.list,o=[];"ALL"===t?o=[]:"ALL"!==t&&a.forEach(function(t){if(!t.isActive){var a=e.extend(!0,{},t);o.push(a)}}),this.permissions.list=o},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getInfo()},checkedAll:function(){var e=this;this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){e.checkboxModel.push(t.id)})),console.log(e.checkboxModel)},newRole:function(){this.form={roleName:"",roleDescription:"",id:""},this.dialogVisible=!0,this.formTitle="新建角色"},editRole:function(e){this.form.id=e.id,this.form.roleName=e.roleName,this.form.roleDescription=e.roleDescription,this.dialogVisible=!0,this.formTitle="修改角色"},roleFormExit:function(){void 0!==this.$refs.roleForm&&this.$refs.roleForm.resetFields(),this.dialogVisible=!1},saveRoleHandle:function(){var e=this;e.$refs.roleForm.validate(function(t){if(!t)return!1;e.saveRole()})},associatePermissions:function(e){var t=this,a=e.id;t.permissions.roleId=e.id,t.permissions.detail={},t.axios.post("/proxy/report-business//booking/v2/api/service/getAllOperation").then(function(e){e&&e.data&&"200"==e.data.code&&(t.permissions.options=e.data.data)}).catch(function(e){console.log(e)}),t.axios.post("/proxy/report-business/booking/v2/api/userManagement/getRolePermission/"+a).then(function(e){if(e&&e.data&&"200"==e.data.code){t.permissions.detail=e.data.data[0];var a=e.data.data[0].listPermission;a.forEach(function(e){e.isActive=!1}),t.permissions.list=a}}).catch(function(e){console.log(e)}),this.permissionsDialogVisible=!0},saveAssociatePermissions:function(){var e=this,t={listPermission:[],roleId:""};this.permissions.list.forEach(function(e){t.listPermission.push({id:e.id,name:e.name,serviceName:e.serviceName,requestType:e.requestType,type:e.type,url:e.url})}),t.roleId=e.permissions.roleId,e.permissions.detail&&e.permissions.detail.id&&(t.id=e.permissions.detail.id),e.axios.post("/proxy/report-business/booking/v2/api/userManagement/saveRolePermission",t).then(function(t){t&&t.data&&"200"===t.data.code&&(e.permissionsDialogVisible=!1,e.$message({type:"success",message:"角色关联权限成功!"}),e.getInfo())}).catch(function(e){console.log(e)})},getPermissionsByService:function(e){var t=this;t.axios.post("/proxy/report-business/booking/v2/api/userManagement/getPermissionByServiceId/"+e).then(function(e){if(e&&e.data&&"200"==e.data.code){var a=e.data.data;a.forEach(function(e){e.isActive=!1}),t.permissions.allList=a}}).catch(function(e){console.log(e)})},saveRole:function(){var t=this,a=e.extend(!0,{},t.form),o=!!t.form.id;""==a.id&&delete a.id,t.axios.post("/proxy/report-business/booking/v2/api/userManagement/saveRole",a).then(function(e){e&&e.data&&"200"==e.data.code&&(t.dialogVisible=!1,t.$message({type:"success",message:o?"编辑角色成功!":"新建角色成功!"}),t.getInfo())}).catch(function(e){console.log(e)})},batchDelete:function(){var e=this,t=e.checkboxModel;if(0==t.length)return e.$confirm("请至少选中一个你要删除的角色！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){}).catch(function(){}),!1;e.$confirm("此操作将永久删除选中的角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){e.axios.post("/proxy/report-business/booking/v2/api/userManagement/deleteListRole",t).then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"删除成功!"}),setTimeout(function(){window.location.reload()},3e3)}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},searchInfo:function(){this.getInfo()},getInfo:function(){var e,t=this,a={infoMap:{},pagesize:10,startpage:1};a.pagesize=t.pageInfo.pageSize,a.startpage=t.pageInfo.currPage,e=t.query.keyword?"?roleName="+t.query.keyword:"",t.axios.get("/proxy/report-business/booking/v2/api/userManagement/queryListRole/"+a.startpage+"/"+a.pagesize+e).then(function(e){if(e&&e.data&&e.data.datas){var a=e.data.datas;t.list=a,t.pageInfo=e.data.pageInfo}}).catch(function(e){console.log(e)})}}}}).call(t,a("0iPh"))},QLos:function(e,t){},QbCC:function(e,t){},R2OK:function(e,t){},RExK:function(e,t){},RfEj:function(e,t){},SJI6:function(e,t){e.exports=Vuex},SbNe:function(e,t){},"Sc+K":function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"applicationApiList",components:{bHeader:s.a,bFooter:o.a},data:function(){return{pageInfo:{total:0,currPage:1,pageSize:10},query:{name:""},list:[],checkboxModel:[],isCheckedAll:!1,userId:""}},created:function(){this.getInfo()},mounted:function(){this.userId=sessionStorage.getItem("userId")},watch:{checkboxModel:{handler:function(e,t){var a=[];this.list.forEach(function(e){2!==e.newsStatus&&a.push(e)}),this.checkboxModel.length===a.length&&this.checkboxModel.length>0?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{viewService:function(e){var t=e.id;this.$router.push({path:"applicationview",query:{id:t}})},checkedAll:function(){var e=this;this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){2!==t.newsStatus&&e.checkboxModel.push(t.id)}))},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageInfo.currPage=e,this.getInfo()},searchInfo:function(){this.getInfo()},getInfo:function(){var t,a=this,o="";t=e.extend(!0,{},a.query),""==e.trim(a.query.name)||(o="?"+e.param(t)),a.axios.get("/proxy/report-business/booking/v2/api/application/application/"+a.pageInfo.currPage+"/"+a.pageInfo.pageSize+o).then(function(e){if(e&&e.data&&e.data.datas){var t=e.data.datas;a.list=t,a.pageInfo=e.data.pageInfo,a.checkboxModel=[]}}).catch(function(e){console.log(e)})}}}}).call(t,a("0iPh"))},Sldx:function(e,t){},SqGG:function(e,t){},Ty9w:function(e,t){},"V4J/":function(e,t){},VH76:function(e,t){},WiAa:function(e,t){},XRkv:function(e,t,a){"use strict";(function(e){var o=a("woOf"),s=a.n(o);t.a={examFunc:{initPage:function(){var t=this;this.active=JSON.parse(sessionStorage.getItem("active")),this.userInfo=JSON.parse(sessionStorage.getItem("userInfo"))||{},this.active.userId||(this.active.userId=sessionStorage.getItem("userId")),sessionStorage.setItem("activeUid",this.active.userId),this.active.userName&&(this.userInfo.realName=this.active.userName),this.active.readonly&&(this.readonly=!0),this.axios.get("/proxy/report-business/booking/v2/api/eventManagement/quesTemp/"+this.active.eventEffectUserId).then(function(a){a.data.data&&a.data.data.contents&&"null"!=a.data.data.contents&&a.data.data.contents.length>0&&s()(t.form,JSON.parse(JSON.parse(a.data.data.contents).contents)),t.form.schoolName&&t.form.schoolName!=t.userInfo.schoolName&&(t.userInfo.schoolName=t.form.schoolName),t.form.realName&&t.form.realName!=t.userInfo.realName&&(t.userInfo.realName=t.form.realName),e("textarea").attr("placeholder",""),e("input").attr("placeholder",""),t.getFileList()}).catch(function(e){console.log(e)})},getFileList:function(){var e=this;this.axios.get("/proxy/report-business/booking/v1/api/file/getUserFileInfo/"+this.active.userId).then(function(t){200==t.data.code?e.filelist=t.data.data:e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})},validInt:function(e){return this.rules.int[0].test(e)},rules:{percent:[{test:function(e){return null==e||void 0==e||""==e||e>0&&e<=100},message:"请输入0到100之间的数字"}],int:[{test:function(e){if(null==e||void 0==e||""==e)return!0;return/^[1-9][0-9]*$/.test(e)},message:"请输入正确的整数"}],currency:[{test:function(e){if(null==e||void 0==e||""==e)return!0;return/^[0-9]+(.[0-9]{2})?$/.test(e)},message:"请输入两位小数的金额"}],textarea:[{test:function(e){return e.length<=3e3},message:"文字长度不要超过3000"}],ip:[{test:function(e){if(null==e||void 0==e||""==e)return!0;return/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/.test(e)},message:"请输入正确的网址"}]}}}}).call(t,a("0iPh"))},XScV:function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"List",components:{bHeader:s.a,bFooter:o.a},data:function(){return{list:[],checkboxModel:[],isCheckedAll:!1,form:{comment:"",creator:"",userGroupName:"",userGroupType:"1"},rules:{userGroupName:[{required:!0,message:"请输入用户组名称",trigger:"blur"},{validator:function(e,t,a){var o=new RegExp(/^[\u4E00-\u9FA5]+$/);if(""!==t&&t){if(t&&""!==t){var s=o.test(t);s?s&&a():a(new Error("用户组名称必须为汉字"))}}else a(new Error("用户组名称不能为空"))},trigger:"blur"}]},formLength:{comment:200},formLabelWidth:"120px",dialogFormVisible:!1,dialogTitle:"新建用户组",dialogUserGroupVisible:!1,detail:{}}},created:function(){this.getInfo()},watch:{checkboxModel:{handler:function(e,t){this.checkboxModel.length===this.list.length?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{userGroupFormExit:function(e){void 0!==this.$refs.userGroupForm&&this.$refs.userGroupForm.resetFields(),this.dialogFormVisible=!1},getLoginId:function(){var e=sessionStorage.getItem("userId");return e||""},checkedAll:function(){var e=this;console.log(e.checkboxModel),this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){e.checkboxModel.push(t.id)}))},batchDelete:function(){var e=this,t=e.checkboxModel;if(0==t.length)return e.$confirm("请至少选中一个你要删除的用户组！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){}).catch(function(){}),!1;e.$confirm("此操作将永久删除选中的用户组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/userManagement/userGroup/deleteGroupByIds",{data:t}).then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"删除成功!"}),e.isCheckedAll?setTimeout(function(){window.location.reload()},3e3):e.getInfo()}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},getTime:function(e){if(""!=e&&e){var t=new Date(e),a=t.getFullYear(),o=t.getMonth()+1;return a+"-"+(o<10?"0"+o:o+"")+"-"+(t.getDate()<10?"0"+t.getDate():""+t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():""+t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():""+t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():""+t.getSeconds())}return""},newUserType:function(){this.dialogTitle="新建用户组",this.form={comment:"",creator:"",userGroupName:"",userGroupType:"1"},this.dialogFormVisible=!0},saveUserGroupHandle:function(){var e=this;e.$refs.userGroupForm.validate(function(t){if(!t)return!1;e.saveUserGroupType()})},saveUserGroupType:function(){var t=this,a={};(a=e.extend(!0,{},t.form)).creator=this.getLoginId(),t.dialogFormVisible=!1;var o=!!a.id;t.axios.post("/proxy/report-business/booking/v2/api/userManagement/userGroup/addOrUpdate",a).then(function(e){e&&e.data&&"200"==e.data.code?(t.$message({type:"success",message:o?"编辑用户组成功!":"新建用户组成功!"}),t.getInfo()):e&&e.data&&"500"==e.data.code&&t.$message({showClose:!0,message:e.data.msg,type:"error"})}).catch(function(e){console.log(e)})},editUserGroup:function(e){this.dialogTitle="编辑用户组",this.form.comment=e.comment,this.form.userGroupName=e.userGroupName,this.form.userGroupType=e.userGroupType,this.form.id=e.id,this.dialogFormVisible=!0},userGroupDetail:function(e){var t=this;t.detail={};var a=e.id;t.axios.get("/proxy/report-business/booking/v2/api/userManagement/getUserGroupById/"+a).then(function(e){e&&e.data&&e.data.data&&(t.detail=e.data.data,t.dialogUserGroupVisible=!0)}).catch(function(e){console.log(e)})},getInfo:function(){var e=this;e.axios.post("/proxy/report-business/booking/v2/api/userManagement/userGroup/getCountTotalList").then(function(t){if(t&&t.data&&t.data.data){e.list=t.data.data;var a=t.data.data;a.forEach(function(t){t.formatCreateTime=e.getTime(t.createTime)}),e.list=a}}).catch(function(e){console.log(e)})}}}}).call(t,a("0iPh"))},XUl8:function(e,t,a){"use strict";var o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{attrs:{id:"footer"}},[a("div",{staticClass:"footer_box"},[e._m(0),e._v(" "),a("div",{staticClass:"fr statement"},[a("router-link",{attrs:{to:"../bDisclaimer"}},[a("a",{attrs:{href:"javascript:;"}},[e._v("免责声明")])]),e._v(" "),a("span"),e._v(" "),a("router-link",{attrs:{to:"../bPrivacy"}},[a("a",{attrs:{href:"javascript:;"}},[e._v("用户隐私保护声明")])]),e._v(" "),a("span"),e._v(" "),a("router-link",{attrs:{to:"../bService"}},[a("a",{attrs:{href:"javascript:;"}},[e._v("用户服务协议")])])],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl copyright"},[t("img",{staticClass:"copyright-wechat fl",attrs:{src:a("vW6h"),alt:"wechat",width:"70",height:"70"}}),this._v(" "),t("div",{staticClass:"copyright-text-box"},[t("p",{staticClass:"copyright-text"},[this._v("关注“书香校园在线”公众号  了解更多阅读资讯")]),this._v(" "),t("p",{staticClass:"copyright-text"},[this._v("博雅优创（深圳）有限公司")]),this._v(" "),t("p",{staticClass:"copyright-text"},[this._v("粤ICP备17004251号")])])])}]};var s=a("VU/8")({name:"b-footer",data:function(){return{}}},o,!1,function(e){a("WiAa")},"data-v-16cfdc27",null);t.a=s.exports},YKFA:function(e,t){},YTCB:function(e,t){},Yoln:function(e,t){},"Zsu+":function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"questionnaireList",components:{bHeader:s.a,bFooter:o.a},data:function(){var e=this;return{pageInfo:{total:0,currPage:1,pageSize:10},query:{queryFiled:"name",keyword:""},list:[],checkboxModel:[],deleteDialogVisible:!1,isCheckedAll:!1,dialogTitle:"新建问卷",formLabelWidth:"100px",form:{id:"",name:"",questionURL:"",questionnaireType:"",remark:""},formLength:{name:50,remark:200},rules:{name:[{required:!0,message:"请输入问卷名称",trigger:"blur"},{validator:function(t,a,o){if(""===a)o(new Error("请输入问卷名称"));else if(""!==a){if(e.form.id)var s="?id="+e.form.id;else e.form.id||(s="?id=null");e.axios.get("/proxy/report-business/booking/v2/api/questionsAnswer/checkNameUnique/"+a+s).then(function(e){e&&void 0!==e.data&&("200"===e.data.code?!1!==e.data.data?o(new Error("该问卷名称已存在，请更换问卷名称!")):o():"200"!==e.data.code&&o(new Error("网路错误:"+e.data.code)))}).catch(function(e){o(new Error("服务错误，请重试"))})}},trigger:"blur"}],questionURL:[{required:!0,message:"问卷URL不能为空",trigger:"blur"}],questionnaireType:[{required:!0,message:"问卷类型不能为空",trigger:"blur"}]},dialogEditFormVisible:!1,dialogTableVisible:!1,dialogTableWidth:"600px",detail:{},dialogQuestionnnaireVisible:!1,questionnaireId:null,activityPageInfo:{total:0,currPage:1,pageSize:10},activityList:[]}},created:function(){this.getInfo()},watch:{checkboxModel:{handler:function(e,t){var a=[];this.list.forEach(function(e){e.referenceCount&&e.referenceCount>0||a.push(e)}),this.checkboxModel.length===a.length&&this.checkboxModel.length>0?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{getLoginId:function(){var e=sessionStorage.getItem("userId");return e||""},activityHandleCurrentChange:function(e){this.activityPageInfo.currPage=e,this.getActivityInfo()},referActivities:function(e){this.questionnaireId=e.id,this.getActivityInfo(),this.dialogTableVisible=!0},questionnaireFormExit:function(){void 0!==this.$refs.questionnaireForm&&this.$refs.questionnaireForm.resetFields(),this.dialogEditFormVisible=!1},batchDelete:function(){var e=this,t=e.checkboxModel;if(0==t.length)return e.$confirm("请至少选中一条你要删除的数据！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){}),!1;e.$confirm("此操作将永久删除选中的数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business//booking/v2/api/questionsAnswer/deleteQuestions",{data:t}).then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"删除成功!"}),setTimeout(function(){window.location.reload()},3e3)}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},checkedAll:function(){var e=this;console.log(e.checkboxModel),e.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){t.referenceCount&&t.referenceCount>0||e.checkboxModel.push(t.id)}))},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageInfo.currPage=e,this.getInfo()},newQuestionnaire:function(){this.dialogTitle="新建问卷",this.form={id:"",name:"",questionURL:"",questionnaireType:"",remark:""},this.dialogEditFormVisible=!0},viewDetail:function(e){this.detail=e,this.dialogQuestionnnaireVisible=!0},editQuestionnaire:function(e){var t=e;this.dialogTitle="编辑问卷",this.form={id:t.id,name:t.name,questionURL:t.questionURL,questionnaireType:t.questionnaireType,remark:t.remark},this.dialogEditFormVisible=!0},saveDataHandle:function(){var e=this;e.$refs.questionnaireForm.validate(function(t){if(!t)return!1;e.saveData()})},saveData:function(){var t=this,a=e.extend(!0,{},t.form),o=t.getLoginId();a.creator=o||"";var s=!!t.form.id;""==a.id&&delete a.id;s?t.axios.put("/proxy/report-business/booking/v2/api/questionsAnswer/updateQuestion",a).then(function(e){e&&e.data&&"200"==e.data.code&&t.$message({type:"success",message:"编辑问卷成功!"}),t.dialogEditFormVisible=!1,t.pageInfo.currPage=1,t.getInfo()}).catch(function(e){console.log(e)}):t.axios.post("/proxy/report-business/booking/v2/api/questionsAnswer/createQuestion",a).then(function(e){t.dialogEditFormVisible=!1,e&&e.data&&"200"==e.data.code&&(t.$message({type:"success",message:"新建问卷成功!"}),t.pageInfo.currPage=1,t.getInfo()),e&&e.data&&"500"==e.data.code&&e.data.msg&&t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},searchInfo:function(){this.getInfo()},getInfo:function(){var t=this,a={};a=e.extend(!0,{},t.query),""==e.trim(t.query.queryFiled)&&delete a.queryFiled;var o=e.param(a),s=a.keyword?"?"+o:"";t.axios.get("/proxy/report-business/booking/v2/api/questionsAnswer/questionsList/"+t.pageInfo.currPage+"/"+t.pageInfo.pageSize+s).then(function(e){if(e&&e.data&&e.data.datas){var a=e.data.datas;t.list=a,t.pageInfo=e.data.pageInfo,t.checkboxModel=[]}}).catch(function(e){console.log(e)})},getActivityInfo:function(){var e=this;e.axios.get("/proxy/report-business/booking/v2/api/questionsAnswer/referenceList/"+e.activityPageInfo.currPage+"/"+e.activityPageInfo.pageSize+"/"+this.questionnaireId).then(function(t){if(t&&t.data&&t.data.datas){var a=t.data.datas;e.activityList=a,e.activityPageInfo=t.data.pageInfo}}).catch(function(e){console.log(e)})}}}}).call(t,a("0iPh"))},aSjl:function(e,t){},bngP:function(e,t){},c4U4:function(e,t){},cFig:function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"paperList",components:{bHeader:s.a,bFooter:o.a},data:function(){return{pageInfo:{total:0,currPage:1,pageSize:10},dateTime:["",""],query:{searchType:"eventName",keyWords:""},list:[],checkboxModel:[],deleteDialogVisible:!1}},created:function(){this.getInfo()},watch:{checkboxModel:{handler:function(e,t){this.checkboxModel.length===this.list.length?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{getLoginId:function(){var e=sessionStorage.getItem("userId");return e||""},batchDelete:function(){var e=this,t=e.checkboxModel;if(0==t.length)return e.$confirm("请至少选中一条你要删除的数据！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){}),!1;e.$confirm("此操作将永久删除选中的数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/questionsAnswer/questionsAnswerDeletes",{data:t}).then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"删除成功!"}),setTimeout(function(){window.location.reload()},3e3)}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},checkedAll:function(){var e=this;console.log(e.checkboxModel),this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){e.checkboxModel.push(t.id)}))},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageInfo.currPage=e,this.getInfo()},searchInfo:function(){this.getInfo()},getInfo:function(){var t,a=this,o={};t=e.extend(!0,{},a.query),""!=e.trim(a.query.keyWords)&&t.searchType?o[t.searchType]=t.keyWords:o={},a.dateTime&&""!=a.dateTime[0]&&(params.startTime=a.dateTime[0]),a.dateTime&&""!=a.dateTime[1]&&(params.endTime=a.dateTime[1]),a.axios.post("/proxy/report-business/booking/v2/api/questionsAnswer/questionsAnswerList/"+a.pageInfo.currPage+"/"+a.pageInfo.pageSize,o).then(function(e){if(e&&e.data&&e.data.datas){var t=e.data.datas;a.list=t,a.pageInfo=e.data.pageInfo,a.checkboxModel=[]}}).catch(function(e){console.log(e)})}}}}).call(t,a("0iPh"))},cmeh:function(e,t){},dqxZ:function(e,t){},eFis:function(e,t){},g3hZ:function(e,t,a){e.exports=a.p+"static/img/user.5daf539.jpeg"},gT0A:function(e,t){},gwgT:function(e,t){},"h/4n":function(e,t){},humd:function(e,t){},i9lA:function(e,t){},iLXG:function(e,t){},iVC9:function(e,t){},icOJ:function(e,t){},jE8L:function(e,t){},jUGb:function(e,t){},kIdi:function(e,t){},kbN9:function(e,t){},lAnt:function(e,t){},lRwf:function(e,t){e.exports=Vue},mkI6:function(e,t){},nLun:function(e,t){},nahr:function(e,t){},nrGU:function(e,t){},o3dj:function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3"),i=a("G0J2"),r=(a.n(i),[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!0,"large","huge"]}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],["link"]]);t.a={name:"editBook",components:{bFooter:o.a,bHeader:s.a,quillEditor:i.quillEditor},data:function(){return{imageUrl:"",bookform:{bookName:"",author:"",publisher:"",translator:"",bookPrice:"",page:"",frame:"",readType:"",publishDate:"",isbn:"",bookProfile:"",bookContent:"",authorContent:"",chapter:"",ageGroup:""},rule:{bookName:[{required:!0,message:"请输入图书名称",trigger:"blur"},{max:40,message:"不能超过40个字符",trigger:"blur"}],author:[{required:!0,message:"请输入作者姓名",trigger:"blur"},{max:40,message:"不能超过40个字符",trigger:"blur"}],publisher:[{required:!0,message:"请输入出版社名称",trigger:"blur"},{max:40,message:"不能超过40个字符",trigger:"blur"}],translator:[{message:"请输入译者姓名",trigger:"blur"},{max:40,message:"不能超过40个字符",trigger:"blur"}],isbn:[{required:!0,validator:function(e,t,a){t?!/^[\d\-]+$/.test(t)||17!=t.length&&13!=t.length?a(new Error("请输入正确的ISBN")):a():a(new Error("请输入ISBN"))},trigger:"blur"}],bookPrice:[{validator:function(e,t,a){!/^[0-9]+([.]{1}[0-9]{1,2})?$/.test(t)&&t?a(new Error("请输入保留两位小数的数字")):t>999999.99?a(new Error("不能超过999999.99")):""===t?a(new Error("请输入价格")):a()},trigger:"blur"}],page:[{validator:function(e,t,a){!/^\d+$/.test(t)&&t?a(new Error("请输入整数")):t>9999?a(new Error("不能超过9999")):a()},trigger:"blur"}],bookProfile:[{required:!0,message:"请输入导读内容",trigger:"blur"},{max:4e3,message:"不能超过4000个字符",trigger:"blur"}],authorContent:[{max:4e3,message:"不能超过4000个字符",trigger:"blur"}],bookContent:[{max:4e3,message:"不能超过4000个字符",trigger:"blur"}],chapter:[{max:4e3,message:"不能超过4000个字符",trigger:"blur"}],readType:[{required:!0,message:"请选择阅读类型",trigger:"blur"}],ageGroup:[{required:!0,message:"请输入适读年龄",trigger:"blur"}]},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}},actionUrl:"/proxy/report-business/booking/v2/api/goodsManager/uploadGoodsImg/",editorOption:{modules:{toolbar:{container:r}}},userId:"",id:"",goodsPhoto:[],fileList:[],isGoodsPhoto:!1,isLock:!1,frameList:[{id:"平装",name:"平装"},{id:"精装",name:"精装"}],readTypeList:[{id:1,name:"经典阅读"},{id:2,name:"双语阅读"},{id:3,name:"科普阅读"},{id:4,name:"绘本阅读"}]}},computed:{editor:function(){return this.$refs.myQuillEditor.quill},header:function(){return{Authorization:sessionStorage.getItem("token")}}},mounted:function(){this.userId=sessionStorage.getItem("userId");var t=this.getUrl(window.location.href);this.id=t.id,e("html,body").animate({scrollTop:0},500),this.$nextTick(function(){this.getItem(this.id)}),console.log(this.id)},methods:{focus:function(e){e.currentTarget.select()},onEditorReady:function(e){},getUrl:function(e){for(var t=void 0,a={},o=e.slice(e.indexOf("?")+1).split("&"),s=0;s<o.length;s++)a[(t=o[s].split("="))[0]]=t[1];return a},getItem:function(e){var t=this;t.axios.get("/proxy/report-business/booking/v2/api/goodsManager/item/findItem/"+e).then(function(e){if(e.data&&200==e.data.code){var a=e.data.data;t.bookform.bookName=a.bookName,t.bookform.readType=a.readType,t.bookform.author=a.author,t.bookform.publisher=a.publisher,t.bookform.translator=a.translator,t.bookform.page=a.page,t.bookform.frame=a.frame,t.bookform.publishDate=a.publishDate,t.bookform.bookPrice=a.bookPrice,t.bookform.isbn=a.isbn,t.bookform.bookProfile=a.bookProfile,t.bookform.bookContent=a.bookContent,t.bookform.authorContent=a.authorContent,t.bookform.chapter=a.chapter,t.bookform.goodsPhoto=a.goodsPhoto,t.imageUrl=a.goodsPhoto[0].path,t.bookform.ageGroup=a.ageGroup}else t.$message.error(e.data.msg)}).catch(function(e){console.log(e)})},submitForm:function(e){var t=this,a=t.bookform;a.bookPrice=Number(a.bookPrice),t.goodsPhoto=[],t.fileList.forEach(function(e){var a={};t.goodsPhoto.length=0,a.fileName=e.response.data.fileName,a.path=e.response.data.path,a.size=e.response.data.size,t.goodsPhoto.push(a)}),t.goodsPhoto.length>0&&(a.goodsPhoto=t.goodsPhoto),a.id=t.id,t.isLock||t.$refs.bookform.validate(function(e){if(!e)return!1;t.isLock=!0,t.axios.post("/proxy/report-business/booking/v2/api/goodsManager/item/saveOrUpdateItem",a).then(function(e){t.isLock=!1,e.data&&200==e.data.code?(t.$message.success("编辑图书成功"),t.$router.push({name:"bookList"})):t.$message.error(e.data.msg)}).catch(function(e){t.isLock=!1,console.log(e)})})},handleSuccess:function(e,t,a){500!=e.code?(this.imageUrl=URL.createObjectURL(t.raw),this.fileList=a):this.$message.error(e.msg)},handleError:function(e){},beforeUpload:function(e){var t="image/jpg"==e.type,a="image/jpeg"==e.type,o=e.size/1024<300;return a||t||this.$message.error("上传图片只能是 jpg 、jpeg格式!"),o||this.$message.error("上传图片大小不能超过 300KB!"),(t||a)&&o},handleRemove:function(e,t){this.fileList=t},CtoH:function(e){if(e){"number"==typeof e&&(e=e.toString());for(var t=e,a="",o=0;o<t.length;o++)12288!=t.charCodeAt(o)?t.charCodeAt(o)>65280&&t.charCodeAt(o)<65375?a+=String.fromCharCode(t.charCodeAt(o)-65248):a+=String.fromCharCode(t.charCodeAt(o)):a+=String.fromCharCode(t.charCodeAt(o)-12256);return a}}},watch:{fileList:{handler:function(e,t){this.isGoodsPhoto=0===e.length},deep:!0},"bookform.isbn":function(e,t){this.bookform.isbn=this.CtoH(e)},"bookform.bookPrice":function(e,t){this.bookform.bookPrice=this.CtoH(e)},"bookform.page":function(e,t){this.bookform.page=this.CtoH(e)}}}}).call(t,a("0iPh"))},ob6i:function(e,t){},p2A3:function(e,t){},q8V5:function(e,t){},qlQD:function(e,t,a){e.exports=a.p+"static/img/b_login_background.ea63dac.png"},rH5K:function(e,t,a){"use strict";(function(e){t.a={props:["err"],data:function(){return{err:this.err}},methods:{goTop:function(){e("html,body").animate({scrollTop:0},500)},save:function(){this.$parent.submit("save",this.err)},goActive:function(){this.$parent.submit("goActive",this.err)},goFile:function(){this.$parent.submit("goFile",this.err)}}}}).call(t,a("0iPh"))},rg6s:function(e,t,a){"use strict";(function(e){var o=a("mvHQ"),s=a.n(o),i=a("XUl8"),r=a("FVP3");t.a={name:"paperDetail",components:{bHeader:r.a,bFooter:i.a},data:function(){return{pageInfo:{total:0,currPage:1,pageSize:10},query:{searchType:"orgName",keyword:""},list:[],eventId:this.$route.params.id,nodeId:this.$route.query.nodeId,eventQuestionnaireId:this.$route.query.eventQuestionnaireId,checkboxModel:[],deleteDialogVisible:!1}},created:function(){this.getInfo()},watch:{checkboxModel:{handler:function(e,t){this.checkboxModel.length===this.list.length?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{getLoginId:function(){var e=sessionStorage.getItem("userId");return e||""},batchDelete:function(){var e=this,t=e.checkboxModel;if(0==t.length)return e.$confirm("请至少选中一条你要删除的记录！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){}),!1;e.$confirm("此操作将永久删除选中的记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/stattionNews/delete",{data:t}).then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"删除成功!"}),setTimeout(function(){window.location.reload()},3e3)}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},checkedAll:function(){var e=this;console.log(e.checkboxModel),this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){e.checkboxModel.push(t.id)}))},handleCurrentChange:function(e){this.pageInfo.currPage=e,this.getInfo()},searchInfo:function(){this.getInfo()},getInfo:function(){var t,a,o,s=this,i="";t=e.extend(!0,{},s.query),""!==e.trim(s.query.keyword)&&t.searchType&&(i="&"+t.searchType+"="+t.keyword),a=s.eventId,o=s.nodeId,s.axios.get("/proxy/report-business/booking/v2/api/questionsAnswer/answerSheet/events/"+a+"/nodes/"+o+"/answerSheetDetail/"+s.eventQuestionnaireId+"?currentPage="+s.pageInfo.currPage+"&pageSize="+s.pageInfo.pageSize+i).then(function(e){if(e&&e.data&&e.data.datas){var t=e.data.datas;s.list=t,s.pageInfo=e.data.pageInfo,s.checkboxModel=[]}}).catch(function(e){console.log(e)})},toAnswerSheet:function(e){e.readonly=!0,sessionStorage.setItem("active",s()(e)),this.$router.push({name:e.url})}}}}).call(t,a("0iPh"))},rkM4:function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"apiViewList",components:{bHeader:s.a,bFooter:o.a},data:function(){return{interfaceId:this.$route.query.id,pageInfo:{total:0,currPage:1,pageSize:10},query:{name:""},list:[],checkboxModel:[],isCheckedAll:!1,form:{applicationName:"",effectiveType:1,interfaceStatus:1,maxCount:null,thirdPartApplication:{id:""},interfaceInfo:{id:this.interfaceId}},rules:{applicationName:[{required:!0,message:"应用名称不能为空",trigger:"blur"}],maxCount:[{required:!0,message:"限制次数不能为空,且只能为大于0的整数",trigger:"blur"}],effectiveType:[{required:!0,message:"限制时间单位不能为空",trigger:"blur"}],interfaceStatus:[{required:!0,message:"应用状态不能为空",trigger:"blur"}]},formLength:{applicationName:50,maxCount:10},options:[{value:1,label:"年"},{value:2,label:"月"},{value:3,label:"日"},{value:4,label:"天"}],dialogFormVisible:!1,dialogFormTitle:"添加应用",formLabelWidth:"120px",detailData:{},dialogDetailVisible:!1,userId:"",validName:!1}},created:function(){this.getInfo()},mounted:function(){this.userId=sessionStorage.getItem("userId")},watch:{checkboxModel:{handler:function(e,t){var a=[];this.list.forEach(function(e){2!==e.newsStatus&&a.push(e)}),this.checkboxModel.length===a.length&&this.checkboxModel.length>0?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{formatInputNumber:function(){if(null===this.form.maxCount||""===this.form.maxCount)return!1;var e=this.form.maxCount.toString().replace(/[^\d]/g,""),t=0;""!=e&&(t=parseInt(e)),this.form.maxCount=t>=1?t:""},querySearchAsync:function(t,a){var o=this;if(!t||!e.trim(t))return a([{value:"请输入搜索内容",id:-1}]),!1;clearTimeout(o.timeout),o.timeout=setTimeout(function(){o.axios.get("/proxy/report-business/booking/v2/api/application/interfaceAngle/seachThirdApp?name="+encodeURIComponent(t)).then(function(t){if(t&&t.data&&t.data.data.length>0){var o=t.data.data,s=[];e.each(o,function(e,t){s.push({value:t.applicationName,id:t.id})}),a(s)}else a([{value:"没找到相关数据",id:-1}])}).catch(function(e){a([{value:"没找到相关数据",id:-1}]),console.log(e)})},300)},handleSelect:function(e){this.form.thirdPartApplication.id=e.id,this.form.applicationName=e.value},batchDelete:function(){var e=this,t=e.checkboxModel;if(0==t.length)return e.$confirm("请至少选中一个你要删除的应用！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){}).catch(function(){}),!1;e.$confirm("此操作将永久删除选中的应用, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/application/interfaceAngle",{data:t}).then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"删除成功!"}),e.pageInfo.currPage=1,e.getInfo()}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},serviceFormExit:function(){void 0!==this.$refs.serviceForm&&this.$refs.serviceForm.resetFields(),this.dialogFormVisible=!1},createService:function(){var e={applicationName:"",effectiveType:1,interfaceStatus:1,maxCount:null,thirdPartApplication:{id:""},interfaceInfo:{id:this.interfaceId}};this.dialogFormTitle="添加应用",this.dialogFormVisible=!0,this.form=e,this.validName=!1},editService:function(e){var t=this,a=e.id;t.axios.get("/proxy/report-business/booking/v2/api/application/interfaceAngle/"+a).then(function(e){if(e&&e.data&&"200"==e.data.code){var a=e.data.data,o={applicationName:a.applicationName,effectiveType:a.effectiveType,interfaceStatus:a.interfaceStatus,maxCount:a.maxCount,thirdPartApplication:{id:a.thirdPartApplication},interfaceInfo:{id:a.interfaceInfo}};t.dialogFormTitle="编辑应用",t.dialogFormVisible=!0,t.form=o}}).catch(function(e){console.log(e)})},viewService:function(e){var t=this,a=e.id;t.axios.get("/proxy/report-business/booking/v2/api/application/interfaceAngle/"+a).then(function(e){if(e&&e.data&&"200"==e.data.code){var a=e.data.data;t.detailData=a,t.dialogDetailVisible=!0}}).catch(function(e){console.log(e)})},changeInterfaceStatus:function(e,t){var a=this,o=1==t?"开放":"关闭";a.$confirm("此操作将"+o+"该接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){a.axios.put("/proxy/report-business/booking/v2/api/application/interfaceAngle/updateStatus/"+a.userId+"/"+e+"/"+t).then(function(e){e&&e.data&&"200"==e.data.code&&a.$message({type:"success",message:o+"接口成功!"}),a.pageInfo.currPage=1,a.getInfo()}).catch(function(e){console.log(e)})}).catch(function(){a.$message({type:"info",message:"已取消操作"})})},saveHandle:function(){var e=this;e.validName||e.$refs.serviceForm.validate(function(t){if(!t)return!1;e.saveService()})},saveService:function(){var t=this,a=e.extend(!0,{},t.form);""===a.id&&delete a.id,a.maxCount=parseInt(a.maxCount);var o=!!a.id;t.form.thirdPartApplication.id?t.axios.post("/proxy/report-business/booking/v2/api/application/interfaceAngle/"+this.userId,a).then(function(e){e&&e.data&&"200"==e.data.code&&(t.dialogFormVisible=!1,t.$message({type:"success",message:o?"编辑应用成功!":"新建应用成功!"}),t.getInfo())}).catch(function(e){console.log(e)}):t.$message.error("应用不存在，无法添加")},checkedAll:function(){var e=this;this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){2!==t.newsStatus&&e.checkboxModel.push(t.id)}))},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageInfo.currPage=e,this.getInfo()},searchInfo:function(){this.getInfo()},getInfo:function(){var t,a=this,o="";t=e.extend(!0,{},a.query),""==e.trim(a.query.name)||(o="?"+e.param(t)),a.axios.get("/proxy/report-business/booking/v2/api/application/interfaceAngle/"+a.pageInfo.currPage+"/"+a.pageInfo.pageSize+"/"+a.interfaceId+o).then(function(e){if(e&&e.data&&e.data.datas){var t=e.data.datas;a.list=t,a.pageInfo=e.data.pageInfo,a.checkboxModel=[]}}).catch(function(e){console.log(e)})},checkName:function(){var e=this;e.axios.post("/proxy/report-business/booking/v2/api/application/interfaceAngle/checkAppName/"+e.interfaceId+"?applicationName="+e.form.applicationName).then(function(t){e.validName=!(!t.data||t.data.data)}).catch(function(e){console.log(e)})}}}}).call(t,a("0iPh"))},rqSR:function(e,t){},rtbX:function(e,t){},sBHA:function(e,t,a){e.exports=a.p+"static/img/logo.530c385.png"},uWRl:function(e,t){},uZRe:function(e,t){},vW6h:function(e,t,a){e.exports=a.p+"static/img/wechat.5825195.jpg"},vXSA:function(e,t){},"w0+9":function(e,t){},wZYJ:function(e,t){},wa7I:function(e,t){},wqG9:function(e,t,a){"use strict";(function(e){var o=a("XUl8"),s=a("FVP3");t.a={name:"applicationViewList",components:{bHeader:s.a,bFooter:o.a},data:function(){return{applicationId:this.$route.query.id,pageInfo:{total:0,currPage:1,pageSize:10},query:{name:""},list:[],checkboxModel:[],isCheckedAll:!1,form:{interfaceName:"",effectiveType:1,interfaceStatus:1,maxCount:null,thirdPartApplication:{id:this.applicationId},interfaceInfo:{id:""}},rules:{applicationName:[{required:!0,message:"应用名称不能为空",trigger:"blur"}],maxCount:[{required:!0,message:"限制次数不能为空,且只能为大于0的整数",trigger:"blur"}],effectiveType:[{required:!0,message:"限制时间单位不能为空",trigger:"blur"}],interfaceStatus:[{required:!0,message:"应用状态不能为空",trigger:"blur"}]},formLength:{applicationName:50,maxCount:10},options:[{value:1,label:"年"},{value:2,label:"季"},{value:3,label:"月"},{value:4,label:"天"}],dialogFormVisible:!1,dialogFormTitle:"新建接口",formLabelWidth:"120px",detailData:{},dialogDetailVisible:!1,userId:"",validName:!1}},created:function(){this.getInfo()},mounted:function(){this.userId=sessionStorage.getItem("userId")},watch:{checkboxModel:{handler:function(e,t){var a=[];this.list.forEach(function(e){2!==e.newsStatus&&a.push(e)}),this.checkboxModel.length===a.length&&this.checkboxModel.length>0?this.isCheckedAll=!0:this.isCheckedAll=!1},deep:!0}},methods:{formatInputNumber:function(){if(null===this.form.maxCount||""===this.form.maxCount)return!1;var e=this.form.maxCount.toString().replace(/[^\d]/g,""),t=0;""!=e&&(t=parseInt(e)),this.form.maxCount=t>=1?t:""},querySearchAsync:function(t,a){var o=this;if(!t||!e.trim(t))return a([{value:"请输入搜索内容",id:-1}]),!1;clearTimeout(o.timeout),o.timeout=setTimeout(function(){o.axios.get("/proxy/report-business/booking/v2/api/application/applicationAngle/seachInterface?name="+encodeURIComponent(t)).then(function(t){if(t&&t.data&&t.data.data.length>0){var o=t.data.data,s=[];e.each(o,function(e,t){s.push({value:t.interfaceName,id:t.id})}),a(s)}else a([{value:"没找到相关数据",id:-1}])}).catch(function(e){a([{value:"没找到相关数据",id:-1}]),console.log(e)})},300)},handleSelect:function(e){this.form.interfaceInfo.id=e.id,this.form.interfaceName=e.value,this.checkName()},batchDelete:function(){var e=this,t=e.checkboxModel;if(0==t.length)return e.$confirm("请至少选中一个你要删除的接口！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){}).catch(function(){}),!1;e.$confirm("此操作将永久删除选中的接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){e.axios.delete("/proxy/report-business/booking/v2/api/application/interfaceAngle",{data:t}).then(function(t){t&&t.data&&"200"==t.data.code&&e.$message({type:"success",message:"删除成功!"}),e.pageInfo.currPage=1,e.getInfo()}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},serviceFormExit:function(){void 0!==this.$refs.serviceForm&&this.$refs.serviceForm.resetFields(),this.dialogFormVisible=!1},createService:function(){var e={interfaceName:"",effectiveType:1,interfaceStatus:1,maxCount:null,thirdPartApplication:{id:this.applicationId},interfaceInfo:{id:""}};this.dialogFormTitle="新建接口",this.dialogFormVisible=!0,this.form=e,this.validName=!1},editService:function(e){var t=this,a=e.id;t.axios.get("/proxy/report-business/booking/v2/api/application/interfaceAngle/"+a).then(function(e){if(e&&e.data&&"200"==e.data.code){var a=e.data.data,o={interfaceName:a.interfaceName,effectiveType:a.effectiveType,interfaceStatus:a.interfaceStatus,maxCount:a.maxCount,thirdPartApplication:{id:a.thirdPartApplication},interfaceInfo:{id:a.interfaceInfo}};t.dialogFormTitle="编辑接口",t.dialogFormVisible=!0,t.form=o}}).catch(function(e){console.log(e)})},viewService:function(e){var t=this,a=e.id;t.axios.get("/proxy/report-business/booking/v2/api/application/interfaceAngle/"+a).then(function(e){if(e&&e.data&&"200"==e.data.code){var a=e.data.data;t.detailData=a,t.dialogDetailVisible=!0}}).catch(function(e){console.log(e)})},changeInterfaceStatus:function(e,t){var a=this,o=1==t?"开放":"关闭";a.$confirm("此操作将"+o+"该接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){a.axios.put("/proxy/report-business/booking/v2/api/application/interfaceAngle/updateStatus/"+a.userId+"/"+e+"/"+t).then(function(e){e&&e.data&&"200"==e.data.code&&a.$message({type:"success",message:o+"接口成功!"}),a.pageInfo.currPage=1,a.getInfo()}).catch(function(e){console.log(e)})}).catch(function(){a.$message({type:"info",message:"已取消操作"})})},saveHandle:function(){var e=this;e.validName||e.$refs.serviceForm.validate(function(t){if(!t)return!1;e.saveService()})},saveService:function(){var t=this,a=e.extend(!0,{},t.form);""===a.id&&delete a.id,a.maxCount=parseInt(a.maxCount);var o=!!a.id;console.log(t.form.interfaceInfo.id),t.form.interfaceInfo.id?t.axios.post("/proxy/report-business/booking/v2/api/application/applicationAngle/"+this.userId,a).then(function(e){e&&e.data&&"200"==e.data.code&&(t.dialogFormVisible=!1,t.$message({type:"success",message:o?"编辑接口成功!":"新建接口成功!"}),t.getInfo())}).catch(function(e){console.log(e)}):t.$message.error("应用不存在，无法添加")},checkedAll:function(){var e=this;this.isCheckedAll?e.checkboxModel=[]:(e.checkboxModel=[],e.list.forEach(function(t){2!==t.newsStatus&&e.checkboxModel.push(t.id)}))},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageInfo.currPage=e,this.getInfo()},searchInfo:function(){this.getInfo()},getInfo:function(){var t,a=this,o="";t=e.extend(!0,{},a.query),""==e.trim(a.query.name)||(o="?"+e.param(t)),a.axios.get("/proxy/report-business/booking/v2/api/application/applicationAngle/"+a.pageInfo.currPage+"/"+a.pageInfo.pageSize+"/"+a.applicationId+o).then(function(e){if(e&&e.data&&e.data.datas){var t=e.data.datas;a.list=t,a.pageInfo=e.data.pageInfo,a.checkboxModel=[]}}).catch(function(e){console.log(e)})},checkName:function(){var e=this;e.axios.post("/proxy/report-business/booking/v2/api/application/applicationAngle/checkInterfaceName/"+e.applicationId+"?interfaceName="+e.form.interfaceName).then(function(t){e.validName=!(!t.data||t.data.data)}).catch(function(e){console.log(e)})}}}}).call(t,a("0iPh"))},wvYg:function(e,t){},xEzh:function(e,t){},xem1:function(e,t){},xvqJ:function(e,t){},yfxw:function(e,t){},ziSv:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.603a373b459c13ce472b.js.map